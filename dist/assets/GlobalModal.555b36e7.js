import{L as m,M as bo,O as Oe,P as vu,Q as wo,_ as s,R as hu,T as gu,U as mu,W as pu,X as yu,Y as Su,Z as bu,$ as wu,a0 as Cu,a1 as Eu,a2 as xu,a3 as V,a4 as Et,a5 as ee,a6 as ku,a7 as Lu,a8 as Au,a9 as Pu,aa as Nu,ab as _u,ac as Ou,ad as Tu,ae as Bu,af as Mu,ag as Ru,ah as Iu,ai as zu,aj as L,ak as w,al as C,am as I,an as Ae,ao as je,ap as Du,aq as ne,ar as ie,as as Co,at as Ku,au as Ne,av as Uu,aw as Ce,ax as Eo,ay as we,az as qu,aA as Fu,aB as xo,q as Gu,d as ju,N as kr,b as z,S as Lr,o as $u,f as Hu,v as Vu,aC as Xu,g as Ee,G as gt}from"./vendor.e2bcb249.js";import{u as Ar,M as Re,a as _e,b as Qe,_ as Wu}from"./app.6a8a6329.js";const Ju="@aws-sdk/client-s3",Zu="AWS SDK for JavaScript S3 Client for Node.js, Browser and React Native",Qu="3.6.1",Yu={clean:"yarn remove-definitions && yarn remove-dist && yarn remove-documentation","build-documentation":"yarn remove-documentation && typedoc ./",prepublishOnly:"yarn build",pretest:"yarn build:cjs","remove-definitions":"rimraf ./types","remove-dist":"rimraf ./dist","remove-documentation":"rimraf ./docs","test:unit":"mocha **/cjs/**/*.spec.js","test:e2e":"mocha **/cjs/**/*.ispec.js && karma start karma.conf.js",test:"yarn test:unit","build:cjs":"tsc -p tsconfig.json","build:es":"tsc -p tsconfig.es.json",build:"yarn build:cjs && yarn build:es",postbuild:"downlevel-dts types types/ts3.4"},ec="./dist/cjs/index.js",tc="./types/index.d.ts",rc="./dist/es/index.js",nc={"./runtimeConfig":"./runtimeConfig.browser"},ic=!1,ac={"@aws-crypto/sha256-browser":"^1.0.0","@aws-crypto/sha256-js":"^1.0.0","@aws-sdk/config-resolver":"3.6.1","@aws-sdk/credential-provider-node":"3.6.1","@aws-sdk/eventstream-serde-browser":"3.6.1","@aws-sdk/eventstream-serde-config-resolver":"3.6.1","@aws-sdk/eventstream-serde-node":"3.6.1","@aws-sdk/fetch-http-handler":"3.6.1","@aws-sdk/hash-blob-browser":"3.6.1","@aws-sdk/hash-node":"3.6.1","@aws-sdk/hash-stream-node":"3.6.1","@aws-sdk/invalid-dependency":"3.6.1","@aws-sdk/md5-js":"3.6.1","@aws-sdk/middleware-apply-body-checksum":"3.6.1","@aws-sdk/middleware-bucket-endpoint":"3.6.1","@aws-sdk/middleware-content-length":"3.6.1","@aws-sdk/middleware-expect-continue":"3.6.1","@aws-sdk/middleware-host-header":"3.6.1","@aws-sdk/middleware-location-constraint":"3.6.1","@aws-sdk/middleware-logger":"3.6.1","@aws-sdk/middleware-retry":"3.6.1","@aws-sdk/middleware-sdk-s3":"3.6.1","@aws-sdk/middleware-serde":"3.6.1","@aws-sdk/middleware-signing":"3.6.1","@aws-sdk/middleware-ssec":"3.6.1","@aws-sdk/middleware-stack":"3.6.1","@aws-sdk/middleware-user-agent":"3.6.1","@aws-sdk/node-config-provider":"3.6.1","@aws-sdk/node-http-handler":"3.6.1","@aws-sdk/protocol-http":"3.6.1","@aws-sdk/smithy-client":"3.6.1","@aws-sdk/types":"3.6.1","@aws-sdk/url-parser":"3.6.1","@aws-sdk/url-parser-native":"3.6.1","@aws-sdk/util-base64-browser":"3.6.1","@aws-sdk/util-base64-node":"3.6.1","@aws-sdk/util-body-length-browser":"3.6.1","@aws-sdk/util-body-length-node":"3.6.1","@aws-sdk/util-user-agent-browser":"3.6.1","@aws-sdk/util-user-agent-node":"3.6.1","@aws-sdk/util-utf8-browser":"3.6.1","@aws-sdk/util-utf8-node":"3.6.1","@aws-sdk/util-waiter":"3.6.1","@aws-sdk/xml-builder":"3.6.1","fast-xml-parser":"^3.16.0",tslib:"^2.0.0"},sc={"@aws-sdk/client-documentation-generator":"3.6.1","@types/chai":"^4.2.11","@types/mocha":"^8.0.4","@types/node":"^12.7.5","downlevel-dts":"0.7.0",jest:"^26.1.0",rimraf:"^3.0.0",typedoc:"^0.19.2",typescript:"~4.1.2"},oc={node:">=10.0.0"},uc={"<4.0":{"types/*":["types/ts3.4/*"]}},cc={name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},dc="Apache-2.0",lc="https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-s3",fc={type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-s3"};var vc={name:Ju,description:Zu,version:Qu,scripts:Yu,main:ec,types:tc,module:rc,browser:nc,"react-native":{"./runtimeConfig":"./runtimeConfig.native"},sideEffects:ic,dependencies:ac,devDependencies:sc,engines:oc,typesVersions:uc,author:cc,license:dc,homepage:lc,repository:fc},dt={},lt={};Object.defineProperty(lt,"__esModule",{value:!0});lt.AwsCrc32=void 0;var Pr=m.exports,mt=bo,hc=dt,gc=function(){function e(){this.crc32=new hc.Crc32}return e.prototype.update=function(t){(0,mt.isEmptyData)(t)||this.crc32.update((0,mt.convertToBuffer)(t))},e.prototype.digest=function(){return(0,Pr.__awaiter)(this,void 0,void 0,function(){return(0,Pr.__generator)(this,function(t){return[2,(0,mt.numToUint8)(this.crc32.digest())]})})},e}();lt.AwsCrc32=gc;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AwsCrc32=e.Crc32=e.crc32=void 0;var t=m.exports,r=bo;function n(d){return new i().update(d).digest()}e.crc32=n;var i=function(){function d(){this.checksum=4294967295}return d.prototype.update=function(c){var l,f;try{for(var g=(0,t.__values)(c),v=g.next();!v.done;v=g.next()){var p=v.value;this.checksum=this.checksum>>>8^o[(this.checksum^p)&255]}}catch(y){l={error:y}}finally{try{v&&!v.done&&(f=g.return)&&f.call(g)}finally{if(l)throw l.error}}return this},d.prototype.digest=function(){return(this.checksum^4294967295)>>>0},d}();e.Crc32=i;var a=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],o=(0,r.uint32ArrayFrom)(a),u=lt;Object.defineProperty(e,"AwsCrc32",{enumerable:!0,get:function(){return u.AwsCrc32}})})(dt);var pt=function(){function e(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}return e.fromNumber=function(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(t+" is too large (or, if negative, too small) to represent as an Int64");for(var r=new Uint8Array(8),n=7,i=Math.abs(Math.round(t));n>-1&&i>0;n--,i/=256)r[n]=i;return t<0&&Nr(r),new e(r)},e.prototype.valueOf=function(){var t=this.bytes.slice(0),r=t[0]&128;return r&&Nr(t),parseInt(Oe(t),16)*(r?-1:1)},e.prototype.toString=function(){return String(this.valueOf())},e}();function Nr(e){for(var t=0;t<8;t++)e[t]^=255;for(var t=7;t>-1&&(e[t]++,e[t]===0);t--);}var mc=function(){function e(t,r){this.toUtf8=t,this.fromUtf8=r}return e.prototype.format=function(t){var r,n,i,a,o=[];try{for(var u=m.exports.__values(Object.keys(t)),d=u.next();!d.done;d=u.next()){var c=d.value,l=this.fromUtf8(c);o.push(Uint8Array.from([l.byteLength]),l,this.formatHeaderValue(t[c]))}}catch(S){r={error:S}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}var f=new Uint8Array(o.reduce(function(S,b){return S+b.byteLength},0)),g=0;try{for(var v=m.exports.__values(o),p=v.next();!p.done;p=v.next()){var y=p.value;f.set(y,g),g+=y.byteLength}}catch(S){i={error:S}}finally{try{p&&!p.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}return f},e.prototype.formatHeaderValue=function(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":var r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":var n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":var i=new Uint8Array(9);return i[0]=5,i.set(t.value.bytes,1),i;case"binary":var a=new DataView(new ArrayBuffer(3+t.value.byteLength));a.setUint8(0,6),a.setUint16(1,t.value.byteLength,!1);var o=new Uint8Array(a.buffer);return o.set(t.value,3),o;case"string":var u=this.fromUtf8(t.value),d=new DataView(new ArrayBuffer(3+u.byteLength));d.setUint8(0,7),d.setUint16(1,u.byteLength,!1);var c=new Uint8Array(d.buffer);return c.set(u,3),c;case"timestamp":var l=new Uint8Array(9);return l[0]=8,l.set(pt.fromNumber(t.value.valueOf()).bytes,1),l;case"uuid":if(!kc.test(t.value))throw new Error("Invalid UUID received: "+t.value);var f=new Uint8Array(17);return f[0]=9,f.set(vu(t.value.replace(/\-/g,"")),1),f}},e.prototype.parse=function(t){for(var r={},n=0;n<t.byteLength;){var i=t.getUint8(n++),a=this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,i));switch(n+=i,t.getUint8(n++)){case 0:r[a]={type:Or,value:!0};break;case 1:r[a]={type:Or,value:!1};break;case 2:r[a]={type:pc,value:t.getInt8(n++)};break;case 3:r[a]={type:yc,value:t.getInt16(n,!1)},n+=2;break;case 4:r[a]={type:Sc,value:t.getInt32(n,!1)},n+=4;break;case 5:r[a]={type:bc,value:new pt(new Uint8Array(t.buffer,t.byteOffset+n,8))},n+=8;break;case 6:var o=t.getUint16(n,!1);n+=2,r[a]={type:wc,value:new Uint8Array(t.buffer,t.byteOffset+n,o)},n+=o;break;case 7:var u=t.getUint16(n,!1);n+=2,r[a]={type:Cc,value:this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,u))},n+=u;break;case 8:r[a]={type:Ec,value:new Date(new pt(new Uint8Array(t.buffer,t.byteOffset+n,8)).valueOf())},n+=8;break;case 9:var d=new Uint8Array(t.buffer,t.byteOffset+n,16);n+=16,r[a]={type:xc,value:Oe(d.subarray(0,4))+"-"+Oe(d.subarray(4,6))+"-"+Oe(d.subarray(6,8))+"-"+Oe(d.subarray(8,10))+"-"+Oe(d.subarray(10))};break;default:throw new Error("Unrecognized header type tag")}}return r},e}(),_r;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(_r||(_r={}));var Or="boolean",pc="byte",yc="short",Sc="integer",bc="long",wc="binary",Cc="string",Ec="timestamp",xc="uuid",kc=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,ko=4,be=ko*2,ke=4,Lc=be+ke*2;function Ac(e){var t=e.byteLength,r=e.byteOffset,n=e.buffer;if(t<Lc)throw new Error("Provided message too short to accommodate event stream message overhead");var i=new DataView(n,r,t),a=i.getUint32(0,!1);if(t!==a)throw new Error("Reported message length does not match received message length");var o=i.getUint32(ko,!1),u=i.getUint32(be,!1),d=i.getUint32(t-ke,!1),c=new dt.Crc32().update(new Uint8Array(n,r,be));if(u!==c.digest())throw new Error("The prelude checksum specified in the message ("+u+") does not match the calculated CRC32 checksum ("+c.digest()+")");if(c.update(new Uint8Array(n,r+be,t-(be+ke))),d!==c.digest())throw new Error("The message checksum ("+c.digest()+") did not match the expected value of "+d);return{headers:new DataView(n,r+be+ke,o),body:new Uint8Array(n,r+be+ke+o,a-o-(be+ke+ke))}}var Lo=function(){function e(t,r){this.headerMarshaller=new mc(t,r)}return e.prototype.marshall=function(t){var r=t.headers,n=t.body,i=this.headerMarshaller.format(r),a=i.byteLength+n.byteLength+16,o=new Uint8Array(a),u=new DataView(o.buffer,o.byteOffset,o.byteLength),d=new dt.Crc32;return u.setUint32(0,a,!1),u.setUint32(4,i.byteLength,!1),u.setUint32(8,d.update(o.subarray(0,8)).digest(),!1),o.set(i,12),o.set(n,i.byteLength+12),u.setUint32(a-4,d.update(o.subarray(8,a-4)).digest(),!1),o},e.prototype.unmarshall=function(t){var r=Ac(t),n=r.headers,i=r.body;return{headers:this.headerMarshaller.parse(n),body:i}},e.prototype.formatHeaders=function(t){return this.headerMarshaller.format(t)},e}();function Pc(e){var t,r=0,n=0,i=null,a=null,o=function(d){if(typeof d!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+d);r=d,n=4,i=new Uint8Array(d);var c=new DataView(i.buffer);c.setUint32(0,d,!1)},u=function(){return m.exports.__asyncGenerator(this,arguments,function(){var d,c,l,f,g,v,p,y,S;return m.exports.__generator(this,function(b){switch(b.label){case 0:d=e[Symbol.asyncIterator](),b.label=1;case 1:return[4,m.exports.__await(d.next())];case 2:return c=b.sent(),l=c.value,f=c.done,f?r?[3,4]:[4,m.exports.__await(void 0)]:[3,10];case 3:return[2,b.sent()];case 4:return r!==n?[3,7]:[4,m.exports.__await(i)];case 5:return[4,b.sent()];case 6:return b.sent(),[3,8];case 7:throw new Error("Truncated event message received.");case 8:return[4,m.exports.__await(void 0)];case 9:return[2,b.sent()];case 10:g=l.length,v=0,b.label=11;case 11:if(!(v<g))return[3,15];if(!i){if(p=g-v,a||(a=new Uint8Array(4)),y=Math.min(4-n,p),a.set(l.slice(v,v+y),n),n+=y,v+=y,n<4)return[3,15];o(new DataView(a.buffer).getUint32(0,!1)),a=null}return S=Math.min(r-n,g-v),i.set(l.slice(v,v+S),n),n+=S,v+=S,r&&r===n?[4,m.exports.__await(i)]:[3,14];case 12:return[4,b.sent()];case 13:b.sent(),i=null,r=0,n=0,b.label=14;case 14:return[3,11];case 15:return[3,1];case 16:return[2]}})})};return t={},t[Symbol.asyncIterator]=u,t}function Nc(e,t){var r;return r={},r[Symbol.asyncIterator]=function(){return m.exports.__asyncGenerator(this,arguments,function(){var n,i,a,o,u,d,c,l,f,g,v,p,y,S,b,O,N;return m.exports.__generator(this,function(E){switch(E.label){case 0:E.trys.push([0,12,13,18]),n=m.exports.__asyncValues(e),E.label=1;case 1:return[4,m.exports.__await(n.next())];case 2:if(i=E.sent(),!!i.done)return[3,11];if(a=i.value,o=t.eventMarshaller.unmarshall(a),u=o.headers[":message-type"].value,u!=="error")return[3,3];throw d=new Error(o.headers[":error-message"].value||"UnknownError"),d.name=o.headers[":error-code"].value,d;case 3:return u!=="exception"?[3,5]:(c=o.headers[":exception-type"].value,l=(S={},S[c]=o,S),[4,m.exports.__await(t.deserializer(l))]);case 4:throw f=E.sent(),f.$unknown?(g=new Error(t.toUtf8(o.body)),g.name=c,g):f[c];case 5:return u!=="event"?[3,9]:(v=(b={},b[o.headers[":event-type"].value]=o,b),[4,m.exports.__await(t.deserializer(v))]);case 6:return p=E.sent(),p.$unknown?[3,10]:[4,m.exports.__await(p)];case 7:return[4,E.sent()];case 8:return E.sent(),[3,10];case 9:throw Error("Unrecognizable event type: "+o.headers[":event-type"].value);case 10:return[3,1];case 11:return[3,18];case 12:return y=E.sent(),O={error:y},[3,18];case 13:return E.trys.push([13,,16,17]),i&&!i.done&&(N=n.return)?[4,m.exports.__await(N.call(n))]:[3,15];case 14:E.sent(),E.label=15;case 15:return[3,17];case 16:if(O)throw O.error;return[7];case 17:return[7];case 18:return[2]}})})},r}var _c=function(){function e(t){var r=t.utf8Encoder,n=t.utf8Decoder;this.eventMarshaller=new Lo(r,n),this.utfEncoder=r}return e.prototype.deserialize=function(t,r){var n=Pc(t),i=Nc(n,{eventMarshaller:this.eventMarshaller,deserializer:r,toUtf8:this.utfEncoder});return i},e.prototype.serialize=function(t,r){var n,i=this,a=function(){return m.exports.__asyncGenerator(this,arguments,function(){var o,u,d,c,l,f,g;return m.exports.__generator(this,function(v){switch(v.label){case 0:v.trys.push([0,7,8,13]),o=m.exports.__asyncValues(t),v.label=1;case 1:return[4,m.exports.__await(o.next())];case 2:return u=v.sent(),!u.done?(d=u.value,c=i.eventMarshaller.marshall(r(d)),[4,m.exports.__await(c)]):[3,6];case 3:return[4,v.sent()];case 4:v.sent(),v.label=5;case 5:return[3,1];case 6:return[3,13];case 7:return l=v.sent(),f={error:l},[3,13];case 8:return v.trys.push([8,,11,12]),u&&!u.done&&(g=o.return)?[4,m.exports.__await(g.call(o))]:[3,10];case 9:v.sent(),v.label=10;case 10:return[3,12];case 11:if(f)throw f.error;return[7];case 12:return[7];case 13:return[4,m.exports.__await(new Uint8Array(0))];case 14:return[4,v.sent()];case 15:return v.sent(),[2]}})})};return n={},n[Symbol.asyncIterator]=a,n},e}(),Oc=function(e){var t;return t={},t[Symbol.asyncIterator]=function(){return m.exports.__asyncGenerator(this,arguments,function(){var r,n,i,a;return m.exports.__generator(this,function(o){switch(o.label){case 0:r=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,m.exports.__await(r.read())];case 3:return n=o.sent(),i=n.done,a=n.value,i?[4,m.exports.__await(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,m.exports.__await(a)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})},t},Tc=function(e){var t=e[Symbol.asyncIterator]();return new ReadableStream({pull:function(r){return m.exports.__awaiter(this,void 0,void 0,function(){var n,i,a;return m.exports.__generator(this,function(o){switch(o.label){case 0:return[4,t.next()];case 1:return n=o.sent(),i=n.done,a=n.value,i?[2,r.close()]:(r.enqueue(a),[2])}})})}})},Bc=function(){function e(t){var r=t.utf8Encoder,n=t.utf8Decoder;this.eventMarshaller=new Lo(r,n),this.universalMarshaller=new _c({utf8Decoder:n,utf8Encoder:r})}return e.prototype.deserialize=function(t,r){var n=Mc(t)?Oc(t):t;return this.universalMarshaller.deserialize(n,r)},e.prototype.serialize=function(t,r){var n=this.universalMarshaller.serialize(t,r);return typeof ReadableStream=="function"?Tc(n):n},e}(),Mc=function(e){return typeof ReadableStream=="function"&&e instanceof ReadableStream},Rc=function(e){return new Bc(e)};function Ic(e,t,r){return r===void 0&&(r=1024*1024),new Promise(function(n,i){var a=new FileReader;a.addEventListener("error",i),a.addEventListener("abort",i);var o=e.size,u=0;function d(){if(u>=o){n();return}a.readAsArrayBuffer(e.slice(u,Math.min(o,u+r)))}a.addEventListener("load",function(c){var l=c.target.result;t(new Uint8Array(l)),u+=l.byteLength,d()}),d()})}var zc=function(t,r){return m.exports.__awaiter(this,void 0,void 0,function(){var n;return m.exports.__generator(this,function(i){switch(i.label){case 0:return n=new t,[4,Ic(r,function(a){n.update(a)})];case 1:return i.sent(),[2,n.digest()]}})})},me=64,Dc=16,Kc=[1732584193,4023233417,2562383102,271733878],Uc=function(){function e(){this.state=Uint32Array.from(Kc),this.buffer=new DataView(new ArrayBuffer(me)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(t){if(!qc(t)){if(this.finished)throw new Error("Attempted to update an already finished hash.");var r=Fc(t),n=0,i=r.byteLength;for(this.bytesHashed+=i;i>0;)this.buffer.setUint8(this.bufferLength++,r[n++]),i--,this.bufferLength===me&&(this.hashBuffer(),this.bufferLength=0)}},e.prototype.digest=function(){return m.exports.__awaiter(this,void 0,void 0,function(){var t,r,n,i,a,u,u,o,u;return m.exports.__generator(this,function(d){if(!this.finished){if(t=this,r=t.buffer,n=t.bufferLength,i=t.bytesHashed,a=i*8,r.setUint8(this.bufferLength++,128),n%me>=me-8){for(u=this.bufferLength;u<me;u++)r.setUint8(u,0);this.hashBuffer(),this.bufferLength=0}for(u=this.bufferLength;u<me-8;u++)r.setUint8(u,0);r.setUint32(me-8,a>>>0,!0),r.setUint32(me-4,Math.floor(a/4294967296),!0),this.hashBuffer(),this.finished=!0}for(o=new DataView(new ArrayBuffer(Dc)),u=0;u<4;u++)o.setUint32(u*4,this.state[u],!0);return[2,new Uint8Array(o.buffer,o.byteOffset,o.byteLength)]})})},e.prototype.hashBuffer=function(){var t=this,r=t.buffer,n=t.state,i=n[0],a=n[1],o=n[2],u=n[3];i=U(i,a,o,u,r.getUint32(0,!0),7,3614090360),u=U(u,i,a,o,r.getUint32(4,!0),12,3905402710),o=U(o,u,i,a,r.getUint32(8,!0),17,606105819),a=U(a,o,u,i,r.getUint32(12,!0),22,3250441966),i=U(i,a,o,u,r.getUint32(16,!0),7,4118548399),u=U(u,i,a,o,r.getUint32(20,!0),12,1200080426),o=U(o,u,i,a,r.getUint32(24,!0),17,2821735955),a=U(a,o,u,i,r.getUint32(28,!0),22,4249261313),i=U(i,a,o,u,r.getUint32(32,!0),7,1770035416),u=U(u,i,a,o,r.getUint32(36,!0),12,2336552879),o=U(o,u,i,a,r.getUint32(40,!0),17,4294925233),a=U(a,o,u,i,r.getUint32(44,!0),22,2304563134),i=U(i,a,o,u,r.getUint32(48,!0),7,1804603682),u=U(u,i,a,o,r.getUint32(52,!0),12,4254626195),o=U(o,u,i,a,r.getUint32(56,!0),17,2792965006),a=U(a,o,u,i,r.getUint32(60,!0),22,1236535329),i=q(i,a,o,u,r.getUint32(4,!0),5,4129170786),u=q(u,i,a,o,r.getUint32(24,!0),9,3225465664),o=q(o,u,i,a,r.getUint32(44,!0),14,643717713),a=q(a,o,u,i,r.getUint32(0,!0),20,3921069994),i=q(i,a,o,u,r.getUint32(20,!0),5,3593408605),u=q(u,i,a,o,r.getUint32(40,!0),9,38016083),o=q(o,u,i,a,r.getUint32(60,!0),14,3634488961),a=q(a,o,u,i,r.getUint32(16,!0),20,3889429448),i=q(i,a,o,u,r.getUint32(36,!0),5,568446438),u=q(u,i,a,o,r.getUint32(56,!0),9,3275163606),o=q(o,u,i,a,r.getUint32(12,!0),14,4107603335),a=q(a,o,u,i,r.getUint32(32,!0),20,1163531501),i=q(i,a,o,u,r.getUint32(52,!0),5,2850285829),u=q(u,i,a,o,r.getUint32(8,!0),9,4243563512),o=q(o,u,i,a,r.getUint32(28,!0),14,1735328473),a=q(a,o,u,i,r.getUint32(48,!0),20,2368359562),i=F(i,a,o,u,r.getUint32(20,!0),4,4294588738),u=F(u,i,a,o,r.getUint32(32,!0),11,2272392833),o=F(o,u,i,a,r.getUint32(44,!0),16,1839030562),a=F(a,o,u,i,r.getUint32(56,!0),23,4259657740),i=F(i,a,o,u,r.getUint32(4,!0),4,2763975236),u=F(u,i,a,o,r.getUint32(16,!0),11,1272893353),o=F(o,u,i,a,r.getUint32(28,!0),16,4139469664),a=F(a,o,u,i,r.getUint32(40,!0),23,3200236656),i=F(i,a,o,u,r.getUint32(52,!0),4,681279174),u=F(u,i,a,o,r.getUint32(0,!0),11,3936430074),o=F(o,u,i,a,r.getUint32(12,!0),16,3572445317),a=F(a,o,u,i,r.getUint32(24,!0),23,76029189),i=F(i,a,o,u,r.getUint32(36,!0),4,3654602809),u=F(u,i,a,o,r.getUint32(48,!0),11,3873151461),o=F(o,u,i,a,r.getUint32(60,!0),16,530742520),a=F(a,o,u,i,r.getUint32(8,!0),23,3299628645),i=G(i,a,o,u,r.getUint32(0,!0),6,4096336452),u=G(u,i,a,o,r.getUint32(28,!0),10,1126891415),o=G(o,u,i,a,r.getUint32(56,!0),15,2878612391),a=G(a,o,u,i,r.getUint32(20,!0),21,4237533241),i=G(i,a,o,u,r.getUint32(48,!0),6,1700485571),u=G(u,i,a,o,r.getUint32(12,!0),10,2399980690),o=G(o,u,i,a,r.getUint32(40,!0),15,4293915773),a=G(a,o,u,i,r.getUint32(4,!0),21,2240044497),i=G(i,a,o,u,r.getUint32(32,!0),6,1873313359),u=G(u,i,a,o,r.getUint32(60,!0),10,4264355552),o=G(o,u,i,a,r.getUint32(24,!0),15,2734768916),a=G(a,o,u,i,r.getUint32(52,!0),21,1309151649),i=G(i,a,o,u,r.getUint32(16,!0),6,4149444226),u=G(u,i,a,o,r.getUint32(44,!0),10,3174756917),o=G(o,u,i,a,r.getUint32(8,!0),15,718787259),a=G(a,o,u,i,r.getUint32(36,!0),21,3951481745),n[0]=i+n[0]&4294967295,n[1]=a+n[1]&4294967295,n[2]=o+n[2]&4294967295,n[3]=u+n[3]&4294967295},e}();function ft(e,t,r,n,i,a){return t=(t+e&4294967295)+(n+a&4294967295)&4294967295,(t<<i|t>>>32-i)+r&4294967295}function U(e,t,r,n,i,a,o){return ft(t&r|~t&n,e,t,i,a,o)}function q(e,t,r,n,i,a,o){return ft(t&n|r&~n,e,t,i,a,o)}function F(e,t,r,n,i,a,o){return ft(t^r^n,e,t,i,a,o)}function G(e,t,r,n,i,a,o){return ft(r^(t|~n),e,t,i,a,o)}function qc(e){return typeof e=="string"?e.length===0:e.byteLength===0}function Fc(e){return typeof e=="string"?wo(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}var Tr="s3.{region}.amazonaws.com",Gc="s3.{region}.amazonaws.com.cn",jc="s3.{region}.c2s.ic.gov",$c="s3.{region}.sc2s.sgov.gov",Hc="s3.{region}.amazonaws.com",Vc=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),Xc=new Set(["cn-north-1","cn-northwest-1"]),Wc=new Set(["us-iso-east-1"]),Jc=new Set(["us-isob-east-1"]),Zc=new Set(["us-gov-east-1","us-gov-west-1"]),Qc=function(e,t){var r=void 0;switch(e){case"af-south-1":r={hostname:"s3.af-south-1.amazonaws.com",partition:"aws"};break;case"ap-east-1":r={hostname:"s3.ap-east-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-1":r={hostname:"s3.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":r={hostname:"s3.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":r={hostname:"s3.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":r={hostname:"s3.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":r={hostname:"s3.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"aws-global":r={hostname:"s3.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"ca-central-1":r={hostname:"s3.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":r={hostname:"s3.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"cn-northwest-1":r={hostname:"s3.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":r={hostname:"s3.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":r={hostname:"s3.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-south-1":r={hostname:"s3.eu-south-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":r={hostname:"s3.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":r={hostname:"s3.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":r={hostname:"s3.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-gov-west-1":r={hostname:"s3-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"me-south-1":r={hostname:"s3.me-south-1.amazonaws.com",partition:"aws"};break;case"s3-external-1":r={hostname:"s3-external-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"sa-east-1":r={hostname:"s3.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":r={hostname:"s3.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":r={hostname:"s3.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-east-1":r={hostname:"s3.us-gov-east-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-gov-west-1":r={hostname:"s3.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-iso-east-1":r={hostname:"s3.us-iso-east-1.c2s.ic.gov",partition:"aws-iso"};break;case"us-isob-east-1":r={hostname:"s3.us-isob-east-1.sc2s.sgov.gov",partition:"aws-iso-b"};break;case"us-west-1":r={hostname:"s3.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":r={hostname:"s3.us-west-2.amazonaws.com",partition:"aws"};break;default:Vc.has(e)&&(r={hostname:Tr.replace("{region}",e),partition:"aws"}),Xc.has(e)&&(r={hostname:Gc.replace("{region}",e),partition:"aws-cn"}),Wc.has(e)&&(r={hostname:jc.replace("{region}",e),partition:"aws-iso"}),Jc.has(e)&&(r={hostname:$c.replace("{region}",e),partition:"aws-iso-b"}),Zc.has(e)&&(r={hostname:Hc.replace("{region}",e),partition:"aws-us-gov"}),r===void 0&&(r={hostname:Tr.replace("{region}",e),partition:"aws"})}return Promise.resolve(s({signingService:"s3"},r))},Br={apiVersion:"2006-03-01",disableHostPrefix:!1,logger:{},regionInfoProvider:Qc,serviceId:"S3",signingEscapePath:!1,urlParser:hu,useArnRegion:!1},Yc=s(s({},Br),{runtime:"browser",base64Decoder:gu,base64Encoder:mu,bodyLengthChecker:pu,credentialDefaultProvider:function(e){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:yu({serviceId:Br.serviceId,clientVersion:vc.version}),eventStreamSerdeProvider:Rc,maxAttempts:Su,md5:Uc,region:bu("Region is missing"),requestHandler:new wu,sha256:Cu.Sha256,streamCollector:Eu,streamHasher:zc,utf8Decoder:wo,utf8Encoder:xu}),ed=function(e){return m.exports.__assign(m.exports.__assign({},e),{eventStreamMarshaller:e.eventStreamSerdeProvider(e)})},Ao=function(e){return typeof e=="string"&&e.indexOf("arn:")===0&&e.split(":").length>=6},td=function(e){var t=e.split(":");if(t.length<6||t[0]!=="arn")throw new Error("Malformed ARN");var r=m.exports.__read(t),n=r[1],i=r[2],a=r[3],o=r[4],u=r.slice(5);return{partition:n,service:i,region:a,accountId:o,resource:u.join(":")}},rd=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,nd=/(\d+\.){3}\d+/,id=/\.\./,Po=/\./,ad=/^(.+\.)?s3[.-]([a-z0-9-]+)\./,No=/^s3(-external-1)?\.amazonaws\.com$/,xt="amazonaws.com",sd=function(e){return typeof e.bucketName=="string"},at=function(e){return wr(e)?e.replace(/fips-|-fips/,""):e},od=function(e){return rd.test(e)&&!nd.test(e)&&!id.test(e)},_o=function(e){var t=e.match(ad);return[t[2],e.replace(new RegExp("^"+t[0]),"")]},ud=function(e){return No.test(e)?["us-east-1",xt]:_o(e)},cd=function(e){return No.test(e)?[e.replace("."+xt,""),xt]:_o(e)},dd=function(e){if(e.pathStyleEndpoint)throw new Error("Path-style S3 endpoint is not supported when bucket is an ARN");if(e.accelerateEndpoint)throw new Error("Accelerate endpoint is not supported when bucket is an ARN");if(!e.tlsCompatible)throw new Error("HTTPS is required when bucket is an ARN")},ld=function(e){if(e!=="s3"&&e!=="s3-outposts")throw new Error("Expect 's3' or 's3-outposts' in ARN service component")},fd=function(e){if(e!=="s3")throw new Error("Expect 's3' in Accesspoint ARN service component")},vd=function(e){if(e!=="s3-outposts")throw new Error("Expect 's3-posts' in Outpost ARN service component")},hd=function(e,t){if(e!==t.clientPartition)throw new Error('Partition in ARN is incompatible, got "'+e+'" but expected "'+t.clientPartition+'"')},gd=function(e,t){if(e==="")throw new Error("ARN region is empty");if(!t.useArnRegion&&!Mr(e,t.clientRegion)&&!Mr(e,t.clientSigningRegion))throw new Error("Region in ARN is incompatible, got "+e+" but expected "+t.clientRegion);if(t.useArnRegion&&wr(e))throw new Error("Endpoint does not support FIPS region")},wr=function(e){return e.startsWith("fips-")||e.endsWith("-fips")},Mr=function(e,t){return e===t||at(e)===t||e===at(t)},md=function(e){if(!/[0-9]{12}/.exec(e))throw new Error("Access point ARN accountID does not match regex '[0-9]{12}'")},Rr=function(e,t){if(t===void 0&&(t={tlsCompatible:!0}),e.length>=64||!/^[a-z0-9][a-z0-9.-]+[a-z0-9]$/.test(e)||/(\d+\.){3}\d+/.test(e)||/[.-]{2}/.test(e)||(t==null?void 0:t.tlsCompatible)&&Po.test(e))throw new Error("Invalid DNS label "+e)},pd=function(e){var t=e.includes(":")?":":"/",r=m.exports.__read(e.split(t)),n=r[0],i=r.slice(1);if(n==="accesspoint"){if(i.length!==1||i[0]==="")throw new Error("Access Point ARN should have one resource accesspoint"+t+"{accesspointname}");return{accesspointName:i[0]}}else if(n==="outpost"){if(!i[0]||i[1]!=="accesspoint"||!i[2]||i.length!==3)throw new Error("Outpost ARN should have resource outpost"+t+"{outpostId}"+t+"accesspoint"+t+"{accesspointName}");var a=m.exports.__read(i,3),o=a[0];a[1];var u=a[2];return{outpostId:o,accesspointName:u}}else throw new Error("ARN resource should begin with 'accesspoint"+t+"' or 'outpost"+t+"'")},yd=function(e){if(e)throw new Error("Dualstack endpoint is not supported with Outpost")},Sd=function(e){if(wr(e!=null?e:""))throw new Error("FIPS region is not supported with Outpost, got "+e)},Ir=function(e){var t=e.isCustomEndpoint;e.baseHostname;var r=e.dualstackEndpoint,n=e.accelerateEndpoint;if(t){if(r)throw new Error("Dualstack endpoint is not supported with custom endpoint");if(n)throw new Error("Accelerate endpoint is not supported with custom endpoint")}return sd(e)?wd(m.exports.__assign(m.exports.__assign({},e),{isCustomEndpoint:t})):bd(m.exports.__assign(m.exports.__assign({},e),{isCustomEndpoint:t}))},bd=function(e){var t=e.isCustomEndpoint,r=e.baseHostname,n=m.exports.__read(t?[e.clientRegion,r]:cd(r),2),i=n[0],a=n[1],o=e.pathStyleEndpoint,u=e.dualstackEndpoint,d=u===void 0?!1:u,c=e.accelerateEndpoint,l=c===void 0?!1:c,f=e.tlsCompatible,g=f===void 0?!0:f,v=e.useArnRegion,p=e.bucketName,y=e.clientPartition,S=y===void 0?"aws":y,b=e.clientSigningRegion,O=b===void 0?i:b;dd({pathStyleEndpoint:o,accelerateEndpoint:l,tlsCompatible:g});var N=p.service,E=p.partition,A=p.accountId,x=p.region,fe=p.resource;ld(N),hd(E,{clientPartition:S}),md(A),gd(x,{useArnRegion:v,clientRegion:i,clientSigningRegion:O});var _=pd(fe),j=_.accesspointName,Q=_.outpostId;Rr(j+"-"+A,{tlsCompatible:g});var B=v?x:i,te=v?x:O;if(Q){vd(N),Rr(Q,{tlsCompatible:g}),yd(d),Sd(B);var $=j+"-"+A+"."+Q;return{bucketEndpoint:!0,hostname:""+$+(t?"":".s3-outposts."+B)+"."+a,signingRegion:te,signingService:"s3-outposts"}}fd(N);var Y=j+"-"+A;return{bucketEndpoint:!0,hostname:""+Y+(t?"":".s3-accesspoint"+(d?".dualstack":"")+"."+B)+"."+a,signingRegion:te}},wd=function(e){var t=e.accelerateEndpoint,r=t===void 0?!1:t,n=e.clientRegion,i=e.baseHostname,a=e.bucketName,o=e.dualstackEndpoint,u=o===void 0?!1:o,d=e.pathStyleEndpoint,c=d===void 0?!1:d,l=e.tlsCompatible,f=l===void 0?!0:l,g=e.isCustomEndpoint,v=g===void 0?!1:g,p=m.exports.__read(v?[n,i]:ud(i),2),y=p[0],S=p[1];return c||!od(a)||f&&Po.test(a)?{bucketEndpoint:!1,hostname:u?"s3.dualstack."+y+"."+S:i}:(r?i="s3-accelerate"+(u?".dualstack":"")+"."+S:u&&(i="s3.dualstack."+y+"."+S),{bucketEndpoint:!0,hostname:a+"."+i})},Cd=function(e){return function(t,r){return function(n){return m.exports.__awaiter(void 0,void 0,void 0,function(){var i,a,o,u,b,d,c,l,f,g,v,p,E,A,y,S,b,O,N,E,A;return m.exports.__generator(this,function(x){switch(x.label){case 0:return i=n.input.Bucket,a=e.bucketEndpoint,o=n.request,V.isInstance(o)?e.bucketEndpoint?(o.hostname=i,[3,7]):[3,1]:[3,8];case 1:return Ao(i)?(u=td(i),d=at,[4,e.region()]):[3,5];case 2:return b=d.apply(void 0,[x.sent()]),[4,e.regionInfoProvider(b)];case 3:return c=x.sent()||{},l=c.partition,f=c.signingRegion,g=f===void 0?b:f,[4,e.useArnRegion()];case 4:return v=x.sent(),p=Ir({bucketName:u,baseHostname:o.hostname,accelerateEndpoint:e.useAccelerateEndpoint,dualstackEndpoint:e.useDualstackEndpoint,pathStyleEndpoint:e.forcePathStyle,tlsCompatible:o.protocol==="https:",useArnRegion:v,clientPartition:l,clientSigningRegion:g,clientRegion:b,isCustomEndpoint:e.isCustomEndpoint}),E=p.hostname,A=p.bucketEndpoint,y=p.signingRegion,S=p.signingService,y&&y!==g&&(r.signing_region=y),S&&S!=="s3"&&(r.signing_service=S),o.hostname=E,a=A,[3,7];case 5:return O=at,[4,e.region()];case 6:b=O.apply(void 0,[x.sent()]),N=Ir({bucketName:i,clientRegion:b,baseHostname:o.hostname,accelerateEndpoint:e.useAccelerateEndpoint,dualstackEndpoint:e.useDualstackEndpoint,pathStyleEndpoint:e.forcePathStyle,tlsCompatible:o.protocol==="https:",isCustomEndpoint:e.isCustomEndpoint}),E=N.hostname,A=N.bucketEndpoint,o.hostname=E,a=A,x.label=7;case 7:a&&(o.path=o.path.replace(/^(\/)?[^\/]+/,""),o.path===""&&(o.path="/")),x.label=8;case 8:return[2,t(m.exports.__assign(m.exports.__assign({},n),{request:o}))]}})})}}},Ed={tags:["BUCKET_ENDPOINT"],name:"bucketEndpointMiddleware",relation:"before",toMiddleware:"hostHeaderMiddleware",override:!0},ae=function(e){return{applyToStack:function(t){t.addRelativeTo(Cd(e),Ed)}}};function xd(e){var t=e.bucketEndpoint,r=t===void 0?!1:t,n=e.forcePathStyle,i=n===void 0?!1:n,a=e.useAccelerateEndpoint,o=a===void 0?!1:a,u=e.useDualstackEndpoint,d=u===void 0?!1:u,c=e.useArnRegion,l=c===void 0?!1:c;return m.exports.__assign(m.exports.__assign({},e),{bucketEndpoint:r,forcePathStyle:i,useAccelerateEndpoint:o,useDualstackEndpoint:d,useArnRegion:typeof l=="function"?l:function(){return Promise.resolve(l)}})}function kd(e){var t=this;return function(r){return function(n){return m.exports.__awaiter(t,void 0,void 0,function(){var i;return m.exports.__generator(this,function(a){return i=n.request,V.isInstance(i)&&i.body&&e.runtime==="node"&&(i.headers=m.exports.__assign(m.exports.__assign({},i.headers),{Expect:"100-continue"})),[2,r(m.exports.__assign(m.exports.__assign({},n),{request:i}))]})})}}}var Ld={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},Ad=function(e){return{applyToStack:function(t){t.add(kd(e),Ld)}}};function Pd(){var e=this;return function(t){return function(r){return m.exports.__awaiter(e,void 0,void 0,function(){var n,i;return m.exports.__generator(this,function(a){if(n=r.input.Bucket,typeof n=="string"&&!Ao(n)&&n.indexOf("/")>=0)throw i=new Error("Bucket name shouldn't contain '/', received '"+n+"'"),i.name="InvalidBucketName",i;return[2,t(m.exports.__assign({},r))]})})}}}var Nd={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},_d=function(e){return{applyToStack:function(t){t.add(Pd(),Nd)}}},Od=function(e){return function(t){return function(r){return m.exports.__awaiter(void 0,void 0,void 0,function(){var n,i;return m.exports.__generator(this,function(a){switch(a.label){case 0:return n=r.request,!V.isInstance(n)||e.isCustomEndpoint?[2,t(m.exports.__assign({},r))]:n.hostname!=="s3.amazonaws.com"?[3,1]:(n.hostname="s3.us-east-1.amazonaws.com",[3,3]);case 1:return i="aws-global",[4,e.region()];case 2:i===a.sent()&&(n.hostname="s3.amazonaws.com"),a.label=3;case 3:return[2,t(m.exports.__assign({},r))]}})})}}},Td={step:"build",tags:["USE_REGIONAL_ENDPOINT","S3"],name:"useRegionalEndpointMiddleware",override:!0},Bd=function(e){return{applyToStack:function(t){t.add(Od(e),Td)}}},Md=function(e){return function(t){return function(r){return m.exports.__awaiter(void 0,void 0,void 0,function(){var n,i,a,o,u,d,c;return m.exports.__generator(this,function(l){switch(l.label){case 0:return[4,t(r)];case 1:return n=l.sent(),i=n.response,Et.isInstance(i)?(a=i.statusCode,o=i.body,a<200&&a>=300?[2,n]:[4,Oo(o,e)]):[2,n];case 2:return u=l.sent(),[4,Rd(u,e)];case 3:if(d=l.sent(),u.length===0)throw c=new Error("S3 aborted request"),c.name="InternalError",c;return d&&d.match("<Error>")&&(i.statusCode=400),i.body=u,[2,n]}})})}}},Oo=function(e,t){return e===void 0&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},Rd=function(e,t){return Oo(e,t).then(function(r){return t.utf8Encoder(r)})},Id={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},To=function(e){return{applyToStack:function(t){t.addRelativeTo(Md(e),Id)}}},zd=function(e){ee(t,e);function t(r){var n=this,i=s(s({},Yc),r),a=ku(i),o=Lu(a),u=Au(o),d=Pu(u),c=zu(d),l=xd(c),f=Nu(l),g=ed(f);return n=e.call(this,g)||this,n.config=g,n.middlewareStack.use(_u(n.config)),n.middlewareStack.use(Ou(n.config)),n.middlewareStack.use(Tu(n.config)),n.middlewareStack.use(Bu(n.config)),n.middlewareStack.use(Mu(n.config)),n.middlewareStack.use(_d(n.config)),n.middlewareStack.use(Bd(n.config)),n.middlewareStack.use(Ad(n.config)),n.middlewareStack.use(Ru(n.config)),n}return t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(Iu),zr;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(zr||(zr={}));var kt;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(kt||(kt={}));var Lt;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Lt||(Lt={}));var Dr;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Dr||(Dr={}));var Kr;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Kr||(Kr={}));var Ur;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Ur||(Ur={}));var qr;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(qr||(qr={}));var Fr;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Fr||(Fr={}));var Gr;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Gr||(Gr={}));var jr;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(jr||(jr={}));var At;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.SSEKMSKeyId&&{SSEKMSKeyId:L})}})(At||(At={}));var $r;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})($r||($r={}));var Hr;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Hr||(Hr={}));var Pt;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Pt||(Pt={}));var Vr;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Vr||(Vr={}));var Nt;(function(e){e.filterSensitiveLog=function(t){return s(s(s({},t),t.SSEKMSKeyId&&{SSEKMSKeyId:L}),t.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:L})}})(Nt||(Nt={}));var _t;(function(e){e.filterSensitiveLog=function(t){return s(s(s(s(s({},t),t.SSECustomerKey&&{SSECustomerKey:L}),t.SSEKMSKeyId&&{SSEKMSKeyId:L}),t.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:L}),t.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:L})}})(_t||(_t={}));var Xr;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Xr||(Xr={}));var Wr;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Wr||(Wr={}));var Jr;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Jr||(Jr={}));var Zr;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Zr||(Zr={}));var Qr;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Qr||(Qr={}));var Yr;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Yr||(Yr={}));var Ot;(function(e){e.filterSensitiveLog=function(t){return s(s(s({},t),t.SSEKMSKeyId&&{SSEKMSKeyId:L}),t.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:L})}})(Ot||(Ot={}));var Tt;(function(e){e.filterSensitiveLog=function(t){return s(s(s(s({},t),t.SSECustomerKey&&{SSECustomerKey:L}),t.SSEKMSKeyId&&{SSEKMSKeyId:L}),t.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:L})}})(Tt||(Tt={}));var en;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(en||(en={}));var tn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(tn||(tn={}));var rn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(rn||(rn={}));var nn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(nn||(nn={}));var an;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(an||(an={}));var sn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(sn||(sn={}));var on;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(on||(on={}));var un;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(un||(un={}));var cn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(cn||(cn={}));var dn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(dn||(dn={}));var ln;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(ln||(ln={}));var fn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(fn||(fn={}));var vn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(vn||(vn={}));var Bt;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Bt||(Bt={}));var Mt;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Mt||(Mt={}));var hn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(hn||(hn={}));var gn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(gn||(gn={}));var mn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(mn||(mn={}));var pn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(pn||(pn={}));var yn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(yn||(yn={}));var Sn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Sn||(Sn={}));var bn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(bn||(bn={}));var wn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(wn||(wn={}));var Cn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Cn||(Cn={}));var En;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(En||(En={}));var xn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(xn||(xn={}));var kn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(kn||(kn={}));var Ln;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Ln||(Ln={}));var Be;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Be||(Be={}));var Rt;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Rt||(Rt={}));var It;(function(e){e.visit=function(t,r){return t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])},e.filterSensitiveLog=function(t){var r;if(t.Prefix!==void 0)return{Prefix:t.Prefix};if(t.Tag!==void 0)return{Tag:Be.filterSensitiveLog(t.Tag)};if(t.And!==void 0)return{And:Rt.filterSensitiveLog(t.And)};if(t.$unknown!==void 0)return r={},r[t.$unknown[0]]="UNKNOWN",r}})(It||(It={}));var An;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(An||(An={}));var Pn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Pn||(Pn={}));var Nn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Nn||(Nn={}));var _n;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(_n||(_n={}));var $e;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.Filter&&{Filter:It.filterSensitiveLog(t.Filter)})}})($e||($e={}));var On;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.AnalyticsConfiguration&&{AnalyticsConfiguration:$e.filterSensitiveLog(t.AnalyticsConfiguration)})}})(On||(On={}));var Tn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Tn||(Tn={}));var Bn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Bn||(Bn={}));var Mn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Mn||(Mn={}));var Rn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Rn||(Rn={}));var zt;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.KMSMasterKeyID&&{KMSMasterKeyID:L})}})(zt||(zt={}));var Dt;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.ApplyServerSideEncryptionByDefault&&{ApplyServerSideEncryptionByDefault:zt.filterSensitiveLog(t.ApplyServerSideEncryptionByDefault)})}})(Dt||(Dt={}));var st;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.Rules&&{Rules:t.Rules.map(function(r){return Dt.filterSensitiveLog(r)})})}})(st||(st={}));var In;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:st.filterSensitiveLog(t.ServerSideEncryptionConfiguration)})}})(In||(In={}));var zn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(zn||(zn={}));var Dn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Dn||(Dn={}));var Kn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Kn||(Kn={}));var Un;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Un||(Un={}));var qn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(qn||(qn={}));var Fn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Fn||(Fn={}));var Gn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Gn||(Gn={}));var Kt;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.KeyId&&{KeyId:L})}})(Kt||(Kt={}));var jn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(jn||(jn={}));var Ut;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.SSEKMS&&{SSEKMS:Kt.filterSensitiveLog(t.SSEKMS)})}})(Ut||(Ut={}));var qt;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.Encryption&&{Encryption:Ut.filterSensitiveLog(t.Encryption)})}})(qt||(qt={}));var Ft;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.S3BucketDestination&&{S3BucketDestination:qt.filterSensitiveLog(t.S3BucketDestination)})}})(Ft||(Ft={}));var $n;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})($n||($n={}));var Hn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Hn||(Hn={}));var He;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.Destination&&{Destination:Ft.filterSensitiveLog(t.Destination)})}})(He||(He={}));var Vn;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.InventoryConfiguration&&{InventoryConfiguration:He.filterSensitiveLog(t.InventoryConfiguration)})}})(Vn||(Vn={}));var Xn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Xn||(Xn={}));var Wn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Wn||(Wn={}));var Gt;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Gt||(Gt={}));var jt;(function(e){e.visit=function(t,r){return t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])},e.filterSensitiveLog=function(t){var r;if(t.Prefix!==void 0)return{Prefix:t.Prefix};if(t.Tag!==void 0)return{Tag:Be.filterSensitiveLog(t.Tag)};if(t.And!==void 0)return{And:Gt.filterSensitiveLog(t.And)};if(t.$unknown!==void 0)return r={},r[t.$unknown[0]]="UNKNOWN",r}})(jt||(jt={}));var Jn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Jn||(Jn={}));var Zn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Zn||(Zn={}));var Qn;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Qn||(Qn={}));var ot;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.Filter&&{Filter:jt.filterSensitiveLog(t.Filter)})}})(ot||(ot={}));var Yn;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.Rules&&{Rules:t.Rules.map(function(r){return ot.filterSensitiveLog(r)})})}})(Yn||(Yn={}));var ei;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(ei||(ei={}));var ti;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(ti||(ti={}));var ri;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(ri||(ri={}));var ni;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(ni||(ni={}));var ii;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(ii||(ii={}));var ai;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(ai||(ai={}));var si;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(si||(si={}));var $t;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})($t||($t={}));var Ht;(function(e){e.visit=function(t,r){return t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])},e.filterSensitiveLog=function(t){var r;if(t.Prefix!==void 0)return{Prefix:t.Prefix};if(t.Tag!==void 0)return{Tag:Be.filterSensitiveLog(t.Tag)};if(t.And!==void 0)return{And:$t.filterSensitiveLog(t.And)};if(t.$unknown!==void 0)return r={},r[t.$unknown[0]]="UNKNOWN",r}})(Ht||(Ht={}));var Ve;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.Filter&&{Filter:Ht.filterSensitiveLog(t.Filter)})}})(Ve||(Ve={}));var oi;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.MetricsConfiguration&&{MetricsConfiguration:Ve.filterSensitiveLog(t.MetricsConfiguration)})}})(oi||(oi={}));var ui;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(ui||(ui={}));var ci;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(ci||(ci={}));var di;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(di||(di={}));var li;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(li||(li={}));var fi;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(fi||(fi={}));var vi;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(vi||(vi={}));var hi;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(hi||(hi={}));var gi;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(gi||(gi={}));var mi;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(mi||(mi={}));var pi;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(pi||(pi={}));var yi;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(yi||(yi={}));var Si;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Si||(Si={}));var bi;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(bi||(bi={}));var wi;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(wi||(wi={}));var Ci;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Ci||(Ci={}));var Ei;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Ei||(Ei={}));var xi;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(xi||(xi={}));var ki;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(ki||(ki={}));var Li;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Li||(Li={}));var Ai;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Ai||(Ai={}));var Pi;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Pi||(Pi={}));var Ni;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Ni||(Ni={}));var _i;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(_i||(_i={}));var Oi;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Oi||(Oi={}));var Ti;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Ti||(Ti={}));var Vt;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Vt||(Vt={}));var Xt;(function(e){e.visit=function(t,r){return t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])},e.filterSensitiveLog=function(t){var r;if(t.Prefix!==void 0)return{Prefix:t.Prefix};if(t.Tag!==void 0)return{Tag:Be.filterSensitiveLog(t.Tag)};if(t.And!==void 0)return{And:Vt.filterSensitiveLog(t.And)};if(t.$unknown!==void 0)return r={},r[t.$unknown[0]]="UNKNOWN",r}})(Xt||(Xt={}));var Bi;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Bi||(Bi={}));var Mi;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Mi||(Mi={}));var Ri;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Ri||(Ri={}));var Wt;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.Filter&&{Filter:Xt.filterSensitiveLog(t.Filter)})}})(Wt||(Wt={}));var ut;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.Rules&&{Rules:t.Rules.map(function(r){return Wt.filterSensitiveLog(r)})})}})(ut||(ut={}));var Ii;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.ReplicationConfiguration&&{ReplicationConfiguration:ut.filterSensitiveLog(t.ReplicationConfiguration)})}})(Ii||(Ii={}));var zi;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(zi||(zi={}));var Di;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Di||(Di={}));var Ki;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Ki||(Ki={}));var Ui;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Ui||(Ui={}));var qi;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(qi||(qi={}));var Fi;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Fi||(Fi={}));var Gi;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Gi||(Gi={}));var ji;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(ji||(ji={}));var $i;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})($i||($i={}));var Hi;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Hi||(Hi={}));var Vi;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Vi||(Vi={}));var Xi;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Xi||(Xi={}));var Wi;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Wi||(Wi={}));var Ji;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Ji||(Ji={}));var Zi;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Zi||(Zi={}));var Jt;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.SSEKMSKeyId&&{SSEKMSKeyId:L})}})(Jt||(Jt={}));var Zt;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.SSECustomerKey&&{SSECustomerKey:L})}})(Zt||(Zt={}));var Qi;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Qi||(Qi={}));var Yi;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Yi||(Yi={}));var ea;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(ea||(ea={}));var ta;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(ta||(ta={}));var ra;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(ra||(ra={}));var na;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(na||(na={}));var ia;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(ia||(ia={}));var aa;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(aa||(aa={}));var sa;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(sa||(sa={}));var oa;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(oa||(oa={}));var ua;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(ua||(ua={}));var ca;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(ca||(ca={}));var da;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(da||(da={}));var la;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(la||(la={}));var fa;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(fa||(fa={}));var va;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(va||(va={}));var ha;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(ha||(ha={}));var ga;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(ga||(ga={}));var ma;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(ma||(ma={}));var pa;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(pa||(pa={}));var ya;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(ya||(ya={}));var Sa;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Sa||(Sa={}));var ba;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(ba||(ba={}));var wa;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(wa||(wa={}));var Ca;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.SSEKMSKeyId&&{SSEKMSKeyId:L})}})(Ca||(Ca={}));var Ea;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.SSECustomerKey&&{SSECustomerKey:L})}})(Ea||(Ea={}));var xa;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.AnalyticsConfigurationList&&{AnalyticsConfigurationList:t.AnalyticsConfigurationList.map(function(r){return $e.filterSensitiveLog(r)})})}})(xa||(xa={}));var ka;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(ka||(ka={}));var La;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(La||(La={}));var Aa;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Aa||(Aa={}));var Pa;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.InventoryConfigurationList&&{InventoryConfigurationList:t.InventoryConfigurationList.map(function(r){return He.filterSensitiveLog(r)})})}})(Pa||(Pa={}));var Na;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Na||(Na={}));var _a;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.MetricsConfigurationList&&{MetricsConfigurationList:t.MetricsConfigurationList.map(function(r){return Ve.filterSensitiveLog(r)})})}})(_a||(_a={}));var Oa;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Oa||(Oa={}));var Ta;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Ta||(Ta={}));var Ba;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Ba||(Ba={}));var Ma;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Ma||(Ma={}));var Ra;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Ra||(Ra={}));var Ia;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Ia||(Ia={}));var za;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(za||(za={}));var Da;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Da||(Da={}));var Ka;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Ka||(Ka={}));var Qt;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Qt||(Qt={}));var Yt;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Yt||(Yt={}));var er;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(er||(er={}));var tr;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(tr||(tr={}));var Ua;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Ua||(Ua={}));var qa;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(qa||(qa={}));var Fa;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Fa||(Fa={}));var Ga;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Ga||(Ga={}));var ja;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(ja||(ja={}));var rr;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(rr||(rr={}));var nr;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(nr||(nr={}));var $a;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})($a||($a={}));var Ha;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Ha||(Ha={}));var Va;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.AnalyticsConfiguration&&{AnalyticsConfiguration:$e.filterSensitiveLog(t.AnalyticsConfiguration)})}})(Va||(Va={}));var Xa;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Xa||(Xa={}));var Wa;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Wa||(Wa={}));var Ja;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:st.filterSensitiveLog(t.ServerSideEncryptionConfiguration)})}})(Ja||(Ja={}));var Za;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Za||(Za={}));var Qa;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.InventoryConfiguration&&{InventoryConfiguration:He.filterSensitiveLog(t.InventoryConfiguration)})}})(Qa||(Qa={}));var ir;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.Rules&&{Rules:t.Rules.map(function(r){return ot.filterSensitiveLog(r)})})}})(ir||(ir={}));var Ya;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.LifecycleConfiguration&&{LifecycleConfiguration:ir.filterSensitiveLog(t.LifecycleConfiguration)})}})(Ya||(Ya={}));var es;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(es||(es={}));var ts;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(ts||(ts={}));var rs;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.MetricsConfiguration&&{MetricsConfiguration:Ve.filterSensitiveLog(t.MetricsConfiguration)})}})(rs||(rs={}));var ns;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(ns||(ns={}));var is;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(is||(is={}));var as;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(as||(as={}));var ss;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.ReplicationConfiguration&&{ReplicationConfiguration:ut.filterSensitiveLog(t.ReplicationConfiguration)})}})(ss||(ss={}));var os;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(os||(os={}));var us;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(us||(us={}));var cs;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(cs||(cs={}));var ds;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(ds||(ds={}));var ls;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(ls||(ls={}));var fs;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(fs||(fs={}));var vs;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(vs||(vs={}));var hs;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(hs||(hs={}));var ar;(function(e){e.filterSensitiveLog=function(t){return s(s(s({},t),t.SSEKMSKeyId&&{SSEKMSKeyId:L}),t.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:L})}})(ar||(ar={}));var sr;(function(e){e.filterSensitiveLog=function(t){return s(s(s(s({},t),t.SSECustomerKey&&{SSECustomerKey:L}),t.SSEKMSKeyId&&{SSEKMSKeyId:L}),t.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:L})}})(sr||(sr={}));var gs;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(gs||(gs={}));var ms;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(ms||(ms={}));var ps;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(ps||(ps={}));var ys;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(ys||(ys={}));var Ss;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Ss||(Ss={}));var bs;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(bs||(bs={}));var ws;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(ws||(ws={}));var Cs;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Cs||(Cs={}));var Es;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Es||(Es={}));var xs;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(xs||(xs={}));var ks;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(ks||(ks={}));var Ls;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Ls||(Ls={}));var As;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(As||(As={}));var Ps;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Ps||(Ps={}));var or;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.KMSKeyId&&{KMSKeyId:L})}})(or||(or={}));function Dd(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}var nt=function(){function e(t,r){r===void 0&&(r=[]),this.name=t,this.children=r,this.attributes={}}return e.prototype.withName=function(t){return this.name=t,this},e.prototype.addAttribute=function(t,r){return this.attributes[t]=r,this},e.prototype.addChildNode=function(t){return this.children.push(t),this},e.prototype.removeAttribute=function(t){return delete this.attributes[t],this},e.prototype.toString=function(){var t,r,n=Boolean(this.children.length),i="<"+this.name,a=this.attributes;try{for(var o=m.exports.__values(Object.keys(a)),u=o.next();!u.done;u=o.next()){var d=u.value,c=a[d];typeof c!="undefined"&&c!==null&&(i+=" "+d+'="'+Dd(""+c)+'"')}}catch(l){t={error:l}}finally{try{u&&!u.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i+=n?">"+this.children.map(function(l){return l.toString()}).join("")+"</"+this.name+">":"/>"},e}();function Kd(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Ns=function(){function e(t){this.value=t}return e.prototype.toString=function(){return Kd(""+this.value)},e}(),Bo={},Mo={},le={};(function(e){const t=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",r=t+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",n="["+t+"]["+r+"]*",i=new RegExp("^"+n+"$"),a=function(u,d){const c=[];let l=d.exec(u);for(;l;){const f=[];f.startIndex=d.lastIndex-l[0].length;const g=l.length;for(let v=0;v<g;v++)f.push(l[v]);c.push(f),l=d.exec(u)}return c},o=function(u){const d=i.exec(u);return!(d===null||typeof d=="undefined")};e.isExist=function(u){return typeof u!="undefined"},e.isEmptyObject=function(u){return Object.keys(u).length===0},e.merge=function(u,d,c){if(d){const l=Object.keys(d),f=l.length;for(let g=0;g<f;g++)c==="strict"?u[l[g]]=[d[l[g]]]:u[l[g]]=d[l[g]]}},e.getValue=function(u){return e.isExist(u)?u:""},e.buildOptions=function(u,d,c){let l={};if(!u)return d;for(let f=0;f<c.length;f++)u[c[f]]!==void 0?l[c[f]]=u[c[f]]:l[c[f]]=d[c[f]];return l},e.isTagNameInArrayMode=function(u,d,c){return d===!1?!1:d instanceof RegExp?d.test(u):typeof d=="function"?!!d(u,c):d==="strict"},e.isName=o,e.getAllMatches=a,e.nameRegexp=n})(le);const xe=le,ur=function(e,t,r){const n={};if(!t.alwaysCreateTextNode&&(!e.child||xe.isEmptyObject(e.child))&&(!e.attrsMap||xe.isEmptyObject(e.attrsMap)))return xe.isExist(e.val)?e.val:"";if(xe.isExist(e.val)&&!(typeof e.val=="string"&&(e.val===""||e.val===t.cdataPositionChar))){const a=xe.isTagNameInArrayMode(e.tagname,t.arrayMode,r);n[t.textNodeName]=a?[e.val]:e.val}xe.merge(n,e.attrsMap,t.arrayMode);const i=Object.keys(e.child);for(let a=0;a<i.length;a++){const o=i[a];if(e.child[o]&&e.child[o].length>1){n[o]=[];for(let u in e.child[o])e.child[o].hasOwnProperty(u)&&n[o].push(ur(e.child[o][u],t,o))}else{const u=ur(e.child[o][0],t,o),d=t.arrayMode===!0&&typeof u=="object"||xe.isTagNameInArrayMode(o,t.arrayMode,r);n[o]=d?[u]:u}}return n};Mo.convertToJson=ur;var Pe={},Ud=function(e,t,r){this.tagname=e,this.parent=t,this.child={},this.attrsMap={},this.val=r,this.addChild=function(n){Array.isArray(this.child[n.tagname])?this.child[n.tagname].push(n):this.child[n.tagname]=[n]}};const qd=/^[-+]?0x[a-fA-F0-9]+$/,Fd=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const Gd={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function jd(e,t={}){if(t=Object.assign({},Gd,t),!e||typeof e!="string")return e;let r=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(r))return e;if(t.hex&&qd.test(r))return Number.parseInt(r,16);{const n=Fd.exec(r);if(n){const i=n[1],a=n[2];let o=$d(n[3]);const u=n[4]||n[6];if(!t.leadingZeros&&a.length>0&&i&&r[2]!==".")return e;if(!t.leadingZeros&&a.length>0&&!i&&r[1]!==".")return e;{const d=Number(r),c=""+d;return c.search(/[eE]/)!==-1||u?t.eNotation?d:e:r.indexOf(".")!==-1?c==="0"&&o===""||c===o||i&&c==="-"+o?d:e:a?o===c||i+o===c?d:e:r===c||r===i+c?d:e}}else return e}}function $d(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}var Hd=jd;const Le=le,Vd=le.buildOptions,Ye=Ud,Xd=Hd;"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,Le.nameRegexp);!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const Ro={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",numParseOptions:{hex:!0,leadingZeros:!0},tagValueProcessor:function(e,t){return e},attrValueProcessor:function(e,t){return e},stopNodes:[],alwaysCreateTextNode:!1};Pe.defaultOptions=Ro;const Io=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","numParseOptions","stopNodes","alwaysCreateTextNode"];Pe.props=Io;function et(e,t,r){return t&&(r.trimValues&&(t=t.trim()),t=r.tagValueProcessor(t,e),t=zo(t,r.parseNodeValue,r.numParseOptions)),t}function Wd(e,t){if(t.ignoreNameSpace){const r=e.split(":"),n=e.charAt(0)==="/"?"/":"";if(r[0]==="xmlns")return"";r.length===2&&(e=n+r[1])}return e}function zo(e,t,r){if(t&&typeof e=="string"){const n=e.trim();return n==="true"?!0:n==="false"?!1:Xd(e,r)}else return Le.isExist(e)?e:""}const Jd=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])(.*?)\\3)?`,"g");function _s(e,t){if(!t.ignoreAttributes&&typeof e=="string"){e=e.replace(/\r?\n/g," ");const r=Le.getAllMatches(e,Jd),n=r.length,i={};for(let a=0;a<n;a++){const o=Wd(r[a][1],t);o.length&&(r[a][4]!==void 0?(t.trimValues&&(r[a][4]=r[a][4].trim()),r[a][4]=t.attrValueProcessor(r[a][4],o),i[t.attributeNamePrefix+o]=zo(r[a][4],t.parseAttributeValue,t.numParseOptions)):t.allowBooleanAttributes&&(i[t.attributeNamePrefix+o]=!0))}if(!Object.keys(i).length)return;if(t.attrNodeName){const a={};return a[t.attrNodeName]=i,a}return i}}const Zd=function(e,t){e=e.replace(/\r\n?/g,`
`),t=Vd(t,Ro,Io);const r=new Ye("!xml");let n=r,i="";for(let a=0;a<e.length;a++)if(e[a]==="<")if(e[a+1]==="/"){const u=Ie(e,">",a,"Closing Tag is not closed.");let d=e.substring(a+2,u).trim();if(t.ignoreNameSpace){const c=d.indexOf(":");c!==-1&&(d=d.substr(c+1))}n&&(n.val?n.val=Le.getValue(n.val)+""+et(d,i,t):n.val=et(d,i,t)),t.stopNodes.length&&t.stopNodes.includes(n.tagname)&&(n.child=[],n.attrsMap==null&&(n.attrsMap={}),n.val=e.substr(n.startIndex+1,a-n.startIndex-1)),n=n.parent,i="",a=u}else if(e[a+1]==="?")a=Ie(e,"?>",a,"Pi Tag is not closed.");else if(e.substr(a+1,3)==="!--")a=Ie(e,"-->",a,"Comment is not closed.");else if(e.substr(a+1,2)==="!D"){const u=Ie(e,">",a,"DOCTYPE is not closed.");e.substring(a,u).indexOf("[")>=0?a=e.indexOf("]>",a)+1:a=u}else if(e.substr(a+1,2)==="!["){const u=Ie(e,"]]>",a,"CDATA is not closed.")-2,d=e.substring(a+9,u);if(i&&(n.val=Le.getValue(n.val)+""+et(n.tagname,i,t),i=""),t.cdataTagName){const c=new Ye(t.cdataTagName,n,d);n.addChild(c),n.val=Le.getValue(n.val)+t.cdataPositionChar,d&&(c.val=d)}else n.val=(n.val||"")+(d||"");a=u+2}else{const u=Qd(e,a+1);let d=u.data;const c=u.index,l=d.indexOf(" ");let f=d,g=!0;if(l!==-1&&(f=d.substr(0,l).replace(/\s\s*$/,""),d=d.substr(l+1)),t.ignoreNameSpace){const v=f.indexOf(":");v!==-1&&(f=f.substr(v+1),g=f!==u.data.substr(v+1))}if(n&&i&&n.tagname!=="!xml"&&(n.val=Le.getValue(n.val)+""+et(n.tagname,i,t)),d.length>0&&d.lastIndexOf("/")===d.length-1){f[f.length-1]==="/"?(f=f.substr(0,f.length-1),d=f):d=d.substr(0,d.length-1);const v=new Ye(f,n,"");f!==d&&(v.attrsMap=_s(d,t)),n.addChild(v)}else{const v=new Ye(f,n);t.stopNodes.length&&t.stopNodes.includes(v.tagname)&&(v.startIndex=c),f!==d&&g&&(v.attrsMap=_s(d,t)),n.addChild(v),n=v}i="",a=c}else i+=e[a];return r};function Qd(e,t){let r,n="";for(let i=t;i<e.length;i++){let a=e[i];if(r)a===r&&(r="");else if(a==='"'||a==="'")r=a;else{if(a===">")return{data:n,index:i};a==="	"&&(a=" ")}n+=a}}function Ie(e,t,r,n){const i=e.indexOf(t,r);if(i===-1)throw new Error(n);return i+t.length-1}Pe.getTraversalObj=Zd;var Do={};const vt=le,Yd={allowBooleanAttributes:!1},el=["allowBooleanAttributes"];Do.validate=function(e,t){t=vt.buildOptions(t,Yd,el);const r=[];let n=!1,i=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let a=0;a<e.length;a++)if(e[a]==="<"&&e[a+1]==="?"){if(a+=2,a=Os(e,a),a.err)return a}else if(e[a]==="<"){let o=a;if(a++,e[a]==="!"){a=Ts(e,a);continue}else{let u=!1;e[a]==="/"&&(u=!0,a++);let d="";for(;a<e.length&&e[a]!==">"&&e[a]!==" "&&e[a]!=="	"&&e[a]!==`
`&&e[a]!=="\r";a++)d+=e[a];if(d=d.trim(),d[d.length-1]==="/"&&(d=d.substring(0,d.length-1),a--),!ul(d)){let f;return d.trim().length===0?f="Invalid space after '<'.":f="Tag '"+d+"' is an invalid name.",D("InvalidTag",f,Z(e,a))}const c=nl(e,a);if(c===!1)return D("InvalidAttr","Attributes for '"+d+"' have open quote.",Z(e,a));let l=c.value;if(a=c.index,l[l.length-1]==="/"){const f=a-l.length;l=l.substring(0,l.length-1);const g=Bs(l,t);if(g===!0)n=!0;else return D(g.err.code,g.err.msg,Z(e,f+g.err.line))}else if(u)if(c.tagClosed){if(l.trim().length>0)return D("InvalidTag","Closing tag '"+d+"' can't have attributes or invalid starting.",Z(e,o));{const f=r.pop();if(d!==f.tagName){let g=Z(e,f.tagStartPos);return D("InvalidTag","Expected closing tag '"+f.tagName+"' (opened in line "+g.line+", col "+g.col+") instead of closing tag '"+d+"'.",Z(e,o))}r.length==0&&(i=!0)}}else return D("InvalidTag","Closing tag '"+d+"' doesn't have proper closing.",Z(e,a));else{const f=Bs(l,t);if(f!==!0)return D(f.err.code,f.err.msg,Z(e,a-l.length+f.err.line));if(i===!0)return D("InvalidXml","Multiple possible root nodes found.",Z(e,a));r.push({tagName:d,tagStartPos:o}),n=!0}for(a++;a<e.length;a++)if(e[a]==="<")if(e[a+1]==="!"){a++,a=Ts(e,a);continue}else if(e[a+1]==="?"){if(a=Os(e,++a),a.err)return a}else break;else if(e[a]==="&"){const f=sl(e,a);if(f==-1)return D("InvalidChar","char '&' is not expected.",Z(e,a));a=f}e[a]==="<"&&a--}}else{if(e[a]===" "||e[a]==="	"||e[a]===`
`||e[a]==="\r")continue;return D("InvalidChar","char '"+e[a]+"' is not expected.",Z(e,a))}if(n){if(r.length==1)return D("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",Z(e,r[0].tagStartPos));if(r.length>0)return D("InvalidXml","Invalid '"+JSON.stringify(r.map(a=>a.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return D("InvalidXml","Start tag expected.",1);return!0};function Os(e,t){const r=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){const n=e.substr(r,t-r);if(t>5&&n==="xml")return D("InvalidXml","XML declaration allowed only at the start of the document.",Z(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function Ts(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let r=1;for(t+=8;t<e.length;t++)if(e[t]==="<")r++;else if(e[t]===">"&&(r--,r===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}const tl='"',rl="'";function nl(e,t){let r="",n="",i=!1;for(;t<e.length;t++){if(e[t]===tl||e[t]===rl)n===""?n=e[t]:n!==e[t]||(n="");else if(e[t]===">"&&n===""){i=!0;break}r+=e[t]}return n!==""?!1:{value:r,index:t,tagClosed:i}}const il=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Bs(e,t){const r=vt.getAllMatches(e,il),n={};for(let i=0;i<r.length;i++){if(r[i][1].length===0)return D("InvalidAttr","Attribute '"+r[i][2]+"' has no space in starting.",tt(r[i]));if(r[i][3]===void 0&&!t.allowBooleanAttributes)return D("InvalidAttr","boolean attribute '"+r[i][2]+"' is not allowed.",tt(r[i]));const a=r[i][2];if(!ol(a))return D("InvalidAttr","Attribute '"+a+"' is an invalid name.",tt(r[i]));if(!n.hasOwnProperty(a))n[a]=1;else return D("InvalidAttr","Attribute '"+a+"' is repeated.",tt(r[i]))}return!0}function al(e,t){let r=/\d/;for(e[t]==="x"&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(r))break}return-1}function sl(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,al(e,t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(e[t]===";")break;return-1}return t}function D(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function ol(e){return vt.isName(e)}function ul(e){return vt.isName(e)}function Z(e,t){const r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function tt(e){return e.startIndex+e[1].length}var Ko={};const ue=function(e){return String.fromCharCode(e)},R={nilChar:ue(176),missingChar:ue(201),nilPremitive:ue(175),missingPremitive:ue(200),emptyChar:ue(178),emptyValue:ue(177),boundryChar:ue(179),objStart:ue(198),arrStart:ue(204),arrayEnd:ue(185)},cl=[R.nilChar,R.nilPremitive,R.missingChar,R.missingPremitive,R.boundryChar,R.emptyChar,R.emptyValue,R.arrayEnd,R.objStart,R.arrStart],Ke=function(e,t,r){if(typeof t=="string")return e&&e[0]&&e[0].val!==void 0?yt(e[0].val):yt(e);{const n=dl(e);if(n===!0){let i="";if(Array.isArray(t)){i+=R.arrStart;const a=t[0],o=e.length;if(typeof a=="string")for(let u=0;u<o;u++){const d=yt(e[u].val);i=St(i,d)}else for(let u=0;u<o;u++){const d=Ke(e[u],a,r);i=St(i,d)}i+=R.arrayEnd}else{i+=R.objStart;const a=Object.keys(t);Array.isArray(e)&&(e=e[0]);for(let o in a){const u=a[o];let d;!r.ignoreAttributes&&e.attrsMap&&e.attrsMap[u]?d=Ke(e.attrsMap[u],t[u],r):u===r.textNodeName?d=Ke(e.val,t[u],r):d=Ke(e.child[u],t[u],r),i=St(i,d)}}return i}else return n}},yt=function(e){switch(e){case void 0:return R.missingPremitive;case null:return R.nilPremitive;case"":return R.emptyValue;default:return e}},St=function(e,t){return!Ms(t[0])&&!Ms(e[e.length-1])&&(e+=R.boundryChar),e+t},Ms=function(e){return cl.indexOf(e)!==-1};function dl(e){return e===void 0?R.missingChar:e===null?R.nilChar:e.child&&Object.keys(e.child).length===0&&(!e.attrsMap||Object.keys(e.attrsMap).length===0)?R.emptyChar:!0}const Rs=Pe,ll=le.buildOptions,fl=function(e,t,r){return r=ll(r,Rs.defaultOptions,Rs.props),Ke(e,t,r)};Ko.convert2nimn=fl;var Uo={};const rt=le,vl=le.buildOptions,Is=Pe,hl=function(e,t){return t=vl(t,Is.defaultOptions,Is.props),t.indentBy=t.indentBy||"",cr(e,t)},cr=function(e,t,r){let n="{";const i=Object.keys(e.child);for(let a=0;a<i.length;a++){const o=i[a];if(e.child[o]&&e.child[o].length>1){n+='"'+o+'" : [ ';for(let u in e.child[o])n+=cr(e.child[o][u],t)+" , ";n=n.substr(0,n.length-1)+" ] "}else n+='"'+o+'" : '+cr(e.child[o][0],t)+" ,"}return rt.merge(n,e.attrsMap),rt.isEmptyObject(n)?rt.isExist(e.val)?e.val:"":(rt.isExist(e.val)&&(typeof e.val=="string"&&(e.val===""||e.val===t.cdataPositionChar)||(n+='"'+t.textNodeName+'" : '+gl(e.val))),n[n.length-1]===","&&(n=n.substr(0,n.length-2)),n+"}")};function gl(e){return e===!0||e===!1||!isNaN(e)?e:'"'+e+'"'}Uo.convertToJsonString=hl;const ml=le.buildOptions,pl={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(e){return e},attrValueProcessor:function(e){return e}},yl=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor","rootNodeName"];function Cr(e){this.options=ml(e,pl,yl),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=kl),this.options.cdataTagName?this.isCDATA=Ll:this.isCDATA=function(){return!1},this.replaceCDATAstr=bl,this.replaceCDATAarr=wl,this.processTextOrObjNode=Sl,this.options.format?(this.indentate=xl,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=El,this.buildObjNode=Cl):(this.buildTextNode=Ds,this.buildObjNode=zs),this.buildTextValNode=Ds,this.buildObjectNode=zs}Cr.prototype.parse=function(e){return Array.isArray(e)&&this.options.rootNodeName&&this.options.rootNodeName.length>1&&(e={[this.options.rootNodeName]:e}),this.j2x(e,0).val};Cr.prototype.j2x=function(e,t){let r="",n="";for(let i in e)if(typeof e[i]!="undefined")if(e[i]===null)n+=this.indentate(t)+"<"+i+"/"+this.tagEndChar;else if(e[i]instanceof Date)n+=this.buildTextNode(e[i],i,"",t);else if(typeof e[i]!="object"){const a=this.isAttribute(i);a?r+=" "+a+'="'+this.options.attrValueProcessor(""+e[i])+'"':this.isCDATA(i)?e[this.options.textNodeName]?n+=this.replaceCDATAstr(e[this.options.textNodeName],e[i]):n+=this.replaceCDATAstr("",e[i]):i===this.options.textNodeName?e[this.options.cdataTagName]||(n+=this.options.tagValueProcessor(""+e[i])):n+=this.buildTextNode(e[i],i,"",t)}else if(Array.isArray(e[i]))if(this.isCDATA(i))n+=this.indentate(t),e[this.options.textNodeName]?n+=this.replaceCDATAarr(e[this.options.textNodeName],e[i]):n+=this.replaceCDATAarr("",e[i]);else{const a=e[i].length;for(let o=0;o<a;o++){const u=e[i][o];typeof u=="undefined"||(u===null?n+=this.indentate(t)+"<"+i+"/"+this.tagEndChar:typeof u=="object"?n+=this.processTextOrObjNode(u,i,t):n+=this.buildTextNode(u,i,"",t))}}else if(this.options.attrNodeName&&i===this.options.attrNodeName){const a=Object.keys(e[i]),o=a.length;for(let u=0;u<o;u++)r+=" "+a[u]+'="'+this.options.attrValueProcessor(""+e[i][a[u]])+'"'}else n+=this.processTextOrObjNode(e[i],i,t);return{attrStr:r,val:n}};function Sl(e,t,r){const n=this.j2x(e,r+1);return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextNode(n.val,t,n.attrStr,r):this.buildObjNode(n.val,t,n.attrStr,r)}function bl(e,t){return e=this.options.tagValueProcessor(""+e),this.options.cdataPositionChar===""||e===""?e+"<![CDATA["+t+"]]"+this.tagEndChar:e.replace(this.options.cdataPositionChar,"<![CDATA["+t+"]]"+this.tagEndChar)}function wl(e,t){if(e=this.options.tagValueProcessor(""+e),this.options.cdataPositionChar===""||e==="")return e+"<![CDATA["+t.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let r in t)e=e.replace(this.options.cdataPositionChar,"<![CDATA["+t[r]+"]]>");return e+this.newLine}function zs(e,t,r,n){return r&&e.indexOf("<")===-1?this.indentate(n)+"<"+t+r+">"+e+"</"+t+this.tagEndChar:this.indentate(n)+"<"+t+r+this.tagEndChar+e+this.indentate(n)+"</"+t+this.tagEndChar}function Cl(e,t,r,n){return e!==""?this.buildObjectNode(e,t,r,n):this.indentate(n)+"<"+t+r+"/"+this.tagEndChar}function Ds(e,t,r,n){return this.indentate(n)+"<"+t+r+">"+this.options.tagValueProcessor(e)+"</"+t+this.tagEndChar}function El(e,t,r,n){return e!==""?this.buildTextValNode(e,t,r,n):this.indentate(n)+"<"+t+r+"/"+this.tagEndChar}function xl(e){return this.options.indentBy.repeat(e)}function kl(e){return e.startsWith(this.options.attributeNamePrefix)?e.substr(this.attrPrefixLen):!1}function Ll(e){return e===this.options.cdataTagName}var Al=Cr;(function(e){const t=Mo,r=Pe,n=Pe,i=le.buildOptions,a=Do;e.parse=function(o,u={},d){if(d){d===!0&&(d={});const f=a.validate(o,d);if(f!==!0)throw Error(f.err.msg)}u.parseTrueNumberOnly&&u.parseNodeValue!==!1&&!u.numParseOptions&&(u.numParseOptions={leadingZeros:!1});let c=i(u,n.defaultOptions,n.props);const l=r.getTraversalObj(o,c);return t.convertToJson(l,c)},e.convertTonimn=Ko.convert2nimn,e.getTraversalObj=r.getTraversalObj,e.convertToJson=t.convertToJson,e.convertToJsonString=Uo.convertToJsonString,e.validate=a.validate,e.j2xParser=Al,e.parseToNimn=function(o,u,d){return e.convertTonimn(e.getTraversalObj(o,d),u,d)}})(Bo);var Pl=function(e,t){return w(void 0,void 0,void 0,function(){var r,n,i,i,a,o,u,d,c,l,f;return C(this,function(g){switch(g.label){case 0:if(r=s(s({},h(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),h(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",e.Bucket!==void 0){if(i=e.Bucket,i.length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");n=n.replace("{Bucket}",I(i))}else throw new Error("No value provided for input HTTP label: Bucket.");if(e.Key!==void 0){if(i=e.Key,i.length<=0)throw new Error("Empty value provided for input HTTP label: Key.");n=n.replace("{Key+}",i.split("/").map(function(v){return I(v)}).join("/"))}else throw new Error("No value provided for input HTTP label: Key.");return a=s({"x-id":"AbortMultipartUpload"},e.UploadId!==void 0&&{uploadId:e.UploadId}),[4,t.endpoint()];case 1:return u=g.sent(),d=u.hostname,c=u.protocol,l=c===void 0?"https":c,f=u.port,[2,new V({protocol:l,hostname:d,port:f,method:"DELETE",headers:r,path:n,query:a,body:o})]}})})},Nl=function(e,t){return w(void 0,void 0,void 0,function(){var r,n,i,i,a,o,u,d,c,l,f,g;return C(this,function(v){switch(v.label){case 0:if(r=s(s({"content-type":"application/xml"},h(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),h(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",e.Bucket!==void 0){if(i=e.Bucket,i.length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");n=n.replace("{Bucket}",I(i))}else throw new Error("No value provided for input HTTP label: Bucket.");if(e.Key!==void 0){if(i=e.Key,i.length<=0)throw new Error("Empty value provided for input HTTP label: Key.");n=n.replace("{Key+}",i.split("/").map(function(p){return I(p)}).join("/"))}else throw new Error("No value provided for input HTTP label: Key.");return a=s({},e.UploadId!==void 0&&{uploadId:e.UploadId}),e.MultipartUpload!==void 0&&(u=ff(e.MultipartUpload,t),o='<?xml version="1.0" encoding="UTF-8"?>',u.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),o+=u.toString()),[4,t.endpoint()];case 1:return d=v.sent(),c=d.hostname,l=d.protocol,f=l===void 0?"https":l,g=d.port,[2,new V({protocol:f,hostname:c,port:g,method:"POST",headers:r,path:n,query:a,body:o})]}})})},_l=function(e,t){return w(void 0,void 0,void 0,function(){var r,n,i,i,a,o,u,d,c,l,f;return C(this,function(g){switch(g.label){case 0:if(r=s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s({},h(e.ACL)&&{"x-amz-acl":e.ACL}),h(e.CacheControl)&&{"cache-control":e.CacheControl}),h(e.ContentDisposition)&&{"content-disposition":e.ContentDisposition}),h(e.ContentEncoding)&&{"content-encoding":e.ContentEncoding}),h(e.ContentLanguage)&&{"content-language":e.ContentLanguage}),h(e.ContentType)&&{"content-type":e.ContentType}),h(e.CopySource)&&{"x-amz-copy-source":e.CopySource}),h(e.CopySourceIfMatch)&&{"x-amz-copy-source-if-match":e.CopySourceIfMatch}),h(e.CopySourceIfModifiedSince)&&{"x-amz-copy-source-if-modified-since":Ae(e.CopySourceIfModifiedSince).toString()}),h(e.CopySourceIfNoneMatch)&&{"x-amz-copy-source-if-none-match":e.CopySourceIfNoneMatch}),h(e.CopySourceIfUnmodifiedSince)&&{"x-amz-copy-source-if-unmodified-since":Ae(e.CopySourceIfUnmodifiedSince).toString()}),h(e.Expires)&&{expires:Ae(e.Expires).toString()}),h(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),h(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),h(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),h(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),h(e.MetadataDirective)&&{"x-amz-metadata-directive":e.MetadataDirective}),h(e.TaggingDirective)&&{"x-amz-tagging-directive":e.TaggingDirective}),h(e.ServerSideEncryption)&&{"x-amz-server-side-encryption":e.ServerSideEncryption}),h(e.StorageClass)&&{"x-amz-storage-class":e.StorageClass}),h(e.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":e.WebsiteRedirectLocation}),h(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),h(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),h(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),h(e.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId}),h(e.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext}),h(e.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":e.BucketKeyEnabled.toString()}),h(e.CopySourceSSECustomerAlgorithm)&&{"x-amz-copy-source-server-side-encryption-customer-algorithm":e.CopySourceSSECustomerAlgorithm}),h(e.CopySourceSSECustomerKey)&&{"x-amz-copy-source-server-side-encryption-customer-key":e.CopySourceSSECustomerKey}),h(e.CopySourceSSECustomerKeyMD5)&&{"x-amz-copy-source-server-side-encryption-customer-key-md5":e.CopySourceSSECustomerKeyMD5}),h(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),h(e.Tagging)&&{"x-amz-tagging":e.Tagging}),h(e.ObjectLockMode)&&{"x-amz-object-lock-mode":e.ObjectLockMode}),h(e.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),h(e.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus}),h(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),h(e.ExpectedSourceBucketOwner)&&{"x-amz-source-expected-bucket-owner":e.ExpectedSourceBucketOwner}),e.Metadata!==void 0&&Object.keys(e.Metadata).reduce(function(v,p){var y;return s(s({},v),(y={},y["x-amz-meta-"+p.toLowerCase()]=e.Metadata[p],y))},{})),n="/{Bucket}/{Key+}",e.Bucket!==void 0){if(i=e.Bucket,i.length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");n=n.replace("{Bucket}",I(i))}else throw new Error("No value provided for input HTTP label: Bucket.");if(e.Key!==void 0){if(i=e.Key,i.length<=0)throw new Error("Empty value provided for input HTTP label: Key.");n=n.replace("{Key+}",i.split("/").map(function(v){return I(v)}).join("/"))}else throw new Error("No value provided for input HTTP label: Key.");return a={"x-id":"CopyObject"},[4,t.endpoint()];case 1:return u=g.sent(),d=u.hostname,c=u.protocol,l=c===void 0?"https":c,f=u.port,[2,new V({protocol:l,hostname:d,port:f,method:"PUT",headers:r,path:n,query:a,body:o})]}})})},Ol=function(e,t){return w(void 0,void 0,void 0,function(){var r,n,i,i,a,o,u,d,c,l,f;return C(this,function(g){switch(g.label){case 0:if(r=s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s({},h(e.ACL)&&{"x-amz-acl":e.ACL}),h(e.CacheControl)&&{"cache-control":e.CacheControl}),h(e.ContentDisposition)&&{"content-disposition":e.ContentDisposition}),h(e.ContentEncoding)&&{"content-encoding":e.ContentEncoding}),h(e.ContentLanguage)&&{"content-language":e.ContentLanguage}),h(e.ContentType)&&{"content-type":e.ContentType}),h(e.Expires)&&{expires:Ae(e.Expires).toString()}),h(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),h(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),h(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),h(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),h(e.ServerSideEncryption)&&{"x-amz-server-side-encryption":e.ServerSideEncryption}),h(e.StorageClass)&&{"x-amz-storage-class":e.StorageClass}),h(e.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":e.WebsiteRedirectLocation}),h(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),h(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),h(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),h(e.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId}),h(e.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext}),h(e.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":e.BucketKeyEnabled.toString()}),h(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),h(e.Tagging)&&{"x-amz-tagging":e.Tagging}),h(e.ObjectLockMode)&&{"x-amz-object-lock-mode":e.ObjectLockMode}),h(e.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),h(e.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus}),h(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),e.Metadata!==void 0&&Object.keys(e.Metadata).reduce(function(v,p){var y;return s(s({},v),(y={},y["x-amz-meta-"+p.toLowerCase()]=e.Metadata[p],y))},{})),n="/{Bucket}/{Key+}",e.Bucket!==void 0){if(i=e.Bucket,i.length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");n=n.replace("{Bucket}",I(i))}else throw new Error("No value provided for input HTTP label: Bucket.");if(e.Key!==void 0){if(i=e.Key,i.length<=0)throw new Error("Empty value provided for input HTTP label: Key.");n=n.replace("{Key+}",i.split("/").map(function(v){return I(v)}).join("/"))}else throw new Error("No value provided for input HTTP label: Key.");return a={uploads:""},[4,t.endpoint()];case 1:return u=g.sent(),d=u.hostname,c=u.protocol,l=c===void 0?"https":c,f=u.port,[2,new V({protocol:l,hostname:d,port:f,method:"POST",headers:r,path:n,query:a,body:o})]}})})},Tl=function(e,t){return w(void 0,void 0,void 0,function(){var r,n,i,i,a,o,u,d,c,l,f;return C(this,function(g){switch(g.label){case 0:if(r=s(s(s(s({},h(e.MFA)&&{"x-amz-mfa":e.MFA}),h(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),h(e.BypassGovernanceRetention)&&{"x-amz-bypass-governance-retention":e.BypassGovernanceRetention.toString()}),h(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",e.Bucket!==void 0){if(i=e.Bucket,i.length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");n=n.replace("{Bucket}",I(i))}else throw new Error("No value provided for input HTTP label: Bucket.");if(e.Key!==void 0){if(i=e.Key,i.length<=0)throw new Error("Empty value provided for input HTTP label: Key.");n=n.replace("{Key+}",i.split("/").map(function(v){return I(v)}).join("/"))}else throw new Error("No value provided for input HTTP label: Key.");return a=s({"x-id":"DeleteObject"},e.VersionId!==void 0&&{versionId:e.VersionId}),[4,t.endpoint()];case 1:return u=g.sent(),d=u.hostname,c=u.protocol,l=c===void 0?"https":c,f=u.port,[2,new V({protocol:l,hostname:d,port:f,method:"DELETE",headers:r,path:n,query:a,body:o})]}})})},Bl=function(e,t){return w(void 0,void 0,void 0,function(){var r,n,i,i,a,o,u,d,c,l,f;return C(this,function(g){switch(g.label){case 0:if(r=s(s(s(s(s(s(s(s(s(s({},h(e.IfMatch)&&{"if-match":e.IfMatch}),h(e.IfModifiedSince)&&{"if-modified-since":Ae(e.IfModifiedSince).toString()}),h(e.IfNoneMatch)&&{"if-none-match":e.IfNoneMatch}),h(e.IfUnmodifiedSince)&&{"if-unmodified-since":Ae(e.IfUnmodifiedSince).toString()}),h(e.Range)&&{range:e.Range}),h(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),h(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),h(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),h(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),h(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",e.Bucket!==void 0){if(i=e.Bucket,i.length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");n=n.replace("{Bucket}",I(i))}else throw new Error("No value provided for input HTTP label: Bucket.");if(e.Key!==void 0){if(i=e.Key,i.length<=0)throw new Error("Empty value provided for input HTTP label: Key.");n=n.replace("{Key+}",i.split("/").map(function(v){return I(v)}).join("/"))}else throw new Error("No value provided for input HTTP label: Key.");return a=s(s(s(s(s(s(s(s({"x-id":"GetObject"},e.ResponseCacheControl!==void 0&&{"response-cache-control":e.ResponseCacheControl}),e.ResponseContentDisposition!==void 0&&{"response-content-disposition":e.ResponseContentDisposition}),e.ResponseContentEncoding!==void 0&&{"response-content-encoding":e.ResponseContentEncoding}),e.ResponseContentLanguage!==void 0&&{"response-content-language":e.ResponseContentLanguage}),e.ResponseContentType!==void 0&&{"response-content-type":e.ResponseContentType}),e.ResponseExpires!==void 0&&{"response-expires":(e.ResponseExpires.toISOString().split(".")[0]+"Z").toString()}),e.VersionId!==void 0&&{versionId:e.VersionId}),e.PartNumber!==void 0&&{partNumber:e.PartNumber.toString()}),[4,t.endpoint()];case 1:return u=g.sent(),d=u.hostname,c=u.protocol,l=c===void 0?"https":c,f=u.port,[2,new V({protocol:l,hostname:d,port:f,method:"GET",headers:r,path:n,query:a,body:o})]}})})},Ml=function(e,t){return w(void 0,void 0,void 0,function(){var r,n,i,a,o,u,d,c,l,f;return C(this,function(g){switch(g.label){case 0:if(r=s(s({},h(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),h(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),n="/{Bucket}",e.Bucket!==void 0){if(i=e.Bucket,i.length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");n=n.replace("{Bucket}",I(i))}else throw new Error("No value provided for input HTTP label: Bucket.");return a=s(s(s(s(s({},e.Delimiter!==void 0&&{delimiter:e.Delimiter}),e.EncodingType!==void 0&&{"encoding-type":e.EncodingType}),e.Marker!==void 0&&{marker:e.Marker}),e.MaxKeys!==void 0&&{"max-keys":e.MaxKeys.toString()}),e.Prefix!==void 0&&{prefix:e.Prefix}),[4,t.endpoint()];case 1:return u=g.sent(),d=u.hostname,c=u.protocol,l=c===void 0?"https":c,f=u.port,[2,new V({protocol:l,hostname:d,port:f,method:"GET",headers:r,path:n,query:a,body:o})]}})})},Rl=function(e,t){return w(void 0,void 0,void 0,function(){var r,n,i,a,o,u,d,c,l,f;return C(this,function(g){switch(g.label){case 0:if(r=s(s({},h(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),h(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),n="/{Bucket}",e.Bucket!==void 0){if(i=e.Bucket,i.length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");n=n.replace("{Bucket}",I(i))}else throw new Error("No value provided for input HTTP label: Bucket.");return a=s(s(s(s(s(s(s({"list-type":"2"},e.Delimiter!==void 0&&{delimiter:e.Delimiter}),e.EncodingType!==void 0&&{"encoding-type":e.EncodingType}),e.MaxKeys!==void 0&&{"max-keys":e.MaxKeys.toString()}),e.Prefix!==void 0&&{prefix:e.Prefix}),e.ContinuationToken!==void 0&&{"continuation-token":e.ContinuationToken}),e.FetchOwner!==void 0&&{"fetch-owner":e.FetchOwner.toString()}),e.StartAfter!==void 0&&{"start-after":e.StartAfter}),[4,t.endpoint()];case 1:return u=g.sent(),d=u.hostname,c=u.protocol,l=c===void 0?"https":c,f=u.port,[2,new V({protocol:l,hostname:d,port:f,method:"GET",headers:r,path:n,query:a,body:o})]}})})},Il=function(e,t){return w(void 0,void 0,void 0,function(){var r,n,i,i,a,o,u,d,c,l,f;return C(this,function(g){switch(g.label){case 0:if(r=s(s({},h(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),h(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",e.Bucket!==void 0){if(i=e.Bucket,i.length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");n=n.replace("{Bucket}",I(i))}else throw new Error("No value provided for input HTTP label: Bucket.");if(e.Key!==void 0){if(i=e.Key,i.length<=0)throw new Error("Empty value provided for input HTTP label: Key.");n=n.replace("{Key+}",i.split("/").map(function(v){return I(v)}).join("/"))}else throw new Error("No value provided for input HTTP label: Key.");return a=s(s(s({"x-id":"ListParts"},e.MaxParts!==void 0&&{"max-parts":e.MaxParts.toString()}),e.PartNumberMarker!==void 0&&{"part-number-marker":e.PartNumberMarker}),e.UploadId!==void 0&&{uploadId:e.UploadId}),[4,t.endpoint()];case 1:return u=g.sent(),d=u.hostname,c=u.protocol,l=c===void 0?"https":c,f=u.port,[2,new V({protocol:l,hostname:d,port:f,method:"GET",headers:r,path:n,query:a,body:o})]}})})},zl=function(e,t){return w(void 0,void 0,void 0,function(){var r,n,i,i,a,o,u,d,c,l,f,g;return C(this,function(v){switch(v.label){case 0:if(r=s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s({"content-type":"application/octet-stream"},h(e.ACL)&&{"x-amz-acl":e.ACL}),h(e.CacheControl)&&{"cache-control":e.CacheControl}),h(e.ContentDisposition)&&{"content-disposition":e.ContentDisposition}),h(e.ContentEncoding)&&{"content-encoding":e.ContentEncoding}),h(e.ContentLanguage)&&{"content-language":e.ContentLanguage}),h(e.ContentLength)&&{"content-length":e.ContentLength.toString()}),h(e.ContentMD5)&&{"content-md5":e.ContentMD5}),h(e.ContentType)&&{"content-type":e.ContentType}),h(e.Expires)&&{expires:Ae(e.Expires).toString()}),h(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),h(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),h(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),h(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),h(e.ServerSideEncryption)&&{"x-amz-server-side-encryption":e.ServerSideEncryption}),h(e.StorageClass)&&{"x-amz-storage-class":e.StorageClass}),h(e.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":e.WebsiteRedirectLocation}),h(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),h(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),h(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),h(e.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId}),h(e.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext}),h(e.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":e.BucketKeyEnabled.toString()}),h(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),h(e.Tagging)&&{"x-amz-tagging":e.Tagging}),h(e.ObjectLockMode)&&{"x-amz-object-lock-mode":e.ObjectLockMode}),h(e.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),h(e.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus}),h(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),e.Metadata!==void 0&&Object.keys(e.Metadata).reduce(function(p,y){var S;return s(s({},p),(S={},S["x-amz-meta-"+y.toLowerCase()]=e.Metadata[y],S))},{})),n="/{Bucket}/{Key+}",e.Bucket!==void 0){if(i=e.Bucket,i.length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");n=n.replace("{Bucket}",I(i))}else throw new Error("No value provided for input HTTP label: Bucket.");if(e.Key!==void 0){if(i=e.Key,i.length<=0)throw new Error("Empty value provided for input HTTP label: Key.");n=n.replace("{Key+}",i.split("/").map(function(p){return I(p)}).join("/"))}else throw new Error("No value provided for input HTTP label: Key.");return a={"x-id":"PutObject"},e.Body!==void 0&&(u=e.Body,o=u),[4,t.endpoint()];case 1:return d=v.sent(),c=d.hostname,l=d.protocol,f=l===void 0?"https":l,g=d.port,[2,new V({protocol:f,hostname:c,port:g,method:"PUT",headers:r,path:n,query:a,body:o})]}})})},Dl=function(e,t){return w(void 0,void 0,void 0,function(){var r,n,i,i,a,o,u,d,c,l,f,g;return C(this,function(v){switch(v.label){case 0:if(r=s(s(s(s(s(s(s({"content-type":"application/octet-stream"},h(e.ContentLength)&&{"content-length":e.ContentLength.toString()}),h(e.ContentMD5)&&{"content-md5":e.ContentMD5}),h(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),h(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),h(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),h(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),h(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",e.Bucket!==void 0){if(i=e.Bucket,i.length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");n=n.replace("{Bucket}",I(i))}else throw new Error("No value provided for input HTTP label: Bucket.");if(e.Key!==void 0){if(i=e.Key,i.length<=0)throw new Error("Empty value provided for input HTTP label: Key.");n=n.replace("{Key+}",i.split("/").map(function(p){return I(p)}).join("/"))}else throw new Error("No value provided for input HTTP label: Key.");return a=s(s({"x-id":"UploadPart"},e.PartNumber!==void 0&&{partNumber:e.PartNumber.toString()}),e.UploadId!==void 0&&{uploadId:e.UploadId}),e.Body!==void 0&&(u=e.Body,o=u),[4,t.endpoint()];case 1:return d=v.sent(),c=d.hostname,l=d.protocol,f=l===void 0?"https":l,g=d.port,[2,new V({protocol:f,hostname:c,port:g,method:"PUT",headers:r,path:n,query:a,body:o})]}})})},Kl=function(e,t){return w(void 0,void 0,void 0,function(){var r;return C(this,function(n){switch(n.label){case 0:return e.statusCode!==204&&e.statusCode>=300?[2,Ul(e,t)]:(r={$metadata:k(e),RequestCharged:void 0},e.headers["x-amz-request-charged"]!==void 0&&(r.RequestCharged=e.headers["x-amz-request-charged"]),[4,Je(e.body,t)]);case 1:return n.sent(),[2,Promise.resolve(r)]}})})},Ul=function(e,t){return w(void 0,void 0,void 0,function(){var r,n,i,a,o,u,d,c,l;return C(this,function(f){switch(f.label){case 0:return n=[s({},e)],l={},[4,K(e.body,t)];case 1:switch(r=s.apply(void 0,n.concat([(l.body=f.sent(),l)])),a="UnknownError",a=se(e,r.body),o=a,o){case"NoSuchUpload":return[3,2];case"com.amazonaws.s3#NoSuchUpload":return[3,2]}return[3,4];case 2:return u=[{}],[4,df(r,t)];case 3:return i=s.apply(void 0,[s.apply(void 0,u.concat([f.sent()])),{name:a,$metadata:k(e)}]),[3,5];case 4:d=r.body,a=d.code||d.Code||a,i=s(s({},d),{name:""+a,message:d.message||d.Message||a,$fault:"client",$metadata:k(e)}),f.label=5;case 5:return c=i.message||i.Message||a,i.message=c,delete i.Message,[2,Promise.reject(Object.assign(new Error(c),i))]}})})},ql=function(e,t){return w(void 0,void 0,void 0,function(){var r,n;return C(this,function(i){switch(i.label){case 0:return e.statusCode!==200&&e.statusCode>=300?[2,Fl(e,t)]:(r={$metadata:k(e),Bucket:void 0,BucketKeyEnabled:void 0,ETag:void 0,Expiration:void 0,Key:void 0,Location:void 0,RequestCharged:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},e.headers["x-amz-expiration"]!==void 0&&(r.Expiration=e.headers["x-amz-expiration"]),e.headers["x-amz-server-side-encryption"]!==void 0&&(r.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),e.headers["x-amz-version-id"]!==void 0&&(r.VersionId=e.headers["x-amz-version-id"]),e.headers["x-amz-server-side-encryption-aws-kms-key-id"]!==void 0&&(r.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),e.headers["x-amz-server-side-encryption-bucket-key-enabled"]!==void 0&&(r.BucketKeyEnabled=e.headers["x-amz-server-side-encryption-bucket-key-enabled"]==="true"),e.headers["x-amz-request-charged"]!==void 0&&(r.RequestCharged=e.headers["x-amz-request-charged"]),[4,K(e.body,t)]);case 1:return n=i.sent(),n.Bucket!==void 0&&(r.Bucket=n.Bucket),n.ETag!==void 0&&(r.ETag=n.ETag),n.Key!==void 0&&(r.Key=n.Key),n.Location!==void 0&&(r.Location=n.Location),[2,Promise.resolve(r)]}})})},Fl=function(e,t){return w(void 0,void 0,void 0,function(){var r,n,i,a,o,u,d;return C(this,function(c){switch(c.label){case 0:return n=[s({},e)],d={},[4,K(e.body,t)];case 1:switch(r=s.apply(void 0,n.concat([(d.body=c.sent(),d)])),a="UnknownError",a=se(e,r.body),a){default:o=r.body,a=o.code||o.Code||a,i=s(s({},o),{name:""+a,message:o.message||o.Message||a,$fault:"client",$metadata:k(e)})}return u=i.message||i.Message||a,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}})})},Gl=function(e,t){return w(void 0,void 0,void 0,function(){var r,n;return C(this,function(i){switch(i.label){case 0:return e.statusCode!==200&&e.statusCode>=300?[2,jl(e,t)]:(r={$metadata:k(e),BucketKeyEnabled:void 0,CopyObjectResult:void 0,CopySourceVersionId:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},e.headers["x-amz-expiration"]!==void 0&&(r.Expiration=e.headers["x-amz-expiration"]),e.headers["x-amz-copy-source-version-id"]!==void 0&&(r.CopySourceVersionId=e.headers["x-amz-copy-source-version-id"]),e.headers["x-amz-version-id"]!==void 0&&(r.VersionId=e.headers["x-amz-version-id"]),e.headers["x-amz-server-side-encryption"]!==void 0&&(r.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),e.headers["x-amz-server-side-encryption-customer-algorithm"]!==void 0&&(r.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),e.headers["x-amz-server-side-encryption-customer-key-md5"]!==void 0&&(r.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),e.headers["x-amz-server-side-encryption-aws-kms-key-id"]!==void 0&&(r.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),e.headers["x-amz-server-side-encryption-context"]!==void 0&&(r.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),e.headers["x-amz-server-side-encryption-bucket-key-enabled"]!==void 0&&(r.BucketKeyEnabled=e.headers["x-amz-server-side-encryption-bucket-key-enabled"]==="true"),e.headers["x-amz-request-charged"]!==void 0&&(r.RequestCharged=e.headers["x-amz-request-charged"]),[4,K(e.body,t)]);case 1:return n=i.sent(),r.CopyObjectResult=mf(n),[2,Promise.resolve(r)]}})})},jl=function(e,t){return w(void 0,void 0,void 0,function(){var r,n,i,a,o,u,d,c,l;return C(this,function(f){switch(f.label){case 0:return n=[s({},e)],l={},[4,K(e.body,t)];case 1:switch(r=s.apply(void 0,n.concat([(l.body=f.sent(),l)])),a="UnknownError",a=se(e,r.body),o=a,o){case"ObjectNotInActiveTierError":return[3,2];case"com.amazonaws.s3#ObjectNotInActiveTierError":return[3,2]}return[3,4];case 2:return u=[{}],[4,lf(r)];case 3:return i=s.apply(void 0,[s.apply(void 0,u.concat([f.sent()])),{name:a,$metadata:k(e)}]),[3,5];case 4:d=r.body,a=d.code||d.Code||a,i=s(s({},d),{name:""+a,message:d.message||d.Message||a,$fault:"client",$metadata:k(e)}),f.label=5;case 5:return c=i.message||i.Message||a,i.message=c,delete i.Message,[2,Promise.reject(Object.assign(new Error(c),i))]}})})},$l=function(e,t){return w(void 0,void 0,void 0,function(){var r,n;return C(this,function(i){switch(i.label){case 0:return e.statusCode!==200&&e.statusCode>=300?[2,Hl(e,t)]:(r={$metadata:k(e),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,BucketKeyEnabled:void 0,Key:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,UploadId:void 0},e.headers["x-amz-abort-date"]!==void 0&&(r.AbortDate=new Date(e.headers["x-amz-abort-date"])),e.headers["x-amz-abort-rule-id"]!==void 0&&(r.AbortRuleId=e.headers["x-amz-abort-rule-id"]),e.headers["x-amz-server-side-encryption"]!==void 0&&(r.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),e.headers["x-amz-server-side-encryption-customer-algorithm"]!==void 0&&(r.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),e.headers["x-amz-server-side-encryption-customer-key-md5"]!==void 0&&(r.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),e.headers["x-amz-server-side-encryption-aws-kms-key-id"]!==void 0&&(r.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),e.headers["x-amz-server-side-encryption-context"]!==void 0&&(r.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),e.headers["x-amz-server-side-encryption-bucket-key-enabled"]!==void 0&&(r.BucketKeyEnabled=e.headers["x-amz-server-side-encryption-bucket-key-enabled"]==="true"),e.headers["x-amz-request-charged"]!==void 0&&(r.RequestCharged=e.headers["x-amz-request-charged"]),[4,K(e.body,t)]);case 1:return n=i.sent(),n.Bucket!==void 0&&(r.Bucket=n.Bucket),n.Key!==void 0&&(r.Key=n.Key),n.UploadId!==void 0&&(r.UploadId=n.UploadId),[2,Promise.resolve(r)]}})})},Hl=function(e,t){return w(void 0,void 0,void 0,function(){var r,n,i,a,o,u,d;return C(this,function(c){switch(c.label){case 0:return n=[s({},e)],d={},[4,K(e.body,t)];case 1:switch(r=s.apply(void 0,n.concat([(d.body=c.sent(),d)])),a="UnknownError",a=se(e,r.body),a){default:o=r.body,a=o.code||o.Code||a,i=s(s({},o),{name:""+a,message:o.message||o.Message||a,$fault:"client",$metadata:k(e)})}return u=i.message||i.Message||a,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}})})},Vl=function(e,t){return w(void 0,void 0,void 0,function(){var r;return C(this,function(n){switch(n.label){case 0:return e.statusCode!==204&&e.statusCode>=300?[2,Xl(e,t)]:(r={$metadata:k(e),DeleteMarker:void 0,RequestCharged:void 0,VersionId:void 0},e.headers["x-amz-delete-marker"]!==void 0&&(r.DeleteMarker=e.headers["x-amz-delete-marker"]==="true"),e.headers["x-amz-version-id"]!==void 0&&(r.VersionId=e.headers["x-amz-version-id"]),e.headers["x-amz-request-charged"]!==void 0&&(r.RequestCharged=e.headers["x-amz-request-charged"]),[4,Je(e.body,t)]);case 1:return n.sent(),[2,Promise.resolve(r)]}})})},Xl=function(e,t){return w(void 0,void 0,void 0,function(){var r,n,i,a,o,u,d;return C(this,function(c){switch(c.label){case 0:return n=[s({},e)],d={},[4,K(e.body,t)];case 1:switch(r=s.apply(void 0,n.concat([(d.body=c.sent(),d)])),a="UnknownError",a=se(e,r.body),a){default:o=r.body,a=o.code||o.Code||a,i=s(s({},o),{name:""+a,message:o.message||o.Message||a,$fault:"client",$metadata:k(e)})}return u=i.message||i.Message||a,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}})})},Wl=function(e,t){return w(void 0,void 0,void 0,function(){var r,n;return C(this,function(i){return e.statusCode!==200&&e.statusCode>=300?[2,Jl(e,t)]:(r={$metadata:k(e),AcceptRanges:void 0,Body:void 0,BucketKeyEnabled:void 0,CacheControl:void 0,ContentDisposition:void 0,ContentEncoding:void 0,ContentLanguage:void 0,ContentLength:void 0,ContentRange:void 0,ContentType:void 0,DeleteMarker:void 0,ETag:void 0,Expiration:void 0,Expires:void 0,LastModified:void 0,Metadata:void 0,MissingMeta:void 0,ObjectLockLegalHoldStatus:void 0,ObjectLockMode:void 0,ObjectLockRetainUntilDate:void 0,PartsCount:void 0,ReplicationStatus:void 0,RequestCharged:void 0,Restore:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,StorageClass:void 0,TagCount:void 0,VersionId:void 0,WebsiteRedirectLocation:void 0},e.headers["x-amz-delete-marker"]!==void 0&&(r.DeleteMarker=e.headers["x-amz-delete-marker"]==="true"),e.headers["accept-ranges"]!==void 0&&(r.AcceptRanges=e.headers["accept-ranges"]),e.headers["x-amz-expiration"]!==void 0&&(r.Expiration=e.headers["x-amz-expiration"]),e.headers["x-amz-restore"]!==void 0&&(r.Restore=e.headers["x-amz-restore"]),e.headers["last-modified"]!==void 0&&(r.LastModified=new Date(e.headers["last-modified"])),e.headers["content-length"]!==void 0&&(r.ContentLength=parseInt(e.headers["content-length"],10)),e.headers.etag!==void 0&&(r.ETag=e.headers.etag),e.headers["x-amz-missing-meta"]!==void 0&&(r.MissingMeta=parseInt(e.headers["x-amz-missing-meta"],10)),e.headers["x-amz-version-id"]!==void 0&&(r.VersionId=e.headers["x-amz-version-id"]),e.headers["cache-control"]!==void 0&&(r.CacheControl=e.headers["cache-control"]),e.headers["content-disposition"]!==void 0&&(r.ContentDisposition=e.headers["content-disposition"]),e.headers["content-encoding"]!==void 0&&(r.ContentEncoding=e.headers["content-encoding"]),e.headers["content-language"]!==void 0&&(r.ContentLanguage=e.headers["content-language"]),e.headers["content-range"]!==void 0&&(r.ContentRange=e.headers["content-range"]),e.headers["content-type"]!==void 0&&(r.ContentType=e.headers["content-type"]),e.headers.expires!==void 0&&(r.Expires=new Date(e.headers.expires)),e.headers["x-amz-website-redirect-location"]!==void 0&&(r.WebsiteRedirectLocation=e.headers["x-amz-website-redirect-location"]),e.headers["x-amz-server-side-encryption"]!==void 0&&(r.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),e.headers["x-amz-server-side-encryption-customer-algorithm"]!==void 0&&(r.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),e.headers["x-amz-server-side-encryption-customer-key-md5"]!==void 0&&(r.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),e.headers["x-amz-server-side-encryption-aws-kms-key-id"]!==void 0&&(r.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),e.headers["x-amz-server-side-encryption-bucket-key-enabled"]!==void 0&&(r.BucketKeyEnabled=e.headers["x-amz-server-side-encryption-bucket-key-enabled"]==="true"),e.headers["x-amz-storage-class"]!==void 0&&(r.StorageClass=e.headers["x-amz-storage-class"]),e.headers["x-amz-request-charged"]!==void 0&&(r.RequestCharged=e.headers["x-amz-request-charged"]),e.headers["x-amz-replication-status"]!==void 0&&(r.ReplicationStatus=e.headers["x-amz-replication-status"]),e.headers["x-amz-mp-parts-count"]!==void 0&&(r.PartsCount=parseInt(e.headers["x-amz-mp-parts-count"],10)),e.headers["x-amz-tagging-count"]!==void 0&&(r.TagCount=parseInt(e.headers["x-amz-tagging-count"],10)),e.headers["x-amz-object-lock-mode"]!==void 0&&(r.ObjectLockMode=e.headers["x-amz-object-lock-mode"]),e.headers["x-amz-object-lock-retain-until-date"]!==void 0&&(r.ObjectLockRetainUntilDate=new Date(e.headers["x-amz-object-lock-retain-until-date"])),e.headers["x-amz-object-lock-legal-hold"]!==void 0&&(r.ObjectLockLegalHoldStatus=e.headers["x-amz-object-lock-legal-hold"]),Object.keys(e.headers).forEach(function(a){r.Metadata===void 0&&(r.Metadata={}),a.startsWith("x-amz-meta-")&&(r.Metadata[a.substring(11)]=e.headers[a])}),n=e.body,r.Body=n,[2,Promise.resolve(r)])})})},Jl=function(e,t){return w(void 0,void 0,void 0,function(){var r,n,i,a,o,u,d,c,l,f;return C(this,function(g){switch(g.label){case 0:return n=[s({},e)],f={},[4,K(e.body,t)];case 1:switch(r=s.apply(void 0,n.concat([(f.body=g.sent(),f)])),a="UnknownError",a=se(e,r.body),o=a,o){case"InvalidObjectState":return[3,2];case"com.amazonaws.s3#InvalidObjectState":return[3,2];case"NoSuchKey":return[3,4];case"com.amazonaws.s3#NoSuchKey":return[3,4]}return[3,6];case 2:return u=[{}],[4,uf(r)];case 3:return i=s.apply(void 0,[s.apply(void 0,u.concat([g.sent()])),{name:a,$metadata:k(e)}]),[3,7];case 4:return d=[{}],[4,cf(r)];case 5:return i=s.apply(void 0,[s.apply(void 0,d.concat([g.sent()])),{name:a,$metadata:k(e)}]),[3,7];case 6:c=r.body,a=c.code||c.Code||a,i=s(s({},c),{name:""+a,message:c.message||c.Message||a,$fault:"client",$metadata:k(e)}),g.label=7;case 7:return l=i.message||i.Message||a,i.message=l,delete i.Message,[2,Promise.reject(Object.assign(new Error(l),i))]}})})},Zl=function(e,t){return w(void 0,void 0,void 0,function(){var r,n;return C(this,function(i){switch(i.label){case 0:return e.statusCode!==200&&e.statusCode>=300?[2,Ql(e,t)]:(r={$metadata:k(e),CommonPrefixes:void 0,Contents:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,Marker:void 0,MaxKeys:void 0,Name:void 0,NextMarker:void 0,Prefix:void 0},[4,K(e.body,t)]);case 1:return n=i.sent(),n.CommonPrefixes===""&&(r.CommonPrefixes=[]),n.CommonPrefixes!==void 0&&(r.CommonPrefixes=Fo(je(n.CommonPrefixes))),n.Contents===""&&(r.Contents=[]),n.Contents!==void 0&&(r.Contents=Go(je(n.Contents))),n.Delimiter!==void 0&&(r.Delimiter=n.Delimiter),n.EncodingType!==void 0&&(r.EncodingType=n.EncodingType),n.IsTruncated!==void 0&&(r.IsTruncated=n.IsTruncated=="true"),n.Marker!==void 0&&(r.Marker=n.Marker),n.MaxKeys!==void 0&&(r.MaxKeys=parseInt(n.MaxKeys)),n.Name!==void 0&&(r.Name=n.Name),n.NextMarker!==void 0&&(r.NextMarker=n.NextMarker),n.Prefix!==void 0&&(r.Prefix=n.Prefix),[2,Promise.resolve(r)]}})})},Ql=function(e,t){return w(void 0,void 0,void 0,function(){var r,n,i,a,o,u,d,c,l;return C(this,function(f){switch(f.label){case 0:return n=[s({},e)],l={},[4,K(e.body,t)];case 1:switch(r=s.apply(void 0,n.concat([(l.body=f.sent(),l)])),a="UnknownError",a=se(e,r.body),o=a,o){case"NoSuchBucket":return[3,2];case"com.amazonaws.s3#NoSuchBucket":return[3,2]}return[3,4];case 2:return u=[{}],[4,qo(r)];case 3:return i=s.apply(void 0,[s.apply(void 0,u.concat([f.sent()])),{name:a,$metadata:k(e)}]),[3,5];case 4:d=r.body,a=d.code||d.Code||a,i=s(s({},d),{name:""+a,message:d.message||d.Message||a,$fault:"client",$metadata:k(e)}),f.label=5;case 5:return c=i.message||i.Message||a,i.message=c,delete i.Message,[2,Promise.reject(Object.assign(new Error(c),i))]}})})},Yl=function(e,t){return w(void 0,void 0,void 0,function(){var r,n;return C(this,function(i){switch(i.label){case 0:return e.statusCode!==200&&e.statusCode>=300?[2,ef(e,t)]:(r={$metadata:k(e),CommonPrefixes:void 0,Contents:void 0,ContinuationToken:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,KeyCount:void 0,MaxKeys:void 0,Name:void 0,NextContinuationToken:void 0,Prefix:void 0,StartAfter:void 0},[4,K(e.body,t)]);case 1:return n=i.sent(),n.CommonPrefixes===""&&(r.CommonPrefixes=[]),n.CommonPrefixes!==void 0&&(r.CommonPrefixes=Fo(je(n.CommonPrefixes),t)),n.Contents===""&&(r.Contents=[]),n.Contents!==void 0&&(r.Contents=Go(je(n.Contents),t)),n.ContinuationToken!==void 0&&(r.ContinuationToken=n.ContinuationToken),n.Delimiter!==void 0&&(r.Delimiter=n.Delimiter),n.EncodingType!==void 0&&(r.EncodingType=n.EncodingType),n.IsTruncated!==void 0&&(r.IsTruncated=n.IsTruncated=="true"),n.KeyCount!==void 0&&(r.KeyCount=parseInt(n.KeyCount)),n.MaxKeys!==void 0&&(r.MaxKeys=parseInt(n.MaxKeys)),n.Name!==void 0&&(r.Name=n.Name),n.NextContinuationToken!==void 0&&(r.NextContinuationToken=n.NextContinuationToken),n.Prefix!==void 0&&(r.Prefix=n.Prefix),n.StartAfter!==void 0&&(r.StartAfter=n.StartAfter),[2,Promise.resolve(r)]}})})},ef=function(e,t){return w(void 0,void 0,void 0,function(){var r,n,i,a,o,u,d,c,l;return C(this,function(f){switch(f.label){case 0:return n=[s({},e)],l={},[4,K(e.body,t)];case 1:switch(r=s.apply(void 0,n.concat([(l.body=f.sent(),l)])),a="UnknownError",a=se(e,r.body),o=a,o){case"NoSuchBucket":return[3,2];case"com.amazonaws.s3#NoSuchBucket":return[3,2]}return[3,4];case 2:return u=[{}],[4,qo(r,t)];case 3:return i=s.apply(void 0,[s.apply(void 0,u.concat([f.sent()])),{name:a,$metadata:k(e)}]),[3,5];case 4:d=r.body,a=d.code||d.Code||a,i=s(s({},d),{name:""+a,message:d.message||d.Message||a,$fault:"client",$metadata:k(e)}),f.label=5;case 5:return c=i.message||i.Message||a,i.message=c,delete i.Message,[2,Promise.reject(Object.assign(new Error(c),i))]}})})},tf=function(e,t){return w(void 0,void 0,void 0,function(){var r,n;return C(this,function(i){switch(i.label){case 0:return e.statusCode!==200&&e.statusCode>=300?[2,rf(e,t)]:(r={$metadata:k(e),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,Initiator:void 0,IsTruncated:void 0,Key:void 0,MaxParts:void 0,NextPartNumberMarker:void 0,Owner:void 0,PartNumberMarker:void 0,Parts:void 0,RequestCharged:void 0,StorageClass:void 0,UploadId:void 0},e.headers["x-amz-abort-date"]!==void 0&&(r.AbortDate=new Date(e.headers["x-amz-abort-date"])),e.headers["x-amz-abort-rule-id"]!==void 0&&(r.AbortRuleId=e.headers["x-amz-abort-rule-id"]),e.headers["x-amz-request-charged"]!==void 0&&(r.RequestCharged=e.headers["x-amz-request-charged"]),[4,K(e.body,t)]);case 1:return n=i.sent(),n.Bucket!==void 0&&(r.Bucket=n.Bucket),n.Initiator!==void 0&&(r.Initiator=pf(n.Initiator,t)),n.IsTruncated!==void 0&&(r.IsTruncated=n.IsTruncated=="true"),n.Key!==void 0&&(r.Key=n.Key),n.MaxParts!==void 0&&(r.MaxParts=parseInt(n.MaxParts)),n.NextPartNumberMarker!==void 0&&(r.NextPartNumberMarker=n.NextPartNumberMarker),n.Owner!==void 0&&(r.Owner=jo(n.Owner,t)),n.PartNumberMarker!==void 0&&(r.PartNumberMarker=n.PartNumberMarker),n.Part===""&&(r.Parts=[]),n.Part!==void 0&&(r.Parts=bf(je(n.Part),t)),n.StorageClass!==void 0&&(r.StorageClass=n.StorageClass),n.UploadId!==void 0&&(r.UploadId=n.UploadId),[2,Promise.resolve(r)]}})})},rf=function(e,t){return w(void 0,void 0,void 0,function(){var r,n,i,a,o,u,d;return C(this,function(c){switch(c.label){case 0:return n=[s({},e)],d={},[4,K(e.body,t)];case 1:switch(r=s.apply(void 0,n.concat([(d.body=c.sent(),d)])),a="UnknownError",a=se(e,r.body),a){default:o=r.body,a=o.code||o.Code||a,i=s(s({},o),{name:""+a,message:o.message||o.Message||a,$fault:"client",$metadata:k(e)})}return u=i.message||i.Message||a,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}})})},nf=function(e,t){return w(void 0,void 0,void 0,function(){var r;return C(this,function(n){switch(n.label){case 0:return e.statusCode!==200&&e.statusCode>=300?[2,af(e,t)]:(r={$metadata:k(e),BucketKeyEnabled:void 0,ETag:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},e.headers["x-amz-expiration"]!==void 0&&(r.Expiration=e.headers["x-amz-expiration"]),e.headers.etag!==void 0&&(r.ETag=e.headers.etag),e.headers["x-amz-server-side-encryption"]!==void 0&&(r.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),e.headers["x-amz-version-id"]!==void 0&&(r.VersionId=e.headers["x-amz-version-id"]),e.headers["x-amz-server-side-encryption-customer-algorithm"]!==void 0&&(r.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),e.headers["x-amz-server-side-encryption-customer-key-md5"]!==void 0&&(r.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),e.headers["x-amz-server-side-encryption-aws-kms-key-id"]!==void 0&&(r.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),e.headers["x-amz-server-side-encryption-context"]!==void 0&&(r.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),e.headers["x-amz-server-side-encryption-bucket-key-enabled"]!==void 0&&(r.BucketKeyEnabled=e.headers["x-amz-server-side-encryption-bucket-key-enabled"]==="true"),e.headers["x-amz-request-charged"]!==void 0&&(r.RequestCharged=e.headers["x-amz-request-charged"]),[4,Je(e.body,t)]);case 1:return n.sent(),[2,Promise.resolve(r)]}})})},af=function(e,t){return w(void 0,void 0,void 0,function(){var r,n,i,a,o,u,d;return C(this,function(c){switch(c.label){case 0:return n=[s({},e)],d={},[4,K(e.body,t)];case 1:switch(r=s.apply(void 0,n.concat([(d.body=c.sent(),d)])),a="UnknownError",a=se(e,r.body),a){default:o=r.body,a=o.code||o.Code||a,i=s(s({},o),{name:""+a,message:o.message||o.Message||a,$fault:"client",$metadata:k(e)})}return u=i.message||i.Message||a,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}})})},sf=function(e,t){return w(void 0,void 0,void 0,function(){var r;return C(this,function(n){switch(n.label){case 0:return e.statusCode!==200&&e.statusCode>=300?[2,of(e,t)]:(r={$metadata:k(e),BucketKeyEnabled:void 0,ETag:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0},e.headers["x-amz-server-side-encryption"]!==void 0&&(r.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),e.headers.etag!==void 0&&(r.ETag=e.headers.etag),e.headers["x-amz-server-side-encryption-customer-algorithm"]!==void 0&&(r.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),e.headers["x-amz-server-side-encryption-customer-key-md5"]!==void 0&&(r.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),e.headers["x-amz-server-side-encryption-aws-kms-key-id"]!==void 0&&(r.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),e.headers["x-amz-server-side-encryption-bucket-key-enabled"]!==void 0&&(r.BucketKeyEnabled=e.headers["x-amz-server-side-encryption-bucket-key-enabled"]==="true"),e.headers["x-amz-request-charged"]!==void 0&&(r.RequestCharged=e.headers["x-amz-request-charged"]),[4,Je(e.body,t)]);case 1:return n.sent(),[2,Promise.resolve(r)]}})})},of=function(e,t){return w(void 0,void 0,void 0,function(){var r,n,i,a,o,u,d;return C(this,function(c){switch(c.label){case 0:return n=[s({},e)],d={},[4,K(e.body,t)];case 1:switch(r=s.apply(void 0,n.concat([(d.body=c.sent(),d)])),a="UnknownError",a=se(e,r.body),a){default:o=r.body,a=o.code||o.Code||a,i=s(s({},o),{name:""+a,message:o.message||o.Message||a,$fault:"client",$metadata:k(e)})}return u=i.message||i.Message||a,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}})})},uf=function(e,t){return w(void 0,void 0,void 0,function(){var r,n;return C(this,function(i){return r={name:"InvalidObjectState",$fault:"client",$metadata:k(e),AccessTier:void 0,StorageClass:void 0},n=e.body,n.AccessTier!==void 0&&(r.AccessTier=n.AccessTier),n.StorageClass!==void 0&&(r.StorageClass=n.StorageClass),[2,r]})})},qo=function(e,t){return w(void 0,void 0,void 0,function(){var r;return C(this,function(n){return r={name:"NoSuchBucket",$fault:"client",$metadata:k(e)},[2,r]})})},cf=function(e,t){return w(void 0,void 0,void 0,function(){var r;return C(this,function(n){return r={name:"NoSuchKey",$fault:"client",$metadata:k(e)},[2,r]})})},df=function(e,t){return w(void 0,void 0,void 0,function(){var r;return C(this,function(n){return r={name:"NoSuchUpload",$fault:"client",$metadata:k(e)},[2,r]})})},lf=function(e,t){return w(void 0,void 0,void 0,function(){var r;return C(this,function(n){return r={name:"ObjectNotInActiveTierError",$fault:"client",$metadata:k(e)},[2,r]})})},ff=function(e,t){var r=new nt("CompletedMultipartUpload");if(e.Parts!==void 0&&e.Parts!==null){var n=hf(e.Parts,t);n.map(function(i){i=i.withName("Part"),r.addChildNode(i)})}return r},vf=function(e,t){var r=new nt("CompletedPart");if(e.ETag!==void 0&&e.ETag!==null){var n=new nt("ETag").addChildNode(new Ns(e.ETag)).withName("ETag");r.addChildNode(n)}if(e.PartNumber!==void 0&&e.PartNumber!==null){var n=new nt("PartNumber").addChildNode(new Ns(String(e.PartNumber))).withName("PartNumber");r.addChildNode(n)}return r},hf=function(e,t){return e.filter(function(r){return r!=null}).map(function(r){if(r===null)return null;var n=vf(r);return n.withName("member")})},gf=function(e,t){var r={Prefix:void 0};return e.Prefix!==void 0&&(r.Prefix=e.Prefix),r},Fo=function(e,t){return(e||[]).filter(function(r){return r!=null}).map(function(r){return r===null?null:gf(r)})},mf=function(e,t){var r={ETag:void 0,LastModified:void 0};return e.ETag!==void 0&&(r.ETag=e.ETag),e.LastModified!==void 0&&(r.LastModified=new Date(e.LastModified)),r},pf=function(e,t){var r={ID:void 0,DisplayName:void 0};return e.ID!==void 0&&(r.ID=e.ID),e.DisplayName!==void 0&&(r.DisplayName=e.DisplayName),r},yf=function(e,t){var r={Key:void 0,LastModified:void 0,ETag:void 0,Size:void 0,StorageClass:void 0,Owner:void 0};return e.Key!==void 0&&(r.Key=e.Key),e.LastModified!==void 0&&(r.LastModified=new Date(e.LastModified)),e.ETag!==void 0&&(r.ETag=e.ETag),e.Size!==void 0&&(r.Size=parseInt(e.Size)),e.StorageClass!==void 0&&(r.StorageClass=e.StorageClass),e.Owner!==void 0&&(r.Owner=jo(e.Owner)),r},Go=function(e,t){return(e||[]).filter(function(r){return r!=null}).map(function(r){return r===null?null:yf(r)})},jo=function(e,t){var r={DisplayName:void 0,ID:void 0};return e.DisplayName!==void 0&&(r.DisplayName=e.DisplayName),e.ID!==void 0&&(r.ID=e.ID),r},Sf=function(e,t){var r={PartNumber:void 0,LastModified:void 0,ETag:void 0,Size:void 0};return e.PartNumber!==void 0&&(r.PartNumber=parseInt(e.PartNumber)),e.LastModified!==void 0&&(r.LastModified=new Date(e.LastModified)),e.ETag!==void 0&&(r.ETag=e.ETag),e.Size!==void 0&&(r.Size=parseInt(e.Size)),r},bf=function(e,t){return(e||[]).filter(function(r){return r!=null}).map(function(r){return r===null?null:Sf(r)})},k=function(e){var t;return{httpStatusCode:e.statusCode,requestId:(t=e.headers["x-amzn-requestid"])!==null&&t!==void 0?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},Je=function(e,t){return e===void 0&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},wf=function(e,t){return Je(e,t).then(function(r){return t.utf8Encoder(r)})},h=function(e){return e!=null&&e!==""&&(!Object.getOwnPropertyNames(e).includes("length")||e.length!=0)&&(!Object.getOwnPropertyNames(e).includes("size")||e.size!=0)},Cf=function(e){return e.replace(/&amp;/g,"&").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<")},K=function(e,t){return wf(e,t).then(function(r){if(r.length){var n=Bo.parse(r,{attributeNamePrefix:"",ignoreAttributes:!1,parseNodeValue:!1,tagValueProcessor:function(u,d){return Cf(u)}}),i="#text",a=Object.keys(n)[0],o=n[a];return o[i]&&(o[a]=o[i],delete o[i]),Du(o)}return{}})},se=function(e,t){return t.Code!==void 0?t.Code:e.statusCode==404?"NotFound":""},$o=function(e){ee(t,e);function t(r){var n=e.call(this)||this;return n.input=r,n}return t.prototype.resolveMiddleware=function(r,n,i){this.middlewareStack.use(ne(n,this.serialize,this.deserialize)),this.middlewareStack.use(ae(n));var a=r.concat(this.middlewareStack),o=n.logger,u="S3Client",d="AbortMultipartUploadCommand",c={logger:o,clientName:u,commandName:d,inputFilterSensitiveLog:Lt.filterSensitiveLog,outputFilterSensitiveLog:kt.filterSensitiveLog},l=n.requestHandler;return a.resolve(function(f){return l.handle(f.request,i||{})},c)},t.prototype.serialize=function(r,n){return Pl(r,n)},t.prototype.deserialize=function(r,n){return Kl(r,n)},t}(ie),Ho=function(e){ee(t,e);function t(r){var n=e.call(this)||this;return n.input=r,n}return t.prototype.resolveMiddleware=function(r,n,i){this.middlewareStack.use(ne(n,this.serialize,this.deserialize)),this.middlewareStack.use(To(n)),this.middlewareStack.use(ae(n));var a=r.concat(this.middlewareStack),o=n.logger,u="S3Client",d="CompleteMultipartUploadCommand",c={logger:o,clientName:u,commandName:d,inputFilterSensitiveLog:Pt.filterSensitiveLog,outputFilterSensitiveLog:At.filterSensitiveLog},l=n.requestHandler;return a.resolve(function(f){return l.handle(f.request,i||{})},c)},t.prototype.serialize=function(r,n){return Nl(r,n)},t.prototype.deserialize=function(r,n){return ql(r,n)},t}(ie);function Ef(e){var t=this;return function(r){return function(n){return m.exports.__awaiter(t,void 0,void 0,function(){var i,a,o,u,d,c,l,f,g,v,p,y,S,b,O,N,E;return m.exports.__generator(this,function(A){switch(A.label){case 0:i=m.exports.__assign({},n.input),a=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}],A.label=1;case 1:A.trys.push([1,6,7,8]),o=m.exports.__values(a),u=o.next(),A.label=2;case 2:return u.done?[3,5]:(d=u.value,c=i[d.target],c?(l=ArrayBuffer.isView(c)?new Uint8Array(c.buffer,c.byteOffset,c.byteLength):typeof c=="string"?e.utf8Decoder(c):new Uint8Array(c),f=e.base64Encoder(l),g=new e.md5,g.update(l),v=[m.exports.__assign({},i)],E={},E[d.target]=f,p=d.hash,S=(y=e).base64Encoder,[4,g.digest()]):[3,4]);case 3:i=m.exports.__assign.apply(void 0,v.concat([(E[p]=S.apply(y,[A.sent()]),E)])),A.label=4;case 4:return u=o.next(),[3,2];case 5:return[3,8];case 6:return b=A.sent(),O={error:b},[3,8];case 7:try{u&&!u.done&&(N=o.return)&&N.call(o)}finally{if(O)throw O.error}return[7];case 8:return[2,r(m.exports.__assign(m.exports.__assign({},n),{input:i}))]}})})}}}var xf={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},Ze=function(e){return{applyToStack:function(t){t.add(Ef(e),xf)}}},kf=function(e){ee(t,e);function t(r){var n=e.call(this)||this;return n.input=r,n}return t.prototype.resolveMiddleware=function(r,n,i){this.middlewareStack.use(ne(n,this.serialize,this.deserialize)),this.middlewareStack.use(To(n)),this.middlewareStack.use(Ze(n)),this.middlewareStack.use(ae(n));var a=r.concat(this.middlewareStack),o=n.logger,u="S3Client",d="CopyObjectCommand",c={logger:o,clientName:u,commandName:d,inputFilterSensitiveLog:_t.filterSensitiveLog,outputFilterSensitiveLog:Nt.filterSensitiveLog},l=n.requestHandler;return a.resolve(function(f){return l.handle(f.request,i||{})},c)},t.prototype.serialize=function(r,n){return _l(r,n)},t.prototype.deserialize=function(r,n){return Gl(r,n)},t}(ie),Vo=function(e){ee(t,e);function t(r){var n=e.call(this)||this;return n.input=r,n}return t.prototype.resolveMiddleware=function(r,n,i){this.middlewareStack.use(ne(n,this.serialize,this.deserialize)),this.middlewareStack.use(Ze(n)),this.middlewareStack.use(ae(n));var a=r.concat(this.middlewareStack),o=n.logger,u="S3Client",d="CreateMultipartUploadCommand",c={logger:o,clientName:u,commandName:d,inputFilterSensitiveLog:Tt.filterSensitiveLog,outputFilterSensitiveLog:Ot.filterSensitiveLog},l=n.requestHandler;return a.resolve(function(f){return l.handle(f.request,i||{})},c)},t.prototype.serialize=function(r,n){return Ol(r,n)},t.prototype.deserialize=function(r,n){return $l(r,n)},t}(ie),Lf=function(e){ee(t,e);function t(r){var n=e.call(this)||this;return n.input=r,n}return t.prototype.resolveMiddleware=function(r,n,i){this.middlewareStack.use(ne(n,this.serialize,this.deserialize)),this.middlewareStack.use(ae(n));var a=r.concat(this.middlewareStack),o=n.logger,u="S3Client",d="DeleteObjectCommand",c={logger:o,clientName:u,commandName:d,inputFilterSensitiveLog:Mt.filterSensitiveLog,outputFilterSensitiveLog:Bt.filterSensitiveLog},l=n.requestHandler;return a.resolve(function(f){return l.handle(f.request,i||{})},c)},t.prototype.serialize=function(r,n){return Tl(r,n)},t.prototype.deserialize=function(r,n){return Vl(r,n)},t}(ie),Ks=function(e){ee(t,e);function t(r){var n=e.call(this)||this;return n.input=r,n}return t.prototype.resolveMiddleware=function(r,n,i){this.middlewareStack.use(ne(n,this.serialize,this.deserialize)),this.middlewareStack.use(Ze(n)),this.middlewareStack.use(ae(n));var a=r.concat(this.middlewareStack),o=n.logger,u="S3Client",d="GetObjectCommand",c={logger:o,clientName:u,commandName:d,inputFilterSensitiveLog:Zt.filterSensitiveLog,outputFilterSensitiveLog:Jt.filterSensitiveLog},l=n.requestHandler;return a.resolve(function(f){return l.handle(f.request,i||{})},c)},t.prototype.serialize=function(r,n){return Bl(r,n)},t.prototype.deserialize=function(r,n){return Wl(r,n)},t}(ie),Af=function(e){ee(t,e);function t(r){var n=e.call(this)||this;return n.input=r,n}return t.prototype.resolveMiddleware=function(r,n,i){this.middlewareStack.use(ne(n,this.serialize,this.deserialize)),this.middlewareStack.use(ae(n));var a=r.concat(this.middlewareStack),o=n.logger,u="S3Client",d="ListObjectsCommand",c={logger:o,clientName:u,commandName:d,inputFilterSensitiveLog:Yt.filterSensitiveLog,outputFilterSensitiveLog:Qt.filterSensitiveLog},l=n.requestHandler;return a.resolve(function(f){return l.handle(f.request,i||{})},c)},t.prototype.serialize=function(r,n){return Ml(r,n)},t.prototype.deserialize=function(r,n){return Zl(r,n)},t}(ie),Pf=function(e){ee(t,e);function t(r){var n=e.call(this)||this;return n.input=r,n}return t.prototype.resolveMiddleware=function(r,n,i){this.middlewareStack.use(ne(n,this.serialize,this.deserialize)),this.middlewareStack.use(ae(n));var a=r.concat(this.middlewareStack),o=n.logger,u="S3Client",d="ListObjectsV2Command",c={logger:o,clientName:u,commandName:d,inputFilterSensitiveLog:tr.filterSensitiveLog,outputFilterSensitiveLog:er.filterSensitiveLog},l=n.requestHandler;return a.resolve(function(f){return l.handle(f.request,i||{})},c)},t.prototype.serialize=function(r,n){return Rl(r,n)},t.prototype.deserialize=function(r,n){return Yl(r,n)},t}(ie),Xo=function(e){ee(t,e);function t(r){var n=e.call(this)||this;return n.input=r,n}return t.prototype.resolveMiddleware=function(r,n,i){this.middlewareStack.use(ne(n,this.serialize,this.deserialize)),this.middlewareStack.use(ae(n));var a=r.concat(this.middlewareStack),o=n.logger,u="S3Client",d="ListPartsCommand",c={logger:o,clientName:u,commandName:d,inputFilterSensitiveLog:nr.filterSensitiveLog,outputFilterSensitiveLog:rr.filterSensitiveLog},l=n.requestHandler;return a.resolve(function(f){return l.handle(f.request,i||{})},c)},t.prototype.serialize=function(r,n){return Il(r,n)},t.prototype.deserialize=function(r,n){return tf(r,n)},t}(ie),Nf=function(e){ee(t,e);function t(r){var n=e.call(this)||this;return n.input=r,n}return t.prototype.resolveMiddleware=function(r,n,i){this.middlewareStack.use(ne(n,this.serialize,this.deserialize)),this.middlewareStack.use(Ze(n)),this.middlewareStack.use(ae(n));var a=r.concat(this.middlewareStack),o=n.logger,u="S3Client",d="PutObjectCommand",c={logger:o,clientName:u,commandName:d,inputFilterSensitiveLog:sr.filterSensitiveLog,outputFilterSensitiveLog:ar.filterSensitiveLog},l=n.requestHandler;return a.resolve(function(f){return l.handle(f.request,i||{})},c)},t.prototype.serialize=function(r,n){return zl(r,n)},t.prototype.deserialize=function(r,n){return nf(r,n)},t}(ie),Us;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Us||(Us={}));var dr;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.Encryption&&{Encryption:or.filterSensitiveLog(t.Encryption)})}})(dr||(dr={}));var lr;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.S3&&{S3:dr.filterSensitiveLog(t.S3)})}})(lr||(lr={}));var qs;(function(e){e.IGNORE="IGNORE",e.NONE="NONE",e.USE="USE"})(qs||(qs={}));var Fs;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Fs||(Fs={}));var Gs;(function(e){e.DOCUMENT="DOCUMENT",e.LINES="LINES"})(Gs||(Gs={}));var js;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(js||(js={}));var $s;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})($s||($s={}));var Hs;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Hs||(Hs={}));var Vs;(function(e){e.ALWAYS="ALWAYS",e.ASNEEDED="ASNEEDED"})(Vs||(Vs={}));var Xs;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Xs||(Xs={}));var Ws;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Ws||(Ws={}));var Js;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Js||(Js={}));var Zs;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(Zs||(Zs={}));var Qs;(function(e){e.SELECT="SELECT"})(Qs||(Qs={}));var fr;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.OutputLocation&&{OutputLocation:lr.filterSensitiveLog(t.OutputLocation)})}})(fr||(fr={}));var Ys;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.RestoreRequest&&{RestoreRequest:fr.filterSensitiveLog(t.RestoreRequest)})}})(Ys||(Ys={}));var vr;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(vr||(vr={}));var hr;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(hr||(hr={}));var eo;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(eo||(eo={}));var gr;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(gr||(gr={}));var mr;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(mr||(mr={}));var to;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(to||(to={}));var pr;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(pr||(pr={}));var ro;(function(e){e.visit=function(t,r){return t.Records!==void 0?r.Records(t.Records):t.Stats!==void 0?r.Stats(t.Stats):t.Progress!==void 0?r.Progress(t.Progress):t.Cont!==void 0?r.Cont(t.Cont):t.End!==void 0?r.End(t.End):r._(t.$unknown[0],t.$unknown[1])},e.filterSensitiveLog=function(t){var r;if(t.Records!==void 0)return{Records:mr.filterSensitiveLog(t.Records)};if(t.Stats!==void 0)return{Stats:pr.filterSensitiveLog(t.Stats)};if(t.Progress!==void 0)return{Progress:gr.filterSensitiveLog(t.Progress)};if(t.Cont!==void 0)return{Cont:vr.filterSensitiveLog(t.Cont)};if(t.End!==void 0)return{End:hr.filterSensitiveLog(t.End)};if(t.$unknown!==void 0)return r={},r[t.$unknown[0]]="UNKNOWN",r}})(ro||(ro={}));var no;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.Payload&&{Payload:"STREAMING_CONTENT"})}})(no||(no={}));var io;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(io||(io={}));var ao;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(ao||(ao={}));var so;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.SSECustomerKey&&{SSECustomerKey:L})}})(so||(so={}));var yr;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.SSEKMSKeyId&&{SSEKMSKeyId:L})}})(yr||(yr={}));var Sr;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.SSECustomerKey&&{SSECustomerKey:L})}})(Sr||(Sr={}));var oo;(function(e){e.filterSensitiveLog=function(t){return s({},t)}})(oo||(oo={}));var uo;(function(e){e.filterSensitiveLog=function(t){return s(s({},t),t.SSEKMSKeyId&&{SSEKMSKeyId:L})}})(uo||(uo={}));var co;(function(e){e.filterSensitiveLog=function(t){return s(s(s({},t),t.SSECustomerKey&&{SSECustomerKey:L}),t.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:L})}})(co||(co={}));var Wo=function(e){ee(t,e);function t(r){var n=e.call(this)||this;return n.input=r,n}return t.prototype.resolveMiddleware=function(r,n,i){this.middlewareStack.use(ne(n,this.serialize,this.deserialize)),this.middlewareStack.use(Ze(n)),this.middlewareStack.use(ae(n));var a=r.concat(this.middlewareStack),o=n.logger,u="S3Client",d="UploadPartCommand",c={logger:o,clientName:u,commandName:d,inputFilterSensitiveLog:Sr.filterSensitiveLog,outputFilterSensitiveLog:yr.filterSensitiveLog},l=n.requestHandler;return a.resolve(function(f){return l.handle(f.request,i||{})},c)},t.prototype.serialize=function(r,n){return Dl(r,n)},t.prototype.deserialize=function(r,n){return sf(r,n)},t}(ie);function _f(e){var t=e.port,r=e.query,n=e.protocol,i=e.path,a=e.hostname;n&&n.substr(-1)!==":"&&(n+=":"),t&&(a+=":"+t),i&&i.charAt(0)!=="/"&&(i="/"+i);var o=r?Co(r):"";return o&&o[0]!=="?"&&(o="?"+o),n+"//"+a+i+o}function Of(e,t){return m.exports.__awaiter(this,void 0,void 0,function(){var r,n,i,a=this;return m.exports.__generator(this,function(o){switch(o.label){case 0:return r=function(u){return function(d){return m.exports.__awaiter(a,void 0,void 0,function(){return m.exports.__generator(this,function(c){return[2,{output:{request:d.request},response:void 0}]})})}},n=e.middlewareStack.clone(),n.add(r,{step:"build",priority:"low"}),i=t.resolveMiddleware(n,e.config,void 0),[4,i(t).then(function(u){return u.output.request})];case 1:return[2,o.sent()]}})})}var Tf="UNSIGNED-PAYLOAD",Bf="X-Amz-Content-Sha256",Mf=function(){function e(t){var r=m.exports.__assign({service:t.signingName||t.service||"s3",uriEscapePath:t.uriEscapePath||!1},t);this.signer=new Ku(r)}return e.prototype.presign=function(t,r){r===void 0&&(r={});var n=r.unsignableHeaders,i=n===void 0?new Set:n,a=r.unhoistableHeaders,o=a===void 0?new Set:a,u=m.exports.__rest(r,["unsignableHeaders","unhoistableHeaders"]);return m.exports.__awaiter(this,void 0,void 0,function(){return m.exports.__generator(this,function(d){return i.add("content-type"),Object.keys(t.headers).map(function(c){return c.toLowerCase()}).filter(function(c){return c.startsWith("x-amz-server-side-encryption")}).forEach(function(c){o.add(c)}),t.headers[Bf]=Tf,t.headers.host||(t.headers.host=t.hostname),[2,this.signer.presign(t,m.exports.__assign({expiresIn:900,unsignableHeaders:i,unhoistableHeaders:o},u))]})})},e}(),ge;(function(e){e.NO_CREDENTIALS="No credentials",e.NO_SRC_KEY='source param should be an object with the property "key" with value of type string',e.NO_DEST_KEY='destination param should be an object with the property "key" with value of type string',e.INVALID_BLOB="Object must be an instance of Blob"})(ge||(ge={}));var lo;(function(e){e.CLEANUP_FAILED="Multipart copy clean up failed",e.NO_OBJECT_FOUND="Object does not exist",e.INVALID_QUEUESIZE="Queue size must be a positive number",e.NO_COPYSOURCE="You must specify a copy source",e.MAX_NUM_PARTS_EXCEEDED="Only a maximum of 10000 parts are allowed"})(lo||(lo={}));var Xe;(function(e){e.UPLOAD_PAUSED_MESSAGE="paused"})(Xe||(Xe={}));var Rf=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},If=globalThis&&globalThis.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(u){o={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},bt=new Ne("axios-http-handler"),qe="sendUploadProgress",ct="sendDownloadProgress";function zf(e){return typeof Blob!="undefined"&&e instanceof Blob}var fo=function(e,t){var r,n;try{for(var i=Rf(Object.entries(e)),a=i.next();!a.done;a=i.next()){var o=If(a.value,2),u=o[0],d=o[1];u!==t&&u.toUpperCase()===t.toUpperCase()&&(e[t]=d,delete e[u])}}catch(c){r={error:c}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},Df=[function(e,t){return zf(e)?(fo(t,"Content-Type"),fo(t,"Accept"),e):Ce.defaults.transformRequest[0].call(null,e,t)}],Kf=function(){function e(t,r,n){t===void 0&&(t={}),this.httpOptions=t,this.emitter=r,this.cancelTokenSource=n}return e.prototype.destroy=function(){},e.prototype.handle=function(t,r){var n=this.httpOptions.requestTimeout,i=r.emitter||this.emitter,a=t.path;if(t.query){var o=Co(t.query);o&&(a+="?"+o)}var u=t.port,d=t.protocol+"//"+t.hostname+(u?":"+u:"")+a,c={};c.url=d,c.method=t.method,c.headers=t.headers,delete c.headers.host,t.body?c.data=t.body:c.headers[Object.keys(c.headers).find(function(f){return f.toLowerCase()==="content-type"})]&&(c.data=null),i&&(c.onUploadProgress=function(f){i.emit(qe,f),bt.debug(f)},c.onDownloadProgress=function(f){i.emit(ct,f),bt.debug(f)}),this.cancelTokenSource&&(c.cancelToken=this.cancelTokenSource.token),r.cancelTokenSource&&(c.cancelToken=r.cancelTokenSource.token),c.responseType="blob",Uu.isReactNative&&(c.transformRequest=Df);var l=[Ce.request(c).then(function(f){return{response:new Et({headers:f.headers,statusCode:f.status,body:f.data})}}).catch(function(f){var g,v,p;if(f.message!==Xe.UPLOAD_PAUSED_MESSAGE&&bt.error(f.message),Ce.isCancel(f))throw f;return{response:new Et({statusCode:(g=f.response)===null||g===void 0?void 0:g.status,body:(v=f.response)===null||v===void 0?void 0:v.data,headers:(p=f.response)===null||p===void 0?void 0:p.headers})}}),Uf(n)];return Promise.race(l)},e}();function Uf(e){return e===void 0&&(e=0),new Promise(function(t,r){e&&setTimeout(function(){var n=new Error("Request did not complete within "+e+" ms");n.name="TimeoutError",r(n)},e)})}var qf=typeof Symbol!="undefined"&&typeof Symbol.for=="function"?Symbol.for("amplify_default"):"@@amplify_default",Jo="contentLengthMiddleware",Ff="http://localhost:20005",Ue="__uploadInProgress",Gf=function(e){if(typeof e=="string")return e.length;if(Hf(e))return e.byteLength;if($f(e))return e.size;throw new Error("Cannot determine byte length of "+e)},X=function(e,t,r,n,i){if(e){var a={attrs:r};n&&(a.metrics=n),Eo.dispatch("storage",{event:t,data:a,message:i},"Storage",qf)}},jf=function(e){return typeof e!="undefined"&&e instanceof File},$f=function(e){return typeof e!="undefined"&&e instanceof Blob},Hf=function(e){return typeof e!="undefined"&&e instanceof ArrayBuffer},Me=globalThis&&globalThis.__assign||function(){return Me=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Me.apply(this,arguments)},Er=globalThis&&globalThis.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function u(l){try{c(n.next(l))}catch(f){o(f)}}function d(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?a(l.value):i(l.value).then(u,d)}c((n=n.apply(e,t||[])).next())})},xr=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(c){return function(l){return d([c,l])}}function d(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},vo=new Ne("S3ClientUtils"),ho={accessKeyId:"",secretAccessKey:""},Zo=function(e){var t=e.credentials,r=e.level,n=e.customPrefix,i=e.identityId,a=n||{},o=i||t.identityId,u=(a.private!==void 0?a.private:"private/")+o+"/",d=(a.protected!==void 0?a.protected:"protected/")+o+"/",c=a.public!==void 0?a.public:"public/";switch(r){case"private":return u;case"protected":return d;default:return c}},Qo=function(e,t){return function(r,n){return function(i){return Er(void 0,void 0,void 0,function(){var a,o,u,d,c;return xr(this,function(l){switch(l.label){case 0:return[4,we.get()];case 1:return a=l.sent(),o=we.shear(a),u=Zo(Me(Me({},e),{credentials:o})),d=Object.assign({},i.input),Object.prototype.hasOwnProperty.call(i.input,"Key")?(d.Key=u+t,i.input=d):Object.prototype.hasOwnProperty.call(i.input,"Prefix")&&(d.Prefix=u+t,i.input=d),c=r(i),[2,c]}})})}}},Vf=function(e){return e.ServerTime&&typeof e.Code=="string"&&e.Code==="RequestTimeTooSkewed"},Yo=function(e){return function(t,r){return function(n){return Er(void 0,void 0,void 0,function(){var i,a;return xr(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,t(n)];case 1:return[2,o.sent()];case 2:throw i=o.sent(),Vf(i)&&(a=new Date(i.ServerTime),e.systemClockOffset=a.getTime()-Date.now()),i;case 3:return[2]}})})}}},eu={step:"finalizeRequest",name:"autoAdjustClockskewMiddleware"},tu={step:"initialize",name:"addPrefixMiddleware"},Xf=function(){return Er(void 0,void 0,void 0,function(){var e,t,r;return xr(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,we.get()];case 1:return e=n.sent(),e?(t=we.shear(e),vo.debug("credentials provider get credentials",t),[2,t]):[2,ho];case 2:return r=n.sent(),vo.warn("credentials provider error",r),[2,ho];case 3:return[2]}})})},ru=function(e,t){var r=e.region,n=e.cancelTokenSource,i=e.dangerouslyConnectToHttpEndpointForTesting,a=e.useAccelerateEndpoint,o={};i&&(o={endpoint:Ff,tls:!1,bucketEndpoint:!1,forcePathStyle:!0});var u=new zd(Me(Me({region:r,credentials:Xf,customUserAgent:qu()},o),{requestHandler:new Kf({},t,n),useAccelerateEndpoint:a}));return u.middlewareStack.remove(Jo),u},We={exports:{}},Te=typeof Reflect=="object"?Reflect:null,go=Te&&typeof Te.apply=="function"?Te.apply:function(t,r,n){return Function.prototype.apply.call(t,r,n)},it;Te&&typeof Te.ownKeys=="function"?it=Te.ownKeys:Object.getOwnPropertySymbols?it=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:it=function(t){return Object.getOwnPropertyNames(t)};function Wf(e){console&&console.warn&&console.warn(e)}var nu=Number.isNaN||function(t){return t!==t};function P(){P.init.call(this)}We.exports=P;We.exports.once=Yf;P.EventEmitter=P;P.prototype._events=void 0;P.prototype._eventsCount=0;P.prototype._maxListeners=void 0;var mo=10;function ht(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(P,"defaultMaxListeners",{enumerable:!0,get:function(){return mo},set:function(e){if(typeof e!="number"||e<0||nu(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");mo=e}});P.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};P.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||nu(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function iu(e){return e._maxListeners===void 0?P.defaultMaxListeners:e._maxListeners}P.prototype.getMaxListeners=function(){return iu(this)};P.prototype.emit=function(t){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=t==="error",a=this._events;if(a!==void 0)i=i&&a.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var u=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw u.context=o,u}var d=a[t];if(d===void 0)return!1;if(typeof d=="function")go(d,this,r);else for(var c=d.length,l=cu(d,c),n=0;n<c;++n)go(l[n],this,r);return!0};function au(e,t,r,n){var i,a,o;if(ht(r),a=e._events,a===void 0?(a=e._events=Object.create(null),e._eventsCount=0):(a.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),o=a[t]),o===void 0)o=a[t]=r,++e._eventsCount;else if(typeof o=="function"?o=a[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=iu(e),i>0&&o.length>i&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=o.length,Wf(u)}return e}P.prototype.addListener=function(t,r){return au(this,t,r,!1)};P.prototype.on=P.prototype.addListener;P.prototype.prependListener=function(t,r){return au(this,t,r,!0)};function Jf(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function su(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=Jf.bind(n);return i.listener=r,n.wrapFn=i,i}P.prototype.once=function(t,r){return ht(r),this.on(t,su(this,t,r)),this};P.prototype.prependOnceListener=function(t,r){return ht(r),this.prependListener(t,su(this,t,r)),this};P.prototype.removeListener=function(t,r){var n,i,a,o,u;if(ht(r),i=this._events,i===void 0)return this;if(n=i[t],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||r));else if(typeof n!="function"){for(a=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){u=n[o].listener,a=o;break}if(a<0)return this;a===0?n.shift():Zf(n,a),n.length===1&&(i[t]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",t,u||r)}return this};P.prototype.off=P.prototype.removeListener;P.prototype.removeAllListeners=function(t){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var a=Object.keys(n),o;for(i=0;i<a.length;++i)o=a[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(t,r[i]);return this};function ou(e,t,r){var n=e._events;if(n===void 0)return[];var i=n[t];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?Qf(i):cu(i,i.length)}P.prototype.listeners=function(t){return ou(this,t,!0)};P.prototype.rawListeners=function(t){return ou(this,t,!1)};P.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):uu.call(e,t)};P.prototype.listenerCount=uu;function uu(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}P.prototype.eventNames=function(){return this._eventsCount>0?it(this._events):[]};function cu(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function Zf(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function Qf(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function Yf(e,t){return new Promise(function(r,n){function i(o){e.removeListener(t,a),n(o)}function a(){typeof e.removeListener=="function"&&e.removeListener("error",i),r([].slice.call(arguments))}du(e,t,a,{once:!0}),t!=="error"&&ev(e,i,{once:!0})})}function ev(e,t,r){typeof e.on=="function"&&du(e,"error",t,r)}function du(e,t,r,n){if(typeof e.on=="function")n.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(a){n.once&&e.removeEventListener(t,i),r(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var Fe=globalThis&&globalThis.__assign||function(){return Fe=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Fe.apply(this,arguments)},pe=globalThis&&globalThis.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function u(l){try{c(n.next(l))}catch(f){o(f)}}function d(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?a(l.value):i(l.value).then(u,d)}c((n=n.apply(e,t||[])).next())})},ye=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(c){return function(l){return d([c,l])}}function d(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},wt=new Ne("AWSS3ProviderManagedUpload"),tv=function(){function e(t,r,n){this.minPartSize=5*1024*1024,this.queueSize=4,this.body=null,this.params=null,this.opts=null,this.completedParts=[],this.cancel=!1,this.bytesUploaded=0,this.totalBytesToUpload=0,this.emitter=null,this.params=t,this.opts=r,this.emitter=n,this.s3client=this._createNewS3Client(r,n)}return e.prototype.upload=function(){return pe(this,void 0,void 0,function(){var t,r,n,i,a,o,u=this;return ye(this,function(d){switch(d.label){case 0:return t=this,[4,this.validateAndSanitizeBody(this.params.Body)];case 1:return t.body=d.sent(),this.totalBytesToUpload=this.byteLength(this.body),this.totalBytesToUpload<=this.minPartSize?(this.params.Body=this.body,r=new Nf(this.params),[2,this.s3client.send(r)]):[3,2];case 2:return[4,this.createMultiPartUpload()];case 3:n=d.sent(),i=Math.ceil(this.totalBytesToUpload/this.minPartSize),a=this.createParts(),o=0,d.label=4;case 4:return o<i?[4,this.checkIfUploadCancelled(n)]:[3,9];case 5:return d.sent(),[4,this.uploadParts(n,a.slice(o,o+this.queueSize))];case 6:return d.sent(),[4,this.checkIfUploadCancelled(n)];case 7:d.sent(),d.label=8;case 8:return o+=this.queueSize,[3,4];case 9:return a.map(function(c){u.removeEventListener(c)}),[4,this.finishMultiPartUpload(n)];case 10:return[2,d.sent()]}})})},e.prototype.createParts=function(){for(var t=[],r=0;r<this.totalBytesToUpload;){var n=Math.min(r+this.minPartSize,this.totalBytesToUpload);t.push({bodyPart:this.body.slice(r,n),partNumber:t.length+1,emitter:new We.exports.EventEmitter,_lastUploadedBytes:0}),r+=this.minPartSize}return t},e.prototype.createMultiPartUpload=function(){return pe(this,void 0,void 0,function(){var t,r;return ye(this,function(n){switch(n.label){case 0:return t=new Vo(this.params),[4,this.s3client.send(t)];case 1:return r=n.sent(),wt.debug(r.UploadId),[2,r.UploadId]}})})},e.prototype.uploadParts=function(t,r){return pe(this,void 0,void 0,function(){var n,i,a,o=this;return ye(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Promise.all(r.map(function(d){return pe(o,void 0,void 0,function(){var c,l,f,g,v,p,y,S;return ye(this,function(b){switch(b.label){case 0:return this.setupEventListener(d),c={emitter:d.emitter},l=this.params,f=l.Key,g=l.Bucket,v=l.SSECustomerAlgorithm,p=l.SSECustomerKey,y=l.SSECustomerKeyMD5,[4,this.s3client.send(new Wo(Fe(Fe(Fe({PartNumber:d.partNumber,Body:d.bodyPart,UploadId:t,Key:f,Bucket:g},v&&{SSECustomerAlgorithm:v}),p&&{SSECustomerKey:p}),y&&{SSECustomerKeyMD5:y})),c)];case 1:return S=b.sent(),[2,S]}})})}))];case 1:for(n=u.sent(),i=0;i<n.length;i++)this.completedParts.push({PartNumber:r[i].partNumber,ETag:n[i].ETag});return[3,3];case 2:return a=u.sent(),wt.error("error happened while uploading a part. Cancelling the multipart upload",a),this.cancelUpload(),[2];case 3:return[2]}})})},e.prototype.finishMultiPartUpload=function(t){return pe(this,void 0,void 0,function(){var r,n,i,a;return ye(this,function(o){switch(o.label){case 0:r={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:t,MultipartUpload:{Parts:this.completedParts}},n=new Ho(r),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.s3client.send(n)];case 2:return i=o.sent(),[2,i.Key];case 3:return a=o.sent(),wt.error("error happened while finishing the upload. Cancelling the multipart upload",a),this.cancelUpload(),[2];case 4:return[2]}})})},e.prototype.checkIfUploadCancelled=function(t){return pe(this,void 0,void 0,function(){var r,n;return ye(this,function(i){switch(i.label){case 0:if(!this.cancel)return[3,5];r="Upload was cancelled.",i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.cleanup(t)];case 2:return i.sent(),[3,4];case 3:return n=i.sent(),r+=" "+n.message,[3,4];case 4:throw new Error(r);case 5:return[2]}})})},e.prototype.cancelUpload=function(){this.cancel=!0},e.prototype.cleanup=function(t){return pe(this,void 0,void 0,function(){var r,n;return ye(this,function(i){switch(i.label){case 0:return this.body=null,this.completedParts=[],this.bytesUploaded=0,this.totalBytesToUpload=0,r={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:t},[4,this.s3client.send(new $o(r))];case 1:return i.sent(),[4,this.s3client.send(new Xo(r))];case 2:if(n=i.sent(),n&&n.Parts&&n.Parts.length>0)throw new Error("Multi Part upload clean up failed");return[2]}})})},e.prototype.removeEventListener=function(t){t.emitter.removeAllListeners(qe),t.emitter.removeAllListeners(ct)},e.prototype.setupEventListener=function(t){var r=this;t.emitter.on(qe,function(n){r.progressChanged(t.partNumber,n.loaded-t._lastUploadedBytes),t._lastUploadedBytes=n.loaded})},e.prototype.progressChanged=function(t,r){this.bytesUploaded+=r,this.emitter.emit(qe,{loaded:this.bytesUploaded,total:this.totalBytesToUpload,part:t,key:this.params.Key})},e.prototype.byteLength=function(t){if(t==null)return 0;if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.length=="number")return t.length;if(typeof t.size=="number")return t.size;if(typeof t.path!="string")throw new Error("Cannot determine length of "+t)},e.prototype.validateAndSanitizeBody=function(t){return pe(this,void 0,void 0,function(){return ye(this,function(r){return this.isGenericObject(t)?[2,JSON.stringify(t)]:[2,t]})})},e.prototype.isGenericObject=function(t){if(t!==null&&typeof t=="object")try{return!(this.byteLength(t)>=0)}catch{return!0}return!1},e.prototype._createNewS3Client=function(t,r){var n=ru(t,r);return n.middlewareStack.add(Qo(this.opts,this.params.Key),tu),n.middlewareStack.add(Yo(n.config),eu),n},e}(),W=globalThis&&globalThis.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function u(l){try{c(n.next(l))}catch(f){o(f)}}function d(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?a(l.value):i(l.value).then(u,d)}c((n=n.apply(e,t||[])).next())})},J=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(c){return function(l){return d([c,l])}}function d(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},rv=globalThis&&globalThis.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(u){o={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},nv=globalThis&&globalThis.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(rv(arguments[t]));return e},H=new Ne("AWSS3UploadTask"),T;(function(e){e[e.INIT=0]="INIT",e[e.IN_PROGRESS=1]="IN_PROGRESS",e[e.PAUSED=2]="PAUSED",e[e.CANCELLED=3]="CANCELLED",e[e.COMPLETED=4]="COMPLETED"})(T||(T={}));var re;(function(e){e.CANCEL="cancel",e.UPLOAD_COMPLETE="uploadComplete",e.UPLOAD_PROGRESS="uploadPartProgress",e.ERROR="error"})(re||(re={}));var po=1e4,iv=5*1024*1024,av=4;function sv(e,t){return e.PartNumber-t.PartNumber}var lu=function(){function e(t){var r=t.s3Client,n=t.file,i=t.emitter,a=t.storage,o=t.params,u=t.level,d=t.prefixPromise;this.partSize=iv,this.queueSize=av,this.inProgress=[],this.completedParts=[],this.queued=[],this.bytesUploaded=0,this.totalBytes=0,this.state=T.INIT,this.prefixPromise=d,this.s3client=r,this.s3client.middlewareStack.remove(Jo),this.storage=a,this.storageSync=Promise.resolve(),typeof this.storage.sync=="function"&&(this.storageSync=this.storage.sync()),this.params=o,this.file=n,this.totalBytes=this.file.size,this.bytesUploaded=0,this.emitter=i,this.queued=[],this.fileId=this._getFileId(u),this._validateParams(),this.emitter.on(re.ERROR,function(){})}return Object.defineProperty(e.prototype,"percent",{get:function(){return this.bytesUploaded/this.totalBytes*100},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInProgress",{get:function(){return this.state===T.IN_PROGRESS},enumerable:!0,configurable:!0}),e.prototype._listSingleFile=function(t){var r=t.key,n=t.bucket;return W(this,void 0,void 0,function(){var i,a,o,u,d;return J(this,function(c){switch(c.label){case 0:return[4,this.s3client.send(new Pf({Bucket:n,Prefix:r}))];case 1:return i=c.sent(),a=i.Contents,o=a===void 0?[]:a,[4,this.prefixPromise];case 2:return u=c.sent(),d=o.find(function(l){return l.Key===""+u+r}),[2,d]}})})},e.prototype._getFileId=function(t){return jf(this.file)?[this.file.name,this.file.lastModified,this.file.size,this.file.type,this.params.Bucket,t,this.params.Key].join("-"):[this.file.size,this.file.type,this.params.Bucket,t,this.params.Key].join("-")},e.prototype._findCachedUploadParts=function(){return W(this,void 0,void 0,function(){var t,r,n;return J(this,function(i){switch(i.label){case 0:return[4,this._listCachedUploadTasks()];case 1:return t=i.sent(),Object.keys(t).length===0||!Object.prototype.hasOwnProperty.call(t,this.fileId)?[2,{parts:[],uploadId:null}]:(r=t[this.fileId],r.lastTouched=Date.now(),this.storage.setItem(Ue,JSON.stringify(t)),[4,this.s3client.send(new Xo({Bucket:this.params.Bucket,Key:this.params.Key,UploadId:r.uploadId}))]);case 2:return n=i.sent(),[2,{parts:n.Parts||[],uploadId:r.uploadId}]}})})},e.prototype._emitEvent=function(t,r){this.emitter.emit(t,r)},e.prototype._validateParams=function(){if(this.file.size/this.partSize>po)throw new Error("Too many parts. Number of parts is "+this.file.size/this.partSize+", maximum is "+po+".")},e.prototype._listCachedUploadTasks=function(){return W(this,void 0,void 0,function(){var t;return J(this,function(r){switch(r.label){case 0:return[4,this.storageSync];case 1:return r.sent(),t=this.storage.getItem(Ue)||"{}",[2,JSON.parse(t)]}})})},e.prototype._cache=function(t){return W(this,void 0,void 0,function(){var r;return J(this,function(n){switch(n.label){case 0:return[4,this._listCachedUploadTasks()];case 1:return r=n.sent(),r[this.fileId]=t,this.storage.setItem(Ue,JSON.stringify(r)),[2]}})})},e.prototype._isCached=function(){return W(this,void 0,void 0,function(){var t,r;return J(this,function(n){switch(n.label){case 0:return r=(t=Object.prototype.hasOwnProperty).call,[4,this._listCachedUploadTasks()];case 1:return[2,r.apply(t,[n.sent(),this.fileId])]}})})},e.prototype._removeFromCache=function(){return W(this,void 0,void 0,function(){var t;return J(this,function(r){switch(r.label){case 0:return[4,this._listCachedUploadTasks()];case 1:return t=r.sent(),delete t[this.fileId],this.storage.setItem(Ue,JSON.stringify(t)),[2]}})})},e.prototype._onPartUploadCompletion=function(t){var r=t.eTag,n=t.partNumber,i=t.chunk;return W(this,void 0,void 0,function(){return J(this,function(a){return this.completedParts.push({ETag:r,PartNumber:n}),this.bytesUploaded+=Gf(i),this._emitEvent(re.UPLOAD_PROGRESS,{loaded:this.bytesUploaded,total:this.totalBytes}),this.inProgress=this.inProgress.filter(function(o){return o.uploadPartInput.PartNumber!==n}),this.queued.length&&this.state!==T.PAUSED&&this._startNextPart(),this._isDone()&&this._completeUpload(),[2]})})},e.prototype._completeUpload=function(){return W(this,void 0,void 0,function(){var t;return J(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.s3client.send(new Ho({Bucket:this.params.Bucket,Key:this.params.Key,UploadId:this.uploadId,MultipartUpload:{Parts:this.completedParts.sort(sv)}}))];case 1:return r.sent(),this._verifyFileSize(),this._emitEvent(re.UPLOAD_COMPLETE,{key:this.params.Bucket+"/"+this.params.Key}),this._removeFromCache(),this.state=T.COMPLETED,[3,3];case 2:return t=r.sent(),H.error("error completing upload",t),this._emitEvent(re.ERROR,t),[3,3];case 3:return[2]}})})},e.prototype._makeUploadPartRequest=function(t,r){return W(this,void 0,void 0,function(){var n,i;return J(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,this.s3client.send(new Wo(t),{cancelTokenSource:r})];case 1:return n=a.sent(),[4,this._onPartUploadCompletion({eTag:n.ETag,partNumber:t.PartNumber,chunk:t.Body})];case 2:return a.sent(),[3,4];case 3:return i=a.sent(),this.state===T.PAUSED?H.log("upload paused"):this.state===T.CANCELLED?H.log("upload aborted"):H.error("error starting next part of upload: ",i),!Ce.isCancel(i)&&i.message!==Xe.UPLOAD_PAUSED_MESSAGE&&(this._emitEvent(re.ERROR,i),this.pause()),[3,4];case 4:return[2]}})})},e.prototype._startNextPart=function(){if(this.queued.length>0&&this.state!==T.PAUSED){var t=Ce.CancelToken.source(),r=this.queued.shift();this.inProgress.push({uploadPartInput:r,s3Request:this._makeUploadPartRequest(r,t),cancel:t.cancel})}},e.prototype._verifyFileSize=function(){return W(this,void 0,void 0,function(){var t,r;return J(this,function(n){switch(n.label){case 0:return[4,this._listSingleFile({key:this.params.Key,bucket:this.params.Bucket})];case 1:if(t=n.sent(),r=Boolean(t&&t.Size===this.file.size),!r)throw new Error("File size does not match between local file and file on s3");return[2,r]}})})},e.prototype._isDone=function(){return!this.queued.length&&!this.inProgress.length&&this.bytesUploaded===this.totalBytes},e.prototype._createParts=function(){for(var t=this.file.size,r=[],n=0;n<t;){var i=Math.min(n+this.partSize,t);r.push({Body:this.file.slice(n,i),Key:this.params.Key,Bucket:this.params.Bucket,PartNumber:r.length+1,UploadId:this.uploadId}),n+=this.partSize}return r},e.prototype._initCachedUploadParts=function(t){this.bytesUploaded+=t.reduce(function(n,i){return n+i.Size},0);var r=new Set(t.map(function(n){return n.PartNumber}));this.queued=this.queued.filter(function(n){return!r.has(n.PartNumber)}),this.completedParts=t.map(function(n){return{PartNumber:n.PartNumber,ETag:n.ETag}}),this._emitEvent(re.UPLOAD_PROGRESS,{loaded:this.bytesUploaded,total:this.totalBytes})},e.prototype._initMultipartUpload=function(){return W(this,void 0,void 0,function(){var t;return J(this,function(r){switch(r.label){case 0:return[4,this.s3client.send(new Vo(this.params))];case 1:return t=r.sent(),this._cache({uploadId:t.UploadId,lastTouched:Date.now(),bucket:this.params.Bucket,key:this.params.Key,fileName:this.file instanceof File?this.file.name:""}),[2,t.UploadId]}})})},e.prototype._initializeUploadTask=function(){return W(this,void 0,void 0,function(){var t,r,n,n,i;return J(this,function(a){switch(a.label){case 0:this.state=T.IN_PROGRESS,a.label=1;case 1:return a.trys.push([1,7,,8]),[4,this._isCached()];case 2:return a.sent()?[4,this._findCachedUploadParts()]:[3,4];case 3:return t=a.sent(),r=t.parts,n=t.uploadId,this.uploadId=n,this.queued=this._createParts(),this._initCachedUploadParts(r),this._startUpload(),[3,6];case 4:return this.uploadId?[3,6]:[4,this._initMultipartUpload()];case 5:n=a.sent(),this.uploadId=n,this.queued=this._createParts(),this._startUpload(),a.label=6;case 6:return[3,8];case 7:return i=a.sent(),Ce.isCancel(i)||H.error("Error initializing the upload task",i),[3,8];case 8:return[2]}})})},e.prototype.resume=function(){this.state===T.CANCELLED?H.warn("This task has already been cancelled"):this.state===T.COMPLETED?H.warn("This task has already been completed"):this.state===T.IN_PROGRESS?H.warn("Upload task already in progress"):this.uploadId?this._startUpload():this._initializeUploadTask()},e.prototype._startUpload=function(){this.state=T.IN_PROGRESS;for(var t=0;t<this.queueSize;t++)this._startNextPart()},e.prototype._cancel=function(){return W(this,void 0,void 0,function(){var t;return J(this,function(r){switch(r.label){case 0:return this.state!==T.CANCELLED?[3,1]:(H.warn("This task has already been cancelled"),[2,!1]);case 1:return this.state!==T.COMPLETED?[3,2]:(H.warn("This task has already been completed"),[2,!1]);case 2:this.pause(),this.queued=[],this.completedParts=[],this.bytesUploaded=0,this.state=T.CANCELLED,r.label=3;case 3:return r.trys.push([3,6,,7]),[4,this.s3client.send(new $o({Bucket:this.params.Bucket,Key:this.params.Key,UploadId:this.uploadId}))];case 4:return r.sent(),[4,this._removeFromCache()];case 5:return r.sent(),[2,!0];case 6:return t=r.sent(),H.error("Error cancelling upload task",t),[2,!1];case 7:return[2]}})})},e.prototype.pause=function(){var t;this.state===T.CANCELLED?H.warn("This task has already been cancelled"):this.state===T.COMPLETED?H.warn("This task has already been completed"):this.state===T.PAUSED&&H.warn("This task is already paused"),this.state=T.PAUSED;var r=this.inProgress.splice(0,this.inProgress.length);r.forEach(function(n){n.cancel(Xe.UPLOAD_PAUSED_MESSAGE)}),(t=this.queued).unshift.apply(t,nv(r.map(function(n){return n.uploadPartInput})))},e}(),ce=globalThis&&globalThis.__assign||function(){return ce=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ce.apply(this,arguments)},ze=globalThis&&globalThis.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function u(l){try{c(n.next(l))}catch(f){o(f)}}function d(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?a(l.value):i(l.value).then(u,d)}c((n=n.apply(e,t||[])).next())})},De=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(c){return function(l){return d([c,l])}}function d(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},M=new Ne("AWSS3Provider"),yo="public",ov=900,uv=function(){function e(t){var r=this;this._config=t||{},this._storage=new Fu().getStorage(),Eo.listen("auth",function(n){var i=n.payload;(i.event==="signOut"||i.event==="signIn")&&r._storage.removeItem(Ue)}),M.debug("Storage Options",this._config)}return e.prototype.getCategory=function(){return e.CATEGORY},e.prototype.getProviderName=function(){return e.PROVIDER_NAME},e.prototype.configure=function(t){if(M.debug("configure Storage",t),!t)return this._config;var r=xo.parseMobilehubConfig(t);return this._config=Object.assign({},this._config,r.Storage),this._config.bucket||M.debug("Do not have bucket yet"),this._config},e.prototype.startResumableUpload=function(t,r){var n=t.s3Client,i=t.emitter,a=t.key,o=t.file,u=t.params,d=r.progressCallback,c=r.completeCallback,l=r.errorCallback,f=r.track,g=f===void 0?!1:f;if(!(o instanceof Blob))throw new Error(ge.INVALID_BLOB);i.on(re.UPLOAD_PROGRESS,function(y){d&&(typeof d=="function"?d(y):M.warn("progressCallback should be a function, not a "+typeof d))}),i.on(re.UPLOAD_COMPLETE,function(y){c&&(typeof c=="function"?c(y):M.warn("completeCallback should be a function, not a "+typeof c))}),i.on(re.ERROR,function(y){l&&(typeof l=="function"?l(y):M.warn("errorCallback should be a function, not a "+typeof l))});var v=we.get().then(function(y){var S=we.shear(y);return Zo(ce(ce({},r),{credentials:S}))}),p=new lu({s3Client:n,file:o,emitter:i,level:r.level,storage:this._storage,params:u,prefixPromise:v});return X(g,"upload",{method:"put",result:"success"},null,"Upload Task created successfully for "+a),p.resume(),p},e.prototype.copy=function(t,r,n){return ze(this,void 0,void 0,function(){var i,a,o,u,d,c,l,f,g,v,p,y,S,b,O,N,E,A,x,fe,_,j,Q,B,te,$;return De(this,function(Y){switch(Y.label){case 0:return[4,this._ensureCredentials()];case 1:if(i=Y.sent(),!i||!this._isWithCredentials(this._config))throw new Error(ge.NO_CREDENTIALS);if(a=Object.assign({},this._config,n),o=a.acl,u=a.bucket,d=a.cacheControl,c=a.expires,l=a.track,f=a.serverSideEncryption,g=a.SSECustomerAlgorithm,v=a.SSECustomerKey,p=a.SSECustomerKeyMD5,y=a.SSEKMSKeyId,S=t.level,b=S===void 0?yo:S,O=t.identityId,N=t.key,E=r.level,A=E===void 0?yo:E,x=r.key,!N||typeof N!="string")throw new Error(ge.NO_SRC_KEY);if(!x||typeof x!="string")throw new Error(ge.NO_DEST_KEY);b!=="protected"&&O&&M.warn(`You may copy files from another user if the source level is "protected", currently it's `+b),fe=this._prefix(ce(ce(ce({},a),{level:b}),O&&{identityId:O})),_=this._prefix(ce(ce({},a),{level:A})),j=u+"/"+fe+N,Q=""+_+x,M.debug("copying "+j+" to "+Q),B={Bucket:u,CopySource:j,Key:Q,MetadataDirective:"COPY"},d&&(B.CacheControl=d),c&&(B.Expires=c),f&&(B.ServerSideEncryption=f),g&&(B.SSECustomerAlgorithm=g),v&&(B.SSECustomerKey=v),p&&(B.SSECustomerKeyMD5=p),y&&(B.SSEKMSKeyId=y),o&&(B.ACL=o),te=this._createNewS3Client(a),Y.label=2;case 2:return Y.trys.push([2,4,,5]),[4,te.send(new kf(B))];case 3:return Y.sent(),X(l,"copy",{method:"copy",result:"success"},null,"Copy success from "+N+" to "+x),[2,{key:x}];case 4:throw $=Y.sent(),X(l,"copy",{method:"copy",result:"failed"},null,"Copy failed from "+N+" to "+x),$;case 5:return[2]}})})},e.prototype.get=function(t,r){return ze(this,void 0,void 0,function(){var n,i,a,o,u,d,c,l,f,g,v,p,y,S,b,O,N,E,A,x,fe,_,j,Q,B,te,$,Y;return De(this,function(oe){switch(oe.label){case 0:return[4,this._ensureCredentials()];case 1:if(n=oe.sent(),!n||!this._isWithCredentials(this._config))throw new Error(ge.NO_CREDENTIALS);if(i=Object.assign({},this._config,r),a=i.bucket,o=i.download,u=i.cacheControl,d=i.contentDisposition,c=i.contentEncoding,l=i.contentLanguage,f=i.contentType,g=i.expires,v=i.track,p=i.SSECustomerAlgorithm,y=i.SSECustomerKey,S=i.SSECustomerKeyMD5,b=i.progressCallback,O=this._prefix(i),N=O+t,E=new We.exports.EventEmitter,A=this._createNewS3Client(i,E),M.debug("get "+t+" from "+N),x={Bucket:a,Key:N},u&&(x.ResponseCacheControl=u),d&&(x.ResponseContentDisposition=d),c&&(x.ResponseContentEncoding=c),l&&(x.ResponseContentLanguage=l),f&&(x.ResponseContentType=f),p&&(x.SSECustomerAlgorithm=p),y&&(x.SSECustomerKey=y),S&&(x.SSECustomerKeyMD5=S),o!==!0)return[3,5];fe=new Ks(x),oe.label=2;case 2:return oe.trys.push([2,4,,5]),b&&(typeof b=="function"?E.on(ct,function(fu){b(fu)}):M.warn("progressCallback should be a function, not a "+typeof b)),[4,A.send(fe)];case 3:return _=oe.sent(),E.removeAllListeners(ct),X(v,"download",{method:"get",result:"success"},{fileSize:Number(_.Body.size||_.Body.length)},"Download success for "+t),[2,_];case 4:throw j=oe.sent(),X(v,"download",{method:"get",result:"failed"},null,"Download failed with "+j.message),j;case 5:return oe.trys.push([5,8,,9]),Q=new Mf(ce({},A.config)),[4,Of(A,new Ks(x))];case 6:return B=oe.sent(),$=_f,[4,Q.presign(B,{expiresIn:g||ov})];case 7:return te=$.apply(void 0,[oe.sent()]),X(v,"getSignedUrl",{method:"get",result:"success"},null,"Signed URL: "+te),[2,te];case 8:throw Y=oe.sent(),M.warn("get signed url error",Y),X(v,"getSignedUrl",{method:"get",result:"failed"},null,"Could not get a signed URL for "+t),Y;case 9:return[2]}})})},e.prototype.put=function(t,r,n){var i=Object.assign({},this._config,n),a=i.bucket,o=i.track,u=i.progressCallback,d=i.level,c=i.resumable,l=i.contentType,f=i.contentDisposition,g=i.contentEncoding,v=i.cacheControl,p=i.expires,y=i.metadata,S=i.tagging,b=i.acl,O=i.serverSideEncryption,N=i.SSECustomerAlgorithm,E=i.SSECustomerKey,A=i.SSECustomerKeyMD5,x=i.SSEKMSKeyId,fe=l||"binary/octet-stream",_={Bucket:a,Key:t,Body:r,ContentType:fe};v&&(_.CacheControl=v),f&&(_.ContentDisposition=f),g&&(_.ContentEncoding=g),p&&(_.Expires=p),y&&(_.Metadata=y),S&&(_.Tagging=S),O&&(_.ServerSideEncryption=O),N&&(_.SSECustomerAlgorithm=N),E&&(_.SSECustomerKey=E),A&&(_.SSECustomerKeyMD5=A),x&&(_.SSEKMSKeyId=x);var j=new We.exports.EventEmitter,Q=new tv(_,i,j);if(b&&(_.ACL=b),c===!0){var B=this._createNewS3Client(i);B.middlewareStack.add(Qo(i,t),tu);var te={bucket:a,key:t,s3Client:B,file:r,emitter:j,accessLevel:d,params:_};return this.startResumableUpload(te,n)}try{return u&&(typeof u=="function"?j.on(qe,function($){u($)}):M.warn("progressCallback should be a function, not a "+typeof u)),Q.upload().then(function($){return M.debug("upload result",$),X(o,"upload",{method:"put",result:"success"},null,"Upload success for "+t),{key:t}})}catch($){throw M.warn("error uploading",$),X(o,"upload",{method:"put",result:"failed"},null,"Error uploading "+t),$}},e.prototype.remove=function(t,r){return ze(this,void 0,void 0,function(){var n,i,a,o,u,d,c,l,f,g,v;return De(this,function(p){switch(p.label){case 0:return[4,this._ensureCredentials()];case 1:if(n=p.sent(),!n||!this._isWithCredentials(this._config))throw new Error(ge.NO_CREDENTIALS);i=Object.assign({},this._config,r),a=i.bucket,o=i.track,u=this._prefix(i),d=u+t,c=this._createNewS3Client(i),M.debug("remove "+t+" from "+d),l={Bucket:a,Key:d},f=new Lf(l),p.label=2;case 2:return p.trys.push([2,4,,5]),[4,c.send(f)];case 3:return g=p.sent(),X(o,"delete",{method:"remove",result:"success"},null,"Deleted "+t+" successfully"),[2,g];case 4:throw v=p.sent(),X(o,"delete",{method:"remove",result:"failed"},null,"Deletion of "+t+" failed with "+v),v;case 5:return[2]}})})},e.prototype.list=function(t,r){return ze(this,void 0,void 0,function(){var n,i,a,o,u,d,c,l,f,g,v,p,y;return De(this,function(S){switch(S.label){case 0:return[4,this._ensureCredentials()];case 1:if(n=S.sent(),!n||!this._isWithCredentials(this._config))throw new Error(ge.NO_CREDENTIALS);i=Object.assign({},this._config,r),a=i.bucket,o=i.track,u=i.maxKeys,d=this._prefix(i),c=d+t,l=this._createNewS3Client(i),M.debug("list "+t+" from "+c),f={Bucket:a,Prefix:c,MaxKeys:u},g=new Af(f),S.label=2;case 2:return S.trys.push([2,4,,5]),[4,l.send(g)];case 3:return v=S.sent(),p=[],v&&v.Contents&&(p=v.Contents.map(function(b){return{key:b.Key.substr(d.length),eTag:b.ETag,lastModified:b.LastModified,size:b.Size}})),X(o,"list",{method:"list",result:"success"},null,p.length+" items returned from list operation"),M.debug("list",p),[2,p];case 4:throw y=S.sent(),M.warn("list error",y),X(o,"list",{method:"list",result:"failed"},null,"Listing items failed: "+y.message),y;case 5:return[2]}})})},e.prototype._ensureCredentials=function(){return ze(this,void 0,void 0,function(){var t,r,n;return De(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,we.get()];case 1:return t=i.sent(),t?(r=we.shear(t),M.debug("set credentials for storage",r),this._config.credentials=r,[2,!0]):[2,!1];case 2:return n=i.sent(),M.warn("ensure credentials error",n),[2,!1];case 3:return[2]}})})},e.prototype._isWithCredentials=function(t){return typeof t=="object"&&t.hasOwnProperty("credentials")},e.prototype._prefix=function(t){var r=t.credentials,n=t.level,i=t.customPrefix||{},a=t.identityId||r.identityId,o=(i.private!==void 0?i.private:"private/")+a+"/",u=(i.protected!==void 0?i.protected:"protected/")+a+"/",d=i.public!==void 0?i.public:"public/";switch(n){case"private":return o;case"protected":return u;default:return d}},e.prototype._createNewS3Client=function(t,r){var n=ru(t,r);return n.middlewareStack.add(Yo(n.config),eu),n},e.CATEGORY="Storage",e.PROVIDER_NAME="AWSS3",e}(),de=globalThis&&globalThis.__assign||function(){return de=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},de.apply(this,arguments)},cv=globalThis&&globalThis.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(u){o={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},ve=new Ne("StorageClass"),Se="AWSS3",So=function(){function e(){this._config={},this._pluggables=[],this._cancelTokenSourceMap=new WeakMap,ve.debug("Storage Options",this._config),this.get=this.get.bind(this),this.put=this.put.bind(this),this.remove=this.remove.bind(this),this.list=this.list.bind(this)}return e.prototype.getModuleName=function(){return"Storage"},e.prototype.addPluggable=function(t){if(t&&t.getCategory()==="Storage"){this._pluggables.push(t);var r={};return r=t.configure(this._config[t.getProviderName()]),r}},e.prototype.getPluggable=function(t){var r=this._pluggables.find(function(n){return n.getProviderName()===t});return r===void 0?(ve.debug("No plugin found with providerName",t),null):r},e.prototype.removePluggable=function(t){this._pluggables=this._pluggables.filter(function(r){return r.getProviderName()!==t})},e.prototype.configure=function(t){var r=this;if(ve.debug("configure Storage"),!t)return this._config;var n=xo.parseMobilehubConfig(t),i=Object.keys(n.Storage),a=["bucket","region","level","track","customPrefix","serverSideEncryption","SSECustomerAlgorithm","SSECustomerKey","SSECustomerKeyMD5","SSEKMSKeyId"],o=function(d){return a.some(function(c){return c===d})},u=function(d){return d.find(function(c){return o(c)})};return i&&u(i)&&!n.Storage[Se]&&(n.Storage[Se]={}),Object.entries(n.Storage).map(function(d){var c=cv(d,2),l=c[0],f=c[1];l&&o(l)&&f!==void 0&&(n.Storage[Se][l]=f,delete n.Storage[l])}),Object.keys(n.Storage).forEach(function(d){typeof n.Storage[d]!="string"&&(r._config[d]=de(de({},r._config[d]),n.Storage[d]))}),this._pluggables.forEach(function(d){d.configure(r._config[d.getProviderName()])}),this._pluggables.length===0&&this.addPluggable(new uv),this._config},e.prototype.getCancellableTokenSource=function(){return Ce.CancelToken.source()},e.prototype.updateRequestToBeCancellable=function(t,r){this._cancelTokenSourceMap.set(t,r)},e.prototype.isUploadTask=function(t){return typeof t!="undefined"&&typeof t.pause=="function"&&typeof t.resume=="function"},e.prototype.cancel=function(t,r){if(t instanceof lu)return t._cancel();var n=this._cancelTokenSourceMap.get(t);n?n.cancel(r):ve.debug("The request does not map to any cancel token")},e.prototype.copy=function(t,r,n){var i=(n==null?void 0:n.provider)||Se,a=this._pluggables.find(function(d){return d.getProviderName()===i});if(a===void 0)return ve.debug("No plugin found with providerName",i),Promise.reject("No plugin found in Storage for the provider");var o=this.getCancellableTokenSource();if(typeof a.copy!="function")return Promise.reject(".copy is not implemented on provider "+a.getProviderName());var u=a.copy(t,r,de(de({},n),{cancelTokenSource:o}));return this.updateRequestToBeCancellable(u,o),u},e.prototype.get=function(t,r){var n=(r==null?void 0:r.provider)||Se,i=this._pluggables.find(function(u){return u.getProviderName()===n});if(i===void 0)return ve.debug("No plugin found with providerName",n),Promise.reject("No plugin found in Storage for the provider");var a=this.getCancellableTokenSource(),o=i.get(t,de(de({},r),{cancelTokenSource:a}));return this.updateRequestToBeCancellable(o,a),o},e.prototype.isCancelError=function(t){return Ce.isCancel(t)},e.prototype.put=function(t,r,n){var i=(n==null?void 0:n.provider)||Se,a=this._pluggables.find(function(d){return d.getProviderName()===i});if(a===void 0)return ve.debug("No plugin found with providerName",i),Promise.reject("No plugin found in Storage for the provider");var o=this.getCancellableTokenSource(),u=a.put(t,r,de(de({},n),{cancelTokenSource:o}));return this.isUploadTask(u)||this.updateRequestToBeCancellable(u,o),u},e.prototype.remove=function(t,r){var n=(r==null?void 0:r.provider)||Se,i=this._pluggables.find(function(a){return a.getProviderName()===n});return i===void 0?(ve.debug("No plugin found with providerName",n),Promise.reject("No plugin found in Storage for the provider")):i.remove(t,r)},e.prototype.list=function(t,r){var n=(r==null?void 0:r.provider)||Se,i=this._pluggables.find(function(a){return a.getProviderName()===n});return i===void 0?(ve.debug("No plugin found with providerName",n),Promise.reject("No plugin found in Storage for the provider")):i.list(t,r)},e}(),Ge=globalThis&&globalThis.__assign||function(){return Ge=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ge.apply(this,arguments)},Ct=new Ne("Storage"),he=null,dv=function(){if(he)return he;Ct.debug("Create Storage Instance, debug"),he=new So,he.vault=new So;var e=he.configure;return he.configure=function(t){Ct.debug("storage configure called");var r=Ge({},e.call(he,t));Object.keys(r).forEach(function(n){typeof r[n]!="string"&&(r[n]=Ge(Ge({},r[n]),{level:"private"}))}),Ct.debug("storage vault configure called"),he.vault.configure(r)},he},br=dv();Gu.register(br);const bv=ju({id:"adminMenu",state:()=>({menu:[],menus:[],filteredMenu:[],selectedMenu:null,businessInfo:null}),getters:{getMenu:e=>e.filteredMenu.length>0?e.filteredMenu:e.menu,getFilteredMenu:e=>e.filteredMenu,getMenus:e=>e.menus,getSelectedMenu:e=>e.selectedMenu,getBusinessInfo:e=>e.businessInfo},actions:{search(e){const t=e.trim().toLowerCase();if(!t||t.length<2){this.filteredMenu=[];return}const r=[];this.menu.forEach(n=>{const i=n.items.filter(a=>a.name.toLowerCase().includes(t)||a.description.toLowerCase().includes(t));i.length>0&&r.push({category:n.category,items:i})}),this.filteredMenu=r},setSelectedMenu(e){this.selectedMenu=this.menus.find(t=>t.id===e)},async setImage(e){const t=await br.put(`${e.menuItem.id}.jpg`,e.file,{level:"public",contentType:"image/jpeg"}),{key:r}=t;await this.updateMenuItem({menuItem:e.menuItem,update:{image:r}})},async fetchMenu(){var a,o,u;const e=[],t=Ar();((a=t.currentBusiness)==null?void 0:a.id)||await t.setCurrentUser();const r=(o=t.currentBusiness)==null?void 0:o.id;if(!r)return;kr.start();const n=await z.query(Re,d=>d.businessID("eq",r));this.menus=JSON.parse(JSON.stringify(n)),this.selectedMenu||this.setSelectedMenu((u=n[0])==null?void 0:u.id);const i=this.selectedMenu||n[0]||null;if(i){const d=await z.query(_e,c=>c.menuID("eq",i.id),{sort:c=>c.createdAt(Lr.ASCENDING)});for(const c of d){const l=await z.query(Qe,f=>f.menucategoryID("eq",c.id),{sort:f=>f.createdAt(Lr.ASCENDING)});e.push({category:c,items:l})}return this.$patch(c=>{c.menu=JSON.parse(JSON.stringify(e))}),kr.done(),this.menu}},async addMenu(e){var n;const t=Ar(),r=await z.save(new Re({businessID:(n=t.currentBusiness)==null?void 0:n.id,name:e.name}));r&&this.$patch(i=>{i.selectedMenu=r,i.menus.push(JSON.parse(JSON.stringify(r)))})},async updateMenu(e){const t=await z.query(Re,e.menu.id);await z.save(Re.copyOf(t,n=>{n.name=e.update.name}))&&this.$patch(n=>{const i=n.menus.find(a=>a.id===e.menu.id);i.name=e.update.name})},async deleteMenu(e){const t=await z.query(Re,e.menu.id);await z.delete(t)&&this.$patch(n=>{const i=n.menus.find(a=>a.id===e.menu.id);n.menus.splice(n.menu.indexOf(i),1),n.menus.length===0?n.selectedMenu={}:n.selectedMenu=n.menus[0]})},async postCategory(e){const t=await z.save(new _e({menuID:this.selectedMenu.id,name:e.name}));return t&&this.$patch(r=>{r.menu.push({category:JSON.parse(JSON.stringify(t)),items:[]})}),t},async postMenuItem(e){const t=await z.save(new Qe({menucategoryID:e.category.id,name:e.fields.name,description:e.fields.description}));return t&&this.$patch(r=>{const n=r.menu.find(i=>i.category.id===e.category.id);(n==null?void 0:n.items)||(n.items=[]),n.items.push(JSON.parse(JSON.stringify(t)))}),t},async updateCategory(e){const t=await z.query(_e,e.category.id),r=await z.save(_e.copyOf(t,n=>{n.name=e.categoryName}));return r&&this.$patch(n=>{const i=n.menu.find(a=>a.category.id===e.category.id);i.category.name=e.categoryName}),r},async updateMenuItem(e){const t=await z.query(Qe,e.menuItem.id),r=await z.save(_e.copyOf(t,n=>{Object.entries(e.update).forEach(([i,a])=>{n[i]=a})}));return r&&this.$patch(n=>{const a=n.menu.find(o=>o.category.id===e.menuItem.menucategoryID).items.find(o=>o.id===e.menuItem.id);Object.entries(e.update).forEach(([o,u])=>{a[o]=u})}),r},async deleteCategory(e){const t=await z.query(_e,e.category.id),r=await z.delete(t);return r&&this.$patch(n=>{const i=n.menu.find(a=>a.category.id===e.category.id);n.menu.splice(n.menu.indexOf(i),1)}),r},async deleteMenuItem(e){const t=await z.query(Qe,e.id),r=await z.delete(t);return(t==null?void 0:t.image)&&await br.remove(t.image),r&&this.$patch(n=>{const i=n.menu.find(o=>o.category.id===e.menucategoryID),a=i.items.find(o=>o.id===e.id);i.items.splice(i.items.indexOf(a),1)}),r}}}),lv={props:{show:{type:Boolean,required:!0}}},fv={class:"modal"},vv={class:"modal-box"},hv={class:"form-control flex items-center"},gv={class:"mt-4"},mv={class:"modal-action"};function pv(e,t,r,n,i,a){return $u(),Hu("div",null,[Vu(Ee("input",{id:"my-modal-2","onUpdate:modelValue":t[0]||(t[0]=o=>r.show=o),type:"checkbox",class:"modal-toggle"},null,512),[[Xu,r.show]]),Ee("div",fv,[Ee("div",vv,[Ee("div",hv,[Ee("h2",null,[gt(e.$slots,"header")])]),Ee("div",gv,[gt(e.$slots,"body")]),Ee("div",mv,[gt(e.$slots,"action")])])])])}var wv=Wu(lv,[["render",pv]]);export{wv as _,bv as u};
