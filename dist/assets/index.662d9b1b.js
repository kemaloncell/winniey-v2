import{_ as L}from"./MenuCategory.6029289c.js";import{d as E,N as x,b as v,S as C,h as I,r as $,B as k,a as h,C as B,o as i,f as c,g as n,v as N,D as U,F as q,E as D,t as g,j as f,x as O,l as p,k as b,p as S}from"./vendor.e2bcb249.js";import{B as V,M as z,a as F,b as j,_ as J}from"./app.6a8a6329.js";const w=E({id:"userMenu",state:()=>({menu:[],menus:[],filteredMenu:[],selectedMenu:null,businessInfo:null}),getters:{getMenu:s=>s.filteredMenu.length>0?s.filteredMenu:s.menu,getFilteredMenu:s=>s.filteredMenu,getMenus:s=>s.menus,getSelectedMenu:s=>s.selectedMenu,getBusinessInfo:s=>s.businessInfo},actions:{search(s){const e=s.trim().toLowerCase();if(!e||e.length<2){this.filteredMenu=[];return}const t=[];this.menu.forEach(o=>{const u=o.items.filter(r=>r.name.toLowerCase().includes(e)||r.description.toLowerCase().includes(e));u.length>0&&t.push({category:o.category,items:u})}),this.filteredMenu=t},setSelectedMenu(s){this.selectedMenu=this.menus.find(e=>e.id===s)},async fetchMenu(s){var l;const e=[];if(!s||!(s==null?void 0:s.businessUsername))return;x.start();const{businessUsername:t}=s,o=await v.query(V,d=>d.username("eq",t));this.businessInfo=o[0];const u=o[0].id;if(!u){x.done();return}const r=await v.query(z,d=>d.businessID("eq",u));this.menus=JSON.parse(JSON.stringify(r)),this.selectedMenu||this.setSelectedMenu((l=r[0])==null?void 0:l.id);const m=this.selectedMenu||r[0]||null;if(m){const d=await v.query(F,a=>a.menuID("eq",m.id),{sort:a=>a.createdAt(C.ASCENDING)});for(const a of d){const _=await v.query(j,M=>M.menucategoryID("eq",a.id),{sort:M=>M.createdAt(C.ASCENDING)});e.push({category:a,items:_})}return this.$patch(a=>{a.menu=JSON.parse(JSON.stringify(e))}),x.done(),this.menu}}}}),R={class:"flex justify-end"},G=n("option",{disabled:"disabled"}," Men\xFC Se\xE7imi ",-1),T=["value"],Y=I({setup(s){const e=w(),t=$(null),o=k(),{businessUsername:u}=o.params,r=h(()=>e.getSelectedMenu);B(()=>{var d;t.value=(d=r.value)==null?void 0:d.id});const m=h(()=>e.getMenus),l=()=>{t.value&&(e.setSelectedMenu(t.value),e.fetchMenu({businessUsername:u}))};return(d,a)=>(i(),c("div",R,[n("div",null,[N(n("select",{"onUpdate:modelValue":a[0]||(a[0]=_=>t.value=_),class:"select select-bordered",onChange:l},[G,(i(!0),c(q,null,D(f(m),_=>(i(),c("option",{key:_.id,value:_.id},g(_.name),9,T))),128))],544),[[U,t.value]])])]))}}),P=I({setup(s){const e=$(""),t=w();return B(()=>{t.search(e.value)}),(o,u)=>N((i(),c("input",{"onUpdate:modelValue":u[0]||(u[0]=r=>e.value=r),type:"search",placeholder:"Arama...",class:"input input-bordered"},null,512)),[[O,e.value]])}}),H={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32"},K=n("path",{d:"M26 29h-.17C6.18 27.87 3.39 11.29 3 6.23A3 3 0 0 1 5.76 3h5.51a2 2 0 0 1 1.86 1.26L14.65 8a2 2 0 0 1-.44 2.16l-2.13 2.15a9.37 9.37 0 0 0 7.58 7.6l2.17-2.15a2 2 0 0 1 2.17-.41l3.77 1.51A2 2 0 0 1 29 20.72V26a3 3 0 0 1-3 3zM6 5a1 1 0 0 0-1 1v.08C5.46 12 8.41 26 25.94 27a1 1 0 0 0 1.06-.94v-5.34l-3.77-1.51l-2.87 2.85l-.48-.06c-8.7-1.09-9.88-9.79-9.88-9.88l-.06-.48l2.84-2.87L11.28 5z",fill:"currentColor"},null,-1),Q=[K];function W(s,e){return i(),c("svg",H,Q)}var X={name:"carbon-phone",render:W};const Z={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32"},ee=n("circle",{cx:"16",cy:"25",r:"2",fill:"currentColor"},null,-1),se=n("path",{d:"M10.47 19.233l1.414 1.413a5.969 5.969 0 0 1 8.223-.009l1.413-1.413a7.963 7.963 0 0 0-11.05.01z",fill:"currentColor"},null,-1),ne=n("path",{d:"M6.229 14.993l1.414 1.413a11.955 11.955 0 0 1 16.704-.01l1.413-1.413a13.951 13.951 0 0 0-19.531.01z",fill:"currentColor"},null,-1),te=n("path",{d:"M30 10.741a19.94 19.94 0 0 0-28 0v.023l1.404 1.404a17.934 17.934 0 0 1 25.181-.01L30 10.743z",fill:"currentColor"},null,-1),oe=[ee,se,ne,te];function ie(s,e){return i(),c("svg",Z,oe)}var re={name:"carbon-wifi",render:ie};const ce={class:"card shadow-lg bordered compact side bg-base-100"},ue={class:"flex-row items-center space-x-4 card-body"},ae={key:0},le={class:"mask mask-squircle"},de={class:"rounded-full w-14 h-14 shadow"},_e=["src"],me={class:"card-title"},he={key:0,class:"card-body ml-2 custom-description"},fe={class:"flex flex-col gap-2"},pe={key:0,class:"mt-0 mb-1 mx-2"},Me={key:1,class:"flex items-center"},ge={class:"mx-2"},ve={key:2,class:"flex items-center"},be={class:"mx-2"},xe={props:{businessInfo:{type:Object,required:!0}},setup(s){const e=s,t=h(()=>e.businessInfo.description||e.businessInfo.phone),o=h(()=>e.businessInfo.logo);return(u,r)=>{const m=re,l=X;return i(),c("div",ce,[n("div",ue,[f(o)?(i(),c("div",ae,[n("div",le,[n("div",de,[n("img",{src:e.businessInfo.logo},null,8,_e)])])])):p("",!0),n("div",null,[n("h2",me,g(e.businessInfo.name),1)])]),f(t)?(i(),c("div",he,[n("div",fe,[e.businessInfo.description?(i(),c("p",pe,g(e.businessInfo.description),1)):p("",!0),e.businessInfo.wifi?(i(),c("p",Me,[b(m,{class:"w-8 h-5 inline"}),n("span",ge,g(e.businessInfo.wifi),1)])):p("",!0),e.businessInfo.phone?(i(),c("p",ve,[b(l,{class:"w-8 h-5 inline"}),n("span",be,g(e.businessInfo.phone),1)])):p("",!0)])])):p("",!0)])}}};var Ie=J(xe,[["__scopeId","data-v-964c3872"]]);const we={class:"flex flex-row mt-4 justify-between"},$e=I({setup(s){const e=k(),{businessUsername:t}=e.params,o=w(),u=h(()=>o.getMenu),r=h(()=>o.getBusinessInfo),m=h(()=>o.getFilteredMenu.length>0);return h(()=>{var l;return(l=o.getSelectedMenu)==null?void 0:l.id}),o.fetchMenu({businessUsername:t}),(l,d)=>{const a=Ie,_=P,M=Y,A=L;return i(),c("div",null,[f(r)?(i(),S(a,{key:0,"business-info":f(r)},null,8,["business-info"])):p("",!0),n("div",we,[b(_,{class:"md:flex-1 md:mr-4"}),b(M)]),(i(!0),c(q,null,D(f(u),y=>(i(),S(A,{key:y.id,class:"my-4","category-data":y,"collapse-open":f(m)},null,8,["category-data","collapse-open"]))),128))])}}});export{$e as default};
